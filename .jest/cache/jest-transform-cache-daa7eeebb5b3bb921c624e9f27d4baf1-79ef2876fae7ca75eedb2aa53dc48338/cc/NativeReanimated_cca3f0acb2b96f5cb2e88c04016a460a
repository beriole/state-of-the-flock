e7c99072dc2522963ea805245e68d574
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.NativeReanimated = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _checkCppVersion = require("../platform-specific/checkCppVersion");
var _jsVersion = require("../platform-specific/jsVersion");
var _valueUnpacker = require("../valueUnpacker");
var _PlatformChecker = require("../PlatformChecker");
var _fabricUtils = require("../fabricUtils");
var _NativeReanimatedModule = _interopRequireDefault(require("../specs/NativeReanimatedModule"));
function _defineProperty(obj, key, value) {
  key = _toPropertyKey(key);
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey(t) {
  var i = _toPrimitive(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive(t, r) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r || "default");
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r ? String : Number)(t);
}
function assertSingleReanimatedInstance() {
  if (global._REANIMATED_VERSION_JS !== undefined && global._REANIMATED_VERSION_JS !== _jsVersion.jsVersion) {
    throw new Error(`[Reanimated] Another instance of Reanimated was detected.
See \`https://docs.swmansion.com/react-native-reanimated/docs/guides/troubleshooting#another-instance-of-reanimated-was-detected\` for more details. Previous: ${global._REANIMATED_VERSION_JS}, current: ${_jsVersion.jsVersion}.`);
  }
}
var NativeReanimated = exports.NativeReanimated = function () {
  function NativeReanimated() {
    (0, _classCallCheck2.default)(this, NativeReanimated);
    _defineProperty(this, "InnerNativeModule", void 0);
    if (__DEV__) {
      assertSingleReanimatedInstance();
    }
    global._REANIMATED_VERSION_JS = _jsVersion.jsVersion;
    if (global.__reanimatedModuleProxy === undefined) {
      var valueUnpackerCode = (0, _valueUnpacker.getValueUnpackerCode)();
      _NativeReanimatedModule.default === null || _NativeReanimatedModule.default === void 0 || _NativeReanimatedModule.default.installTurboModule(valueUnpackerCode);
    }
    if (global.__reanimatedModuleProxy === undefined) {
      throw new Error(`[Reanimated] Native part of Reanimated doesn't seem to be initialized.
See https://docs.swmansion.com/react-native-reanimated/docs/guides/troubleshooting#native-part-of-reanimated-doesnt-seem-to-be-initialized for more details.`);
    }
    if (__DEV__) {
      (0, _checkCppVersion.checkCppVersion)();
    }
    this.InnerNativeModule = global.__reanimatedModuleProxy;
  }
  return (0, _createClass2.default)(NativeReanimated, [{
    key: "makeShareableClone",
    value: function makeShareableClone(value, shouldPersistRemote, nativeStateSource) {
      return this.InnerNativeModule.makeShareableClone(value, shouldPersistRemote, nativeStateSource);
    }
  }, {
    key: "scheduleOnUI",
    value: function scheduleOnUI(shareable) {
      return this.InnerNativeModule.scheduleOnUI(shareable);
    }
  }, {
    key: "executeOnUIRuntimeSync",
    value: function executeOnUIRuntimeSync(shareable) {
      return this.InnerNativeModule.executeOnUIRuntimeSync(shareable);
    }
  }, {
    key: "createWorkletRuntime",
    value: function createWorkletRuntime(name, initializer) {
      return this.InnerNativeModule.createWorkletRuntime(name, initializer);
    }
  }, {
    key: "scheduleOnRuntime",
    value: function scheduleOnRuntime(workletRuntime, shareableWorklet) {
      return this.InnerNativeModule.scheduleOnRuntime(workletRuntime, shareableWorklet);
    }
  }, {
    key: "registerSensor",
    value: function registerSensor(sensorType, interval, iosReferenceFrame, handler) {
      return this.InnerNativeModule.registerSensor(sensorType, interval, iosReferenceFrame, handler);
    }
  }, {
    key: "unregisterSensor",
    value: function unregisterSensor(sensorId) {
      return this.InnerNativeModule.unregisterSensor(sensorId);
    }
  }, {
    key: "registerEventHandler",
    value: function registerEventHandler(eventHandler, eventName, emitterReactTag) {
      return this.InnerNativeModule.registerEventHandler(eventHandler, eventName, emitterReactTag);
    }
  }, {
    key: "unregisterEventHandler",
    value: function unregisterEventHandler(id) {
      return this.InnerNativeModule.unregisterEventHandler(id);
    }
  }, {
    key: "getViewProp",
    value: function getViewProp(viewTag, propName, component, callback) {
      var shadowNodeWrapper;
      if ((0, _PlatformChecker.isFabric)()) {
        shadowNodeWrapper = (0, _fabricUtils.getShadowNodeWrapperFromRef)(component);
        return this.InnerNativeModule.getViewProp(shadowNodeWrapper, propName, callback);
      }
      return this.InnerNativeModule.getViewProp(viewTag, propName, callback);
    }
  }, {
    key: "configureLayoutAnimationBatch",
    value: function configureLayoutAnimationBatch(layoutAnimationsBatch) {
      this.InnerNativeModule.configureLayoutAnimationBatch(layoutAnimationsBatch);
    }
  }, {
    key: "setShouldAnimateExitingForTag",
    value: function setShouldAnimateExitingForTag(viewTag, shouldAnimate) {
      this.InnerNativeModule.setShouldAnimateExitingForTag(viewTag, shouldAnimate);
    }
  }, {
    key: "enableLayoutAnimations",
    value: function enableLayoutAnimations(flag) {
      this.InnerNativeModule.enableLayoutAnimations(flag);
    }
  }, {
    key: "configureProps",
    value: function configureProps(uiProps, nativeProps) {
      this.InnerNativeModule.configureProps(uiProps, nativeProps);
    }
  }, {
    key: "subscribeForKeyboardEvents",
    value: function subscribeForKeyboardEvents(handler, isStatusBarTranslucent) {
      return this.InnerNativeModule.subscribeForKeyboardEvents(handler, isStatusBarTranslucent);
    }
  }, {
    key: "unsubscribeFromKeyboardEvents",
    value: function unsubscribeFromKeyboardEvents(listenerId) {
      this.InnerNativeModule.unsubscribeFromKeyboardEvents(listenerId);
    }
  }]);
}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiTmF0aXZlUmVhbmltYXRlZCIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY3JlYXRlQ2xhc3MyIiwiX2NoZWNrQ3BwVmVyc2lvbiIsIl9qc1ZlcnNpb24iLCJfdmFsdWVVbnBhY2tlciIsIl9QbGF0Zm9ybUNoZWNrZXIiLCJfZmFicmljVXRpbHMiLCJfTmF0aXZlUmVhbmltYXRlZE1vZHVsZSIsIl9kZWZpbmVQcm9wZXJ0eSIsIm9iaiIsImtleSIsIl90b1Byb3BlcnR5S2V5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidCIsImkiLCJfdG9QcmltaXRpdmUiLCJyIiwiZSIsIlN5bWJvbCIsInRvUHJpbWl0aXZlIiwiY2FsbCIsIlR5cGVFcnJvciIsIlN0cmluZyIsIk51bWJlciIsImFzc2VydFNpbmdsZVJlYW5pbWF0ZWRJbnN0YW5jZSIsImdsb2JhbCIsIl9SRUFOSU1BVEVEX1ZFUlNJT05fSlMiLCJ1bmRlZmluZWQiLCJqc1ZlcnNpb24iLCJFcnJvciIsImRlZmF1bHQiLCJfX0RFVl9fIiwiX19yZWFuaW1hdGVkTW9kdWxlUHJveHkiLCJ2YWx1ZVVucGFja2VyQ29kZSIsImdldFZhbHVlVW5wYWNrZXJDb2RlIiwiUmVhbmltYXRlZE1vZHVsZSIsImluc3RhbGxUdXJib01vZHVsZSIsImNoZWNrQ3BwVmVyc2lvbiIsIklubmVyTmF0aXZlTW9kdWxlIiwibWFrZVNoYXJlYWJsZUNsb25lIiwic2hvdWxkUGVyc2lzdFJlbW90ZSIsIm5hdGl2ZVN0YXRlU291cmNlIiwic2NoZWR1bGVPblVJIiwic2hhcmVhYmxlIiwiZXhlY3V0ZU9uVUlSdW50aW1lU3luYyIsImNyZWF0ZVdvcmtsZXRSdW50aW1lIiwibmFtZSIsImluaXRpYWxpemVyIiwic2NoZWR1bGVPblJ1bnRpbWUiLCJ3b3JrbGV0UnVudGltZSIsInNoYXJlYWJsZVdvcmtsZXQiLCJyZWdpc3RlclNlbnNvciIsInNlbnNvclR5cGUiLCJpbnRlcnZhbCIsImlvc1JlZmVyZW5jZUZyYW1lIiwiaGFuZGxlciIsInVucmVnaXN0ZXJTZW5zb3IiLCJzZW5zb3JJZCIsInJlZ2lzdGVyRXZlbnRIYW5kbGVyIiwiZXZlbnRIYW5kbGVyIiwiZXZlbnROYW1lIiwiZW1pdHRlclJlYWN0VGFnIiwidW5yZWdpc3RlckV2ZW50SGFuZGxlciIsImlkIiwiZ2V0Vmlld1Byb3AiLCJ2aWV3VGFnIiwicHJvcE5hbWUiLCJjb21wb25lbnQiLCJjYWxsYmFjayIsInNoYWRvd05vZGVXcmFwcGVyIiwiaXNGYWJyaWMiLCJnZXRTaGFkb3dOb2RlV3JhcHBlckZyb21SZWYiLCJjb25maWd1cmVMYXlvdXRBbmltYXRpb25CYXRjaCIsImxheW91dEFuaW1hdGlvbnNCYXRjaCIsInNldFNob3VsZEFuaW1hdGVFeGl0aW5nRm9yVGFnIiwic2hvdWxkQW5pbWF0ZSIsImVuYWJsZUxheW91dEFuaW1hdGlvbnMiLCJmbGFnIiwiY29uZmlndXJlUHJvcHMiLCJ1aVByb3BzIiwibmF0aXZlUHJvcHMiLCJzdWJzY3JpYmVGb3JLZXlib2FyZEV2ZW50cyIsImlzU3RhdHVzQmFyVHJhbnNsdWNlbnQiLCJ1bnN1YnNjcmliZUZyb21LZXlib2FyZEV2ZW50cyIsImxpc3RlbmVySWQiXSwic291cmNlcyI6WyJOYXRpdmVSZWFuaW1hdGVkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbmltcG9ydCB0eXBlIHtcbiAgU2hhZG93Tm9kZVdyYXBwZXIsXG4gIFZhbHVlM0QsXG4gIFZhbHVlUm90YXRpb24sXG4gIFNoYXJlYWJsZVJlZixcbn0gZnJvbSAnLi4vY29tbW9uVHlwZXMnO1xuaW1wb3J0IHsgY2hlY2tDcHBWZXJzaW9uIH0gZnJvbSAnLi4vcGxhdGZvcm0tc3BlY2lmaWMvY2hlY2tDcHBWZXJzaW9uJztcbmltcG9ydCB7IGpzVmVyc2lvbiB9IGZyb20gJy4uL3BsYXRmb3JtLXNwZWNpZmljL2pzVmVyc2lvbic7XG5pbXBvcnQgdHlwZSB7IFdvcmtsZXRSdW50aW1lIH0gZnJvbSAnLi4vcnVudGltZXMnO1xuaW1wb3J0IHsgZ2V0VmFsdWVVbnBhY2tlckNvZGUgfSBmcm9tICcuLi92YWx1ZVVucGFja2VyJztcbmltcG9ydCB7IGlzRmFicmljIH0gZnJvbSAnLi4vUGxhdGZvcm1DaGVja2VyJztcbmltcG9ydCB0eXBlIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGdldFNoYWRvd05vZGVXcmFwcGVyRnJvbVJlZiB9IGZyb20gJy4uL2ZhYnJpY1V0aWxzJztcbmltcG9ydCB0eXBlIHsgTGF5b3V0QW5pbWF0aW9uQmF0Y2hJdGVtIH0gZnJvbSAnLi4vbGF5b3V0UmVhbmltYXRpb24vYW5pbWF0aW9uQnVpbGRlci9jb21tb25UeXBlcyc7XG5pbXBvcnQgUmVhbmltYXRlZE1vZHVsZSBmcm9tICcuLi9zcGVjcy9OYXRpdmVSZWFuaW1hdGVkTW9kdWxlJztcblxuLy8gdGhpcyBpcyB0aGUgdHlwZSBvZiBgX19yZWFuaW1hdGVkTW9kdWxlUHJveHlgIHdoaWNoIGlzIGluamVjdGVkIHVzaW5nIEpTSVxuZXhwb3J0IGludGVyZmFjZSBOYXRpdmVSZWFuaW1hdGVkTW9kdWxlIHtcbiAgbWFrZVNoYXJlYWJsZUNsb25lPFQ+KFxuICAgIHZhbHVlOiBULFxuICAgIHNob3VsZFBlcnNpc3RSZW1vdGU6IGJvb2xlYW4sXG4gICAgbmF0aXZlU3RhdGVTb3VyY2U/OiBvYmplY3RcbiAgKTogU2hhcmVhYmxlUmVmPFQ+O1xuICBzY2hlZHVsZU9uVUk8VD4oc2hhcmVhYmxlOiBTaGFyZWFibGVSZWY8VD4pOiB2b2lkO1xuICBleGVjdXRlT25VSVJ1bnRpbWVTeW5jPFQsIFI+KHNoYXJlYWJsZTogU2hhcmVhYmxlUmVmPFQ+KTogUjtcbiAgY3JlYXRlV29ya2xldFJ1bnRpbWUoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGluaXRpYWxpemVyOiBTaGFyZWFibGVSZWY8KCkgPT4gdm9pZD5cbiAgKTogV29ya2xldFJ1bnRpbWU7XG4gIHNjaGVkdWxlT25SdW50aW1lPFQ+KFxuICAgIHdvcmtsZXRSdW50aW1lOiBXb3JrbGV0UnVudGltZSxcbiAgICB3b3JrbGV0OiBTaGFyZWFibGVSZWY8VD5cbiAgKTogdm9pZDtcbiAgcmVnaXN0ZXJFdmVudEhhbmRsZXI8VD4oXG4gICAgZXZlbnRIYW5kbGVyOiBTaGFyZWFibGVSZWY8VD4sXG4gICAgZXZlbnROYW1lOiBzdHJpbmcsXG4gICAgZW1pdHRlclJlYWN0VGFnOiBudW1iZXJcbiAgKTogbnVtYmVyO1xuICB1bnJlZ2lzdGVyRXZlbnRIYW5kbGVyKGlkOiBudW1iZXIpOiB2b2lkO1xuICBnZXRWaWV3UHJvcDxUPihcbiAgICB2aWV3VGFnT3JTaGFkb3dOb2RlV3JhcHBlcjogbnVtYmVyIHwgU2hhZG93Tm9kZVdyYXBwZXIsXG4gICAgcHJvcE5hbWU6IHN0cmluZyxcbiAgICBjYWxsYmFjaz86IChyZXN1bHQ6IFQpID0+IHZvaWRcbiAgKTogUHJvbWlzZTxUPjtcbiAgZW5hYmxlTGF5b3V0QW5pbWF0aW9ucyhmbGFnOiBib29sZWFuKTogdm9pZDtcbiAgcmVnaXN0ZXJTZW5zb3IoXG4gICAgc2Vuc29yVHlwZTogbnVtYmVyLFxuICAgIGludGVydmFsOiBudW1iZXIsXG4gICAgaW9zUmVmZXJlbmNlRnJhbWU6IG51bWJlcixcbiAgICBoYW5kbGVyOiBTaGFyZWFibGVSZWY8KGRhdGE6IFZhbHVlM0QgfCBWYWx1ZVJvdGF0aW9uKSA9PiB2b2lkPlxuICApOiBudW1iZXI7XG4gIHVucmVnaXN0ZXJTZW5zb3Ioc2Vuc29ySWQ6IG51bWJlcik6IHZvaWQ7XG4gIGNvbmZpZ3VyZVByb3BzKHVpUHJvcHM6IHN0cmluZ1tdLCBuYXRpdmVQcm9wczogc3RyaW5nW10pOiB2b2lkO1xuICBzdWJzY3JpYmVGb3JLZXlib2FyZEV2ZW50cyhcbiAgICBoYW5kbGVyOiBTaGFyZWFibGVSZWY8bnVtYmVyPixcbiAgICBpc1N0YXR1c0JhclRyYW5zbHVjZW50OiBib29sZWFuXG4gICk6IG51bWJlcjtcbiAgdW5zdWJzY3JpYmVGcm9tS2V5Ym9hcmRFdmVudHMobGlzdGVuZXJJZDogbnVtYmVyKTogdm9pZDtcbiAgY29uZmlndXJlTGF5b3V0QW5pbWF0aW9uQmF0Y2goXG4gICAgbGF5b3V0QW5pbWF0aW9uc0JhdGNoOiBMYXlvdXRBbmltYXRpb25CYXRjaEl0ZW1bXVxuICApOiB2b2lkO1xuICBzZXRTaG91bGRBbmltYXRlRXhpdGluZ0ZvclRhZyh2aWV3VGFnOiBudW1iZXIsIHNob3VsZEFuaW1hdGU6IGJvb2xlYW4pOiB2b2lkO1xufVxuXG5mdW5jdGlvbiBhc3NlcnRTaW5nbGVSZWFuaW1hdGVkSW5zdGFuY2UoKSB7XG4gIGlmIChcbiAgICBnbG9iYWwuX1JFQU5JTUFURURfVkVSU0lPTl9KUyAhPT0gdW5kZWZpbmVkICYmXG4gICAgZ2xvYmFsLl9SRUFOSU1BVEVEX1ZFUlNJT05fSlMgIT09IGpzVmVyc2lvblxuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgW1JlYW5pbWF0ZWRdIEFub3RoZXIgaW5zdGFuY2Ugb2YgUmVhbmltYXRlZCB3YXMgZGV0ZWN0ZWQuXG5TZWUgXFxgaHR0cHM6Ly9kb2NzLnN3bWFuc2lvbi5jb20vcmVhY3QtbmF0aXZlLXJlYW5pbWF0ZWQvZG9jcy9ndWlkZXMvdHJvdWJsZXNob290aW5nI2Fub3RoZXItaW5zdGFuY2Utb2YtcmVhbmltYXRlZC13YXMtZGV0ZWN0ZWRcXGAgZm9yIG1vcmUgZGV0YWlscy4gUHJldmlvdXM6ICR7Z2xvYmFsLl9SRUFOSU1BVEVEX1ZFUlNJT05fSlN9LCBjdXJyZW50OiAke2pzVmVyc2lvbn0uYFxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE5hdGl2ZVJlYW5pbWF0ZWQge1xuICBwcml2YXRlIElubmVyTmF0aXZlTW9kdWxlOiBOYXRpdmVSZWFuaW1hdGVkTW9kdWxlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIFRoZXNlIGNoZWNrcyBoYXZlIHRvIHNwbGl0IHNpbmNlIHZlcnNpb24gY2hlY2tpbmcgZGVwZW5kIG9uIHRoZSBleGVjdXRpb24gb3JkZXJcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgYXNzZXJ0U2luZ2xlUmVhbmltYXRlZEluc3RhbmNlKCk7XG4gICAgfVxuICAgIGdsb2JhbC5fUkVBTklNQVRFRF9WRVJTSU9OX0pTID0ganNWZXJzaW9uO1xuICAgIGlmIChnbG9iYWwuX19yZWFuaW1hdGVkTW9kdWxlUHJveHkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgdmFsdWVVbnBhY2tlckNvZGUgPSBnZXRWYWx1ZVVucGFja2VyQ29kZSgpO1xuICAgICAgUmVhbmltYXRlZE1vZHVsZT8uaW5zdGFsbFR1cmJvTW9kdWxlKHZhbHVlVW5wYWNrZXJDb2RlKTtcbiAgICB9XG4gICAgaWYgKGdsb2JhbC5fX3JlYW5pbWF0ZWRNb2R1bGVQcm94eSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBbUmVhbmltYXRlZF0gTmF0aXZlIHBhcnQgb2YgUmVhbmltYXRlZCBkb2Vzbid0IHNlZW0gdG8gYmUgaW5pdGlhbGl6ZWQuXG5TZWUgaHR0cHM6Ly9kb2NzLnN3bWFuc2lvbi5jb20vcmVhY3QtbmF0aXZlLXJlYW5pbWF0ZWQvZG9jcy9ndWlkZXMvdHJvdWJsZXNob290aW5nI25hdGl2ZS1wYXJ0LW9mLXJlYW5pbWF0ZWQtZG9lc250LXNlZW0tdG8tYmUtaW5pdGlhbGl6ZWQgZm9yIG1vcmUgZGV0YWlscy5gXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgY2hlY2tDcHBWZXJzaW9uKCk7XG4gICAgfVxuICAgIHRoaXMuSW5uZXJOYXRpdmVNb2R1bGUgPSBnbG9iYWwuX19yZWFuaW1hdGVkTW9kdWxlUHJveHk7XG4gIH1cblxuICBtYWtlU2hhcmVhYmxlQ2xvbmU8VD4oXG4gICAgdmFsdWU6IFQsXG4gICAgc2hvdWxkUGVyc2lzdFJlbW90ZTogYm9vbGVhbixcbiAgICBuYXRpdmVTdGF0ZVNvdXJjZT86IG9iamVjdFxuICApIHtcbiAgICByZXR1cm4gdGhpcy5Jbm5lck5hdGl2ZU1vZHVsZS5tYWtlU2hhcmVhYmxlQ2xvbmUoXG4gICAgICB2YWx1ZSxcbiAgICAgIHNob3VsZFBlcnNpc3RSZW1vdGUsXG4gICAgICBuYXRpdmVTdGF0ZVNvdXJjZVxuICAgICk7XG4gIH1cblxuICBzY2hlZHVsZU9uVUk8VD4oc2hhcmVhYmxlOiBTaGFyZWFibGVSZWY8VD4pIHtcbiAgICByZXR1cm4gdGhpcy5Jbm5lck5hdGl2ZU1vZHVsZS5zY2hlZHVsZU9uVUkoc2hhcmVhYmxlKTtcbiAgfVxuXG4gIGV4ZWN1dGVPblVJUnVudGltZVN5bmM8VCwgUj4oc2hhcmVhYmxlOiBTaGFyZWFibGVSZWY8VD4pOiBSIHtcbiAgICByZXR1cm4gdGhpcy5Jbm5lck5hdGl2ZU1vZHVsZS5leGVjdXRlT25VSVJ1bnRpbWVTeW5jKHNoYXJlYWJsZSk7XG4gIH1cblxuICBjcmVhdGVXb3JrbGV0UnVudGltZShuYW1lOiBzdHJpbmcsIGluaXRpYWxpemVyOiBTaGFyZWFibGVSZWY8KCkgPT4gdm9pZD4pIHtcbiAgICByZXR1cm4gdGhpcy5Jbm5lck5hdGl2ZU1vZHVsZS5jcmVhdGVXb3JrbGV0UnVudGltZShuYW1lLCBpbml0aWFsaXplcik7XG4gIH1cblxuICBzY2hlZHVsZU9uUnVudGltZTxUPihcbiAgICB3b3JrbGV0UnVudGltZTogV29ya2xldFJ1bnRpbWUsXG4gICAgc2hhcmVhYmxlV29ya2xldDogU2hhcmVhYmxlUmVmPFQ+XG4gICkge1xuICAgIHJldHVybiB0aGlzLklubmVyTmF0aXZlTW9kdWxlLnNjaGVkdWxlT25SdW50aW1lKFxuICAgICAgd29ya2xldFJ1bnRpbWUsXG4gICAgICBzaGFyZWFibGVXb3JrbGV0XG4gICAgKTtcbiAgfVxuXG4gIHJlZ2lzdGVyU2Vuc29yKFxuICAgIHNlbnNvclR5cGU6IG51bWJlcixcbiAgICBpbnRlcnZhbDogbnVtYmVyLFxuICAgIGlvc1JlZmVyZW5jZUZyYW1lOiBudW1iZXIsXG4gICAgaGFuZGxlcjogU2hhcmVhYmxlUmVmPChkYXRhOiBWYWx1ZTNEIHwgVmFsdWVSb3RhdGlvbikgPT4gdm9pZD5cbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuSW5uZXJOYXRpdmVNb2R1bGUucmVnaXN0ZXJTZW5zb3IoXG4gICAgICBzZW5zb3JUeXBlLFxuICAgICAgaW50ZXJ2YWwsXG4gICAgICBpb3NSZWZlcmVuY2VGcmFtZSxcbiAgICAgIGhhbmRsZXJcbiAgICApO1xuICB9XG5cbiAgdW5yZWdpc3RlclNlbnNvcihzZW5zb3JJZDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIHRoaXMuSW5uZXJOYXRpdmVNb2R1bGUudW5yZWdpc3RlclNlbnNvcihzZW5zb3JJZCk7XG4gIH1cblxuICByZWdpc3RlckV2ZW50SGFuZGxlcjxUPihcbiAgICBldmVudEhhbmRsZXI6IFNoYXJlYWJsZVJlZjxUPixcbiAgICBldmVudE5hbWU6IHN0cmluZyxcbiAgICBlbWl0dGVyUmVhY3RUYWc6IG51bWJlclxuICApIHtcbiAgICByZXR1cm4gdGhpcy5Jbm5lck5hdGl2ZU1vZHVsZS5yZWdpc3RlckV2ZW50SGFuZGxlcihcbiAgICAgIGV2ZW50SGFuZGxlcixcbiAgICAgIGV2ZW50TmFtZSxcbiAgICAgIGVtaXR0ZXJSZWFjdFRhZ1xuICAgICk7XG4gIH1cblxuICB1bnJlZ2lzdGVyRXZlbnRIYW5kbGVyKGlkOiBudW1iZXIpIHtcbiAgICByZXR1cm4gdGhpcy5Jbm5lck5hdGl2ZU1vZHVsZS51bnJlZ2lzdGVyRXZlbnRIYW5kbGVyKGlkKTtcbiAgfVxuXG4gIGdldFZpZXdQcm9wPFQ+KFxuICAgIHZpZXdUYWc6IG51bWJlcixcbiAgICBwcm9wTmFtZTogc3RyaW5nLFxuICAgIGNvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50IHwgdW5kZWZpbmVkLCAvLyByZXF1aXJlZCBvbiBGYWJyaWNcbiAgICBjYWxsYmFjaz86IChyZXN1bHQ6IFQpID0+IHZvaWRcbiAgKSB7XG4gICAgbGV0IHNoYWRvd05vZGVXcmFwcGVyO1xuICAgIGlmIChpc0ZhYnJpYygpKSB7XG4gICAgICBzaGFkb3dOb2RlV3JhcHBlciA9IGdldFNoYWRvd05vZGVXcmFwcGVyRnJvbVJlZihcbiAgICAgICAgY29tcG9uZW50IGFzIFJlYWN0LkNvbXBvbmVudFxuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzLklubmVyTmF0aXZlTW9kdWxlLmdldFZpZXdQcm9wKFxuICAgICAgICBzaGFkb3dOb2RlV3JhcHBlcixcbiAgICAgICAgcHJvcE5hbWUsXG4gICAgICAgIGNhbGxiYWNrXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLklubmVyTmF0aXZlTW9kdWxlLmdldFZpZXdQcm9wKHZpZXdUYWcsIHByb3BOYW1lLCBjYWxsYmFjayk7XG4gIH1cblxuICBjb25maWd1cmVMYXlvdXRBbmltYXRpb25CYXRjaChcbiAgICBsYXlvdXRBbmltYXRpb25zQmF0Y2g6IExheW91dEFuaW1hdGlvbkJhdGNoSXRlbVtdXG4gICkge1xuICAgIHRoaXMuSW5uZXJOYXRpdmVNb2R1bGUuY29uZmlndXJlTGF5b3V0QW5pbWF0aW9uQmF0Y2gobGF5b3V0QW5pbWF0aW9uc0JhdGNoKTtcbiAgfVxuXG4gIHNldFNob3VsZEFuaW1hdGVFeGl0aW5nRm9yVGFnKHZpZXdUYWc6IG51bWJlciwgc2hvdWxkQW5pbWF0ZTogYm9vbGVhbikge1xuICAgIHRoaXMuSW5uZXJOYXRpdmVNb2R1bGUuc2V0U2hvdWxkQW5pbWF0ZUV4aXRpbmdGb3JUYWcoXG4gICAgICB2aWV3VGFnLFxuICAgICAgc2hvdWxkQW5pbWF0ZVxuICAgICk7XG4gIH1cblxuICBlbmFibGVMYXlvdXRBbmltYXRpb25zKGZsYWc6IGJvb2xlYW4pIHtcbiAgICB0aGlzLklubmVyTmF0aXZlTW9kdWxlLmVuYWJsZUxheW91dEFuaW1hdGlvbnMoZmxhZyk7XG4gIH1cblxuICBjb25maWd1cmVQcm9wcyh1aVByb3BzOiBzdHJpbmdbXSwgbmF0aXZlUHJvcHM6IHN0cmluZ1tdKSB7XG4gICAgdGhpcy5Jbm5lck5hdGl2ZU1vZHVsZS5jb25maWd1cmVQcm9wcyh1aVByb3BzLCBuYXRpdmVQcm9wcyk7XG4gIH1cblxuICBzdWJzY3JpYmVGb3JLZXlib2FyZEV2ZW50cyhcbiAgICBoYW5kbGVyOiBTaGFyZWFibGVSZWY8bnVtYmVyPixcbiAgICBpc1N0YXR1c0JhclRyYW5zbHVjZW50OiBib29sZWFuXG4gICkge1xuICAgIHJldHVybiB0aGlzLklubmVyTmF0aXZlTW9kdWxlLnN1YnNjcmliZUZvcktleWJvYXJkRXZlbnRzKFxuICAgICAgaGFuZGxlcixcbiAgICAgIGlzU3RhdHVzQmFyVHJhbnNsdWNlbnRcbiAgICApO1xuICB9XG5cbiAgdW5zdWJzY3JpYmVGcm9tS2V5Ym9hcmRFdmVudHMobGlzdGVuZXJJZDogbnVtYmVyKSB7XG4gICAgdGhpcy5Jbm5lck5hdGl2ZU1vZHVsZS51bnN1YnNjcmliZUZyb21LZXlib2FyZEV2ZW50cyhsaXN0ZW5lcklkKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUFBLElBQUFBLHNCQUFBLEdBQUFDLE9BQUE7QUFBQUMsTUFBQSxDQUFBQyxjQUFBLENBQUFDLE9BQUE7RUFBQUMsS0FBQTtBQUFBO0FBQUFELE9BQUEsQ0FBQUUsZ0JBQUE7QUFBQSxJQUFBQyxnQkFBQSxHQUFBUCxzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQU8sYUFBQSxHQUFBUixzQkFBQSxDQUFBQyxPQUFBO0FBT1osSUFBQVEsZ0JBQUEsR0FBQVIsT0FBQTtBQUNBLElBQUFTLFVBQUEsR0FBQVQsT0FBQTtBQUVBLElBQUFVLGNBQUEsR0FBQVYsT0FBQTtBQUNBLElBQUFXLGdCQUFBLEdBQUFYLE9BQUE7QUFFQSxJQUFBWSxZQUFBLEdBQUFaLE9BQUE7QUFFQSxJQUFBYSx1QkFBQSxHQUFBZCxzQkFBQSxDQUFBQyxPQUFBO0FBZmEsU0FBQWMsZ0JBQUFDLEdBQUEsRUFBQUMsR0FBQSxFQUFBWixLQUFBO0VBQUFZLEdBQUEsR0FBQUMsY0FBQSxDQUFBRCxHQUFBO0VB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