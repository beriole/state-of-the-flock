{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","NativeReanimated","_classCallCheck2","_createClass2","_checkCppVersion","_jsVersion","_valueUnpacker","_PlatformChecker","_fabricUtils","_NativeReanimatedModule","_defineProperty","obj","key","_toPropertyKey","enumerable","configurable","writable","t","i","_toPrimitive","r","e","Symbol","toPrimitive","call","TypeError","String","Number","assertSingleReanimatedInstance","global","_REANIMATED_VERSION_JS","undefined","jsVersion","Error","default","__DEV__","__reanimatedModuleProxy","valueUnpackerCode","getValueUnpackerCode","ReanimatedModule","installTurboModule","checkCppVersion","InnerNativeModule","makeShareableClone","shouldPersistRemote","nativeStateSource","scheduleOnUI","shareable","executeOnUIRuntimeSync","createWorkletRuntime","name","initializer","scheduleOnRuntime","workletRuntime","shareableWorklet","registerSensor","sensorType","interval","iosReferenceFrame","handler","unregisterSensor","sensorId","registerEventHandler","eventHandler","eventName","emitterReactTag","unregisterEventHandler","id","getViewProp","viewTag","propName","component","callback","shadowNodeWrapper","isFabric","getShadowNodeWrapperFromRef","configureLayoutAnimationBatch","layoutAnimationsBatch","setShouldAnimateExitingForTag","shouldAnimate","enableLayoutAnimations","flag","configureProps","uiProps","nativeProps","subscribeForKeyboardEvents","isStatusBarTranslucent","unsubscribeFromKeyboardEvents","listenerId"],"sources":["NativeReanimated.ts"],"sourcesContent":["'use strict';\nimport type {\n  ShadowNodeWrapper,\n  Value3D,\n  ValueRotation,\n  ShareableRef,\n} from '../commonTypes';\nimport { checkCppVersion } from '../platform-specific/checkCppVersion';\nimport { jsVersion } from '../platform-specific/jsVersion';\nimport type { WorkletRuntime } from '../runtimes';\nimport { getValueUnpackerCode } from '../valueUnpacker';\nimport { isFabric } from '../PlatformChecker';\nimport type React from 'react';\nimport { getShadowNodeWrapperFromRef } from '../fabricUtils';\nimport type { LayoutAnimationBatchItem } from '../layoutReanimation/animationBuilder/commonTypes';\nimport ReanimatedModule from '../specs/NativeReanimatedModule';\n\n// this is the type of `__reanimatedModuleProxy` which is injected using JSI\nexport interface NativeReanimatedModule {\n  makeShareableClone<T>(\n    value: T,\n    shouldPersistRemote: boolean,\n    nativeStateSource?: object\n  ): ShareableRef<T>;\n  scheduleOnUI<T>(shareable: ShareableRef<T>): void;\n  executeOnUIRuntimeSync<T, R>(shareable: ShareableRef<T>): R;\n  createWorkletRuntime(\n    name: string,\n    initializer: ShareableRef<() => void>\n  ): WorkletRuntime;\n  scheduleOnRuntime<T>(\n    workletRuntime: WorkletRuntime,\n    worklet: ShareableRef<T>\n  ): void;\n  registerEventHandler<T>(\n    eventHandler: ShareableRef<T>,\n    eventName: string,\n    emitterReactTag: number\n  ): number;\n  unregisterEventHandler(id: number): void;\n  getViewProp<T>(\n    viewTagOrShadowNodeWrapper: number | ShadowNodeWrapper,\n    propName: string,\n    callback?: (result: T) => void\n  ): Promise<T>;\n  enableLayoutAnimations(flag: boolean): void;\n  registerSensor(\n    sensorType: number,\n    interval: number,\n    iosReferenceFrame: number,\n    handler: ShareableRef<(data: Value3D | ValueRotation) => void>\n  ): number;\n  unregisterSensor(sensorId: number): void;\n  configureProps(uiProps: string[], nativeProps: string[]): void;\n  subscribeForKeyboardEvents(\n    handler: ShareableRef<number>,\n    isStatusBarTranslucent: boolean\n  ): number;\n  unsubscribeFromKeyboardEvents(listenerId: number): void;\n  configureLayoutAnimationBatch(\n    layoutAnimationsBatch: LayoutAnimationBatchItem[]\n  ): void;\n  setShouldAnimateExitingForTag(viewTag: number, shouldAnimate: boolean): void;\n}\n\nfunction assertSingleReanimatedInstance() {\n  if (\n    global._REANIMATED_VERSION_JS !== undefined &&\n    global._REANIMATED_VERSION_JS !== jsVersion\n  ) {\n    throw new Error(\n      `[Reanimated] Another instance of Reanimated was detected.\nSee \\`https://docs.swmansion.com/react-native-reanimated/docs/guides/troubleshooting#another-instance-of-reanimated-was-detected\\` for more details. Previous: ${global._REANIMATED_VERSION_JS}, current: ${jsVersion}.`\n    );\n  }\n}\n\nexport class NativeReanimated {\n  private InnerNativeModule: NativeReanimatedModule;\n\n  constructor() {\n    // These checks have to split since version checking depend on the execution order\n    if (__DEV__) {\n      assertSingleReanimatedInstance();\n    }\n    global._REANIMATED_VERSION_JS = jsVersion;\n    if (global.__reanimatedModuleProxy === undefined) {\n      const valueUnpackerCode = getValueUnpackerCode();\n      ReanimatedModule?.installTurboModule(valueUnpackerCode);\n    }\n    if (global.__reanimatedModuleProxy === undefined) {\n      throw new Error(\n        `[Reanimated] Native part of Reanimated doesn't seem to be initialized.\nSee https://docs.swmansion.com/react-native-reanimated/docs/guides/troubleshooting#native-part-of-reanimated-doesnt-seem-to-be-initialized for more details.`\n      );\n    }\n    if (__DEV__) {\n      checkCppVersion();\n    }\n    this.InnerNativeModule = global.__reanimatedModuleProxy;\n  }\n\n  makeShareableClone<T>(\n    value: T,\n    shouldPersistRemote: boolean,\n    nativeStateSource?: object\n  ) {\n    return this.InnerNativeModule.makeShareableClone(\n      value,\n      shouldPersistRemote,\n      nativeStateSource\n    );\n  }\n\n  scheduleOnUI<T>(shareable: ShareableRef<T>) {\n    return this.InnerNativeModule.scheduleOnUI(shareable);\n  }\n\n  executeOnUIRuntimeSync<T, R>(shareable: ShareableRef<T>): R {\n    return this.InnerNativeModule.executeOnUIRuntimeSync(shareable);\n  }\n\n  createWorkletRuntime(name: string, initializer: ShareableRef<() => void>) {\n    return this.InnerNativeModule.createWorkletRuntime(name, initializer);\n  }\n\n  scheduleOnRuntime<T>(\n    workletRuntime: WorkletRuntime,\n    shareableWorklet: ShareableRef<T>\n  ) {\n    return this.InnerNativeModule.scheduleOnRuntime(\n      workletRuntime,\n      shareableWorklet\n    );\n  }\n\n  registerSensor(\n    sensorType: number,\n    interval: number,\n    iosReferenceFrame: number,\n    handler: ShareableRef<(data: Value3D | ValueRotation) => void>\n  ) {\n    return this.InnerNativeModule.registerSensor(\n      sensorType,\n      interval,\n      iosReferenceFrame,\n      handler\n    );\n  }\n\n  unregisterSensor(sensorId: number) {\n    return this.InnerNativeModule.unregisterSensor(sensorId);\n  }\n\n  registerEventHandler<T>(\n    eventHandler: ShareableRef<T>,\n    eventName: string,\n    emitterReactTag: number\n  ) {\n    return this.InnerNativeModule.registerEventHandler(\n      eventHandler,\n      eventName,\n      emitterReactTag\n    );\n  }\n\n  unregisterEventHandler(id: number) {\n    return this.InnerNativeModule.unregisterEventHandler(id);\n  }\n\n  getViewProp<T>(\n    viewTag: number,\n    propName: string,\n    component: React.Component | undefined, // required on Fabric\n    callback?: (result: T) => void\n  ) {\n    let shadowNodeWrapper;\n    if (isFabric()) {\n      shadowNodeWrapper = getShadowNodeWrapperFromRef(\n        component as React.Component\n      );\n      return this.InnerNativeModule.getViewProp(\n        shadowNodeWrapper,\n        propName,\n        callback\n      );\n    }\n\n    return this.InnerNativeModule.getViewProp(viewTag, propName, callback);\n  }\n\n  configureLayoutAnimationBatch(\n    layoutAnimationsBatch: LayoutAnimationBatchItem[]\n  ) {\n    this.InnerNativeModule.configureLayoutAnimationBatch(layoutAnimationsBatch);\n  }\n\n  setShouldAnimateExitingForTag(viewTag: number, shouldAnimate: boolean) {\n    this.InnerNativeModule.setShouldAnimateExitingForTag(\n      viewTag,\n      shouldAnimate\n    );\n  }\n\n  enableLayoutAnimations(flag: boolean) {\n    this.InnerNativeModule.enableLayoutAnimations(flag);\n  }\n\n  configureProps(uiProps: string[], nativeProps: string[]) {\n    this.InnerNativeModule.configureProps(uiProps, nativeProps);\n  }\n\n  subscribeForKeyboardEvents(\n    handler: ShareableRef<number>,\n    isStatusBarTranslucent: boolean\n  ) {\n    return this.InnerNativeModule.subscribeForKeyboardEvents(\n      handler,\n      isStatusBarTranslucent\n    );\n  }\n\n  unsubscribeFromKeyboardEvents(listenerId: number) {\n    this.InnerNativeModule.unsubscribeFromKeyboardEvents(listenerId);\n  }\n}\n"],"mappings":"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","ignoreList":[]}