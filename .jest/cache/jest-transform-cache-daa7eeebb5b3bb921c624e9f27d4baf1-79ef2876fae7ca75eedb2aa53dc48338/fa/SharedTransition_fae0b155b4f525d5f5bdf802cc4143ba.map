{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","SharedTransition","_classCallCheck2","_createClass2","_animation","_commonTypes","_commonTypes2","_ProgressTransitionManager","_UpdateLayoutAnimations","_util","_defineProperty","obj","key","_toPropertyKey","enumerable","configurable","writable","t","i","_toPrimitive","r","e","Symbol","toPrimitive","call","TypeError","String","Number","SUPPORTED_PROPS","default","ReduceMotion","System","undefined","custom","customAnimationFactory","_customAnimationFactory","progressAnimation","progressAnimationCallback","_customProgressAnimation","viewTag","values","progress","newStyles","global","_notifyAboutProgress","duration","_transitionDuration","reduceMotion","_reduceMotion","defaultTransitionType","transitionType","_defaultTransitionType","registerTransition","sharedTransitionTag","isUnmounting","arguments","length","getReduceMotionFromConfig","getReduceMotion","transitionAnimation","getTransitionAnimation","getProgressAnimation","SharedTransitionType","ANIMATION","PROGRESS_ANIMATION","layoutAnimationType","LayoutAnimationType","SHARED_ELEMENT_TRANSITION","SHARED_ELEMENT_TRANSITION_PROGRESS","updateLayoutAnimations","_progressTransitionManager","addProgressAnimation","unregisterTransition","removeProgressAnimation","buildAnimation","_progressAnimation","buildProgressAnimation","animationFactory","transitionDuration","animations","initialValues","includes","Error","propName","matrix","targetTransformMatrix","transformMatrix","withTiming","capitalizedPropName","charAt","toUpperCase","slice","keyToTargetValue","currentTransformMatrix","keyToCurrentValue","propertyName","currentMatrix","targetMatrix","newMatrix","Array","PropertyName","currentPropertyName","targetPropertyName","currentValue","targetValue","ProgressTransitionManager"],"sources":["SharedTransition.ts"],"sourcesContent":["'use strict';\nimport { withTiming } from '../../animation';\nimport type {\n  SharedTransitionAnimationsFunction,\n  SharedTransitionAnimationsValues,\n  CustomProgressAnimation,\n  ProgressAnimation,\n  LayoutAnimationsOptions,\n} from '../animationBuilder/commonTypes';\nimport {\n  LayoutAnimationType,\n  SharedTransitionType,\n} from '../animationBuilder/commonTypes';\nimport type { StyleProps } from '../../commonTypes';\nimport { ReduceMotion } from '../../commonTypes';\nimport { ProgressTransitionManager } from './ProgressTransitionManager';\nimport { updateLayoutAnimations } from '../../UpdateLayoutAnimations';\nimport { getReduceMotionFromConfig } from '../../animation/util';\n\nconst SUPPORTED_PROPS = [\n  'width',\n  'height',\n  'originX',\n  'originY',\n  'transform',\n  'borderRadius',\n  'borderTopLeftRadius',\n  'borderTopRightRadius',\n  'borderBottomLeftRadius',\n  'borderBottomRightRadius',\n] as const;\n\ntype AnimationFactory = (\n  values: SharedTransitionAnimationsValues\n) => StyleProps;\n\n/**\n * A SharedTransition builder class.\n *\n * @see https://docs.swmansion.com/react-native-reanimated/docs/shared-element-transitions/overview\n * @experimental\n */\nexport class SharedTransition {\n  private _customAnimationFactory: AnimationFactory | null = null;\n  private _animation: SharedTransitionAnimationsFunction | null = null;\n  private _transitionDuration = 500;\n  private _reduceMotion: ReduceMotion = ReduceMotion.System;\n  private _customProgressAnimation?: ProgressAnimation = undefined;\n  private _progressAnimation?: ProgressAnimation = undefined;\n  private _defaultTransitionType?: SharedTransitionType = undefined;\n  private static _progressTransitionManager = new ProgressTransitionManager();\n\n  public custom(customAnimationFactory: AnimationFactory): SharedTransition {\n    this._customAnimationFactory = customAnimationFactory;\n    return this;\n  }\n\n  public progressAnimation(\n    progressAnimationCallback: CustomProgressAnimation\n  ): SharedTransition {\n    this._customProgressAnimation = (viewTag, values, progress) => {\n      'worklet';\n      const newStyles = progressAnimationCallback(values, progress);\n      global._notifyAboutProgress(viewTag, newStyles, true);\n    };\n    return this;\n  }\n\n  public duration(duration: number): SharedTransition {\n    this._transitionDuration = duration;\n    return this;\n  }\n\n  public reduceMotion(_reduceMotion: ReduceMotion): this {\n    this._reduceMotion = _reduceMotion;\n    return this;\n  }\n\n  public defaultTransitionType(\n    transitionType: SharedTransitionType\n  ): SharedTransition {\n    this._defaultTransitionType = transitionType;\n    return this;\n  }\n\n  public registerTransition(\n    viewTag: number,\n    sharedTransitionTag: string,\n    isUnmounting = false\n  ) {\n    if (getReduceMotionFromConfig(this.getReduceMotion())) {\n      return;\n    }\n\n    const transitionAnimation = this.getTransitionAnimation();\n    const progressAnimation = this.getProgressAnimation();\n    if (!this._defaultTransitionType) {\n      if (this._customAnimationFactory && !this._customProgressAnimation) {\n        this._defaultTransitionType = SharedTransitionType.ANIMATION;\n      } else {\n        this._defaultTransitionType = SharedTransitionType.PROGRESS_ANIMATION;\n      }\n    }\n    const layoutAnimationType =\n      this._defaultTransitionType === SharedTransitionType.ANIMATION\n        ? LayoutAnimationType.SHARED_ELEMENT_TRANSITION\n        : LayoutAnimationType.SHARED_ELEMENT_TRANSITION_PROGRESS;\n    updateLayoutAnimations(\n      viewTag,\n      layoutAnimationType,\n      transitionAnimation,\n      sharedTransitionTag,\n      isUnmounting\n    );\n    SharedTransition._progressTransitionManager.addProgressAnimation(\n      viewTag,\n      progressAnimation\n    );\n  }\n\n  public unregisterTransition(viewTag: number, isUnmounting = false): void {\n    const layoutAnimationType =\n      this._defaultTransitionType === SharedTransitionType.ANIMATION\n        ? LayoutAnimationType.SHARED_ELEMENT_TRANSITION\n        : LayoutAnimationType.SHARED_ELEMENT_TRANSITION_PROGRESS;\n    updateLayoutAnimations(\n      viewTag,\n      layoutAnimationType,\n      undefined,\n      undefined,\n      isUnmounting\n    );\n    SharedTransition._progressTransitionManager.removeProgressAnimation(\n      viewTag,\n      isUnmounting\n    );\n  }\n\n  public getReduceMotion(): ReduceMotion {\n    return this._reduceMotion;\n  }\n\n  private getTransitionAnimation(): SharedTransitionAnimationsFunction {\n    if (!this._animation) {\n      this.buildAnimation();\n    }\n    return this._animation!;\n  }\n\n  private getProgressAnimation(): ProgressAnimation {\n    if (!this._progressAnimation) {\n      this.buildProgressAnimation();\n    }\n    return this._progressAnimation!;\n  }\n\n  private buildAnimation() {\n    const animationFactory = this._customAnimationFactory;\n    const transitionDuration = this._transitionDuration;\n    const reduceMotion = this._reduceMotion;\n    this._animation = (values: SharedTransitionAnimationsValues) => {\n      'worklet';\n      let animations: {\n        [key: string]: unknown;\n      } = {};\n      const initialValues: {\n        [key: string]: unknown;\n      } = {};\n\n      if (animationFactory) {\n        animations = animationFactory(values);\n        for (const key in animations) {\n          if (!(SUPPORTED_PROPS as readonly string[]).includes(key)) {\n            throw new Error(\n              `[Reanimated] The prop '${key}' is not supported yet.`\n            );\n          }\n        }\n      } else {\n        for (const propName of SUPPORTED_PROPS) {\n          if (propName === 'transform') {\n            const matrix = values.targetTransformMatrix;\n            animations.transformMatrix = withTiming(matrix, {\n              reduceMotion,\n              duration: transitionDuration,\n            });\n          } else {\n            const capitalizedPropName = `${propName\n              .charAt(0)\n              .toUpperCase()}${propName.slice(\n              1\n            )}` as Capitalize<LayoutAnimationsOptions>;\n            const keyToTargetValue = `target${capitalizedPropName}` as const;\n            animations[propName] = withTiming(values[keyToTargetValue], {\n              reduceMotion,\n              duration: transitionDuration,\n            });\n          }\n        }\n      }\n\n      for (const propName in animations) {\n        if (propName === 'transform') {\n          initialValues.transformMatrix = values.currentTransformMatrix;\n        } else {\n          const capitalizedPropName = (propName.charAt(0).toUpperCase() +\n            propName.slice(1)) as Capitalize<LayoutAnimationsOptions>;\n          const keyToCurrentValue = `current${capitalizedPropName}` as const;\n          initialValues[propName] = values[keyToCurrentValue];\n        }\n      }\n\n      return { initialValues, animations };\n    };\n  }\n\n  private buildProgressAnimation() {\n    if (this._customProgressAnimation) {\n      this._progressAnimation = this._customProgressAnimation;\n      return;\n    }\n    this._progressAnimation = (viewTag, values, progress) => {\n      'worklet';\n      const newStyles: { [key: string]: number | number[] } = {};\n      for (const propertyName of SUPPORTED_PROPS) {\n        if (propertyName === 'transform') {\n          // this is not the perfect solution, but at this moment it just interpolates the whole\n          // matrix instead of interpolating scale, translate, rotate, etc. separately\n          const currentMatrix = values.currentTransformMatrix;\n          const targetMatrix = values.targetTransformMatrix;\n          const newMatrix = new Array(9);\n          for (let i = 0; i < 9; i++) {\n            newMatrix[i] =\n              progress * (targetMatrix[i] - currentMatrix[i]) +\n              currentMatrix[i];\n          }\n          newStyles.transformMatrix = newMatrix;\n        } else {\n          // PropertyName == propertyName with capitalized fist letter, (width -> Width)\n          const PropertyName = (propertyName.charAt(0).toUpperCase() +\n            propertyName.slice(1)) as Capitalize<LayoutAnimationsOptions>;\n          const currentPropertyName = `current${PropertyName}` as const;\n          const targetPropertyName = `target${PropertyName}` as const;\n\n          const currentValue = values[currentPropertyName];\n          const targetValue = values[targetPropertyName];\n\n          newStyles[propertyName] =\n            progress * (targetValue - currentValue) + currentValue;\n        }\n      }\n      global._notifyAboutProgress(viewTag, newStyles, true);\n    };\n  }\n\n  // static builder methods i.e. shared transition modifiers\n\n  /**\n   * Lets you create a custom shared transition animation. Other shared transition modifiers can be chained alongside this modifier.\n   *\n   * @param customAnimationFactory - Callback function that have to return an object with styles for the custom shared transition.\n   * @returns A {@link SharedTransition} object. Styles returned from this function need to be to the `sharedTransitionStyle` prop.\n   * @see https://docs.swmansion.com/react-native-reanimated/docs/shared-element-transitions/overview\n   * @experimental\n   */\n  public static custom(\n    customAnimationFactory: AnimationFactory\n  ): SharedTransition {\n    return new SharedTransition().custom(customAnimationFactory);\n  }\n\n  /**\n   * Lets you change the duration of the shared transition. Other shared transition modifiers can be chained alongside this modifier.\n   *\n   * @param duration - The duration of the shared transition animation in milliseconds.\n   * @see https://docs.swmansion.com/react-native-reanimated/docs/shared-element-transitions/overview\n   * @experimental\n   */\n  public static duration(duration: number): SharedTransition {\n    return new SharedTransition().duration(duration);\n  }\n\n  /**\n   * Lets you create a shared transition animation bound to the progress between navigation screens. Other shared transition modifiers can be chained alongside this modifier.\n   *\n   * @param progressAnimationCallback - A callback called with the current progress value on every animation frame. It should return an object with styles for the shared transition.\n   * @see https://docs.swmansion.com/react-native-reanimated/docs/shared-element-transitions/overview\n   * @experimental\n   */\n  public static progressAnimation(\n    progressAnimationCallback: CustomProgressAnimation\n  ): SharedTransition {\n    return new SharedTransition().progressAnimation(progressAnimationCallback);\n  }\n\n  /**\n   * Whether the transition is progress-bound or not. Other shared transition modifiers can be chained alongside this modifier.\n   *\n   * @param transitionType - Type of the transition. Configured with {@link SharedTransitionType} enum.\n   * @see https://docs.swmansion.com/react-native-reanimated/docs/shared-element-transitions/overview\n   * @experimental\n   */\n  public static defaultTransitionType(\n    transitionType: SharedTransitionType\n  ): SharedTransition {\n    return new SharedTransition().defaultTransitionType(transitionType);\n  }\n\n  /**\n   * Lets you adjust the behavior when the device's reduced motion accessibility setting is turned on. Other shared transition modifiers can be chained alongside this modifier.\n   *\n   * @param reduceMotion - Determines how the animation responds to the device's reduced motion accessibility setting. Default to `ReduceMotion.System` - {@link ReduceMotion}.\n   * @see https://docs.swmansion.com/react-native-reanimated/docs/shared-element-transitions/overview\n   * @experimental\n   */\n  public static reduceMotion(reduceMotion: ReduceMotion): SharedTransition {\n    return new SharedTransition().reduceMotion(reduceMotion);\n  }\n}\n"],"mappings":"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","ignoreList":[]}