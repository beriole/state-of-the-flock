8a0b3147c61de48f47b7a6953cc6d6d3
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useComposedEventHandler = useComposedEventHandler;
var _useEvent = require("./useEvent");
var _useHandler2 = require("./useHandler");
var _WorkletEventHandler = require("../WorkletEventHandler");
function useComposedEventHandler(handlers) {
  var workletsRecord = {};
  var composedEventNames = new Set();
  var workletsMap = {};
  handlers.filter(function (h) {
    return h !== null;
  }).forEach(function (handler) {
    var workletEventHandler = handler.workletEventHandler;
    if (workletEventHandler instanceof _WorkletEventHandler.WorkletEventHandler) {
      workletEventHandler.eventNames.forEach(function (eventName) {
        composedEventNames.add(eventName);
        if (workletsMap[eventName]) {
          workletsMap[eventName].push(workletEventHandler.worklet);
        } else {
          workletsMap[eventName] = [workletEventHandler.worklet];
        }
        var handlerName = eventName + `${workletsMap[eventName].length}`;
        workletsRecord[handlerName] = workletEventHandler.worklet;
      });
    }
  });
  var _useHandler = (0, _useHandler2.useHandler)(workletsRecord),
    doDependenciesDiffer = _useHandler.doDependenciesDiffer;
  return (0, _useEvent.useEvent)(function (event) {
    'worklet';

    if (workletsMap[event.eventName]) {
      workletsMap[event.eventName].forEach(function (worklet) {
        return worklet(event);
      });
    }
  }, Array.from(composedEventNames), doDependenciesDiffer);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInVzZUNvbXBvc2VkRXZlbnRIYW5kbGVyIiwiX3VzZUV2ZW50IiwicmVxdWlyZSIsIl91c2VIYW5kbGVyMiIsIl9Xb3JrbGV0RXZlbnRIYW5kbGVyIiwiaGFuZGxlcnMiLCJ3b3JrbGV0c1JlY29yZCIsImNvbXBvc2VkRXZlbnROYW1lcyIsIlNldCIsIndvcmtsZXRzTWFwIiwiZmlsdGVyIiwiaCIsImZvckVhY2giLCJoYW5kbGVyIiwid29ya2xldEV2ZW50SGFuZGxlciIsIldvcmtsZXRFdmVudEhhbmRsZXIiLCJldmVudE5hbWVzIiwiZXZlbnROYW1lIiwiYWRkIiwicHVzaCIsIndvcmtsZXQiLCJoYW5kbGVyTmFtZSIsImxlbmd0aCIsIl91c2VIYW5kbGVyIiwidXNlSGFuZGxlciIsImRvRGVwZW5kZW5jaWVzRGlmZmVyIiwidXNlRXZlbnQiLCJldmVudCIsIkFycmF5IiwiZnJvbSJdLCJzb3VyY2VzIjpbInVzZUNvbXBvc2VkRXZlbnRIYW5kbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbmltcG9ydCB7IHVzZUV2ZW50IH0gZnJvbSAnLi91c2VFdmVudCc7XG5pbXBvcnQgeyB1c2VIYW5kbGVyIH0gZnJvbSAnLi91c2VIYW5kbGVyJztcbmltcG9ydCB7IFdvcmtsZXRFdmVudEhhbmRsZXIgfSBmcm9tICcuLi9Xb3JrbGV0RXZlbnRIYW5kbGVyJztcbmltcG9ydCB0eXBlIHsgUmVhbmltYXRlZEV2ZW50IH0gZnJvbSAnLi9jb21tb25UeXBlcyc7XG5pbXBvcnQgdHlwZSB7IFdvcmtsZXRGdW5jdGlvbiB9IGZyb20gJy4uL2NvbW1vblR5cGVzJztcbmltcG9ydCB0eXBlIHsgRXZlbnRIYW5kbGVyUHJvY2Vzc2VkLCBFdmVudEhhbmRsZXJJbnRlcm5hbCB9IGZyb20gJy4vdXNlRXZlbnQnO1xuXG50eXBlIENvbXBvc2VkSGFuZGxlclByb2Nlc3NlZDxcbiAgRXZlbnQgZXh0ZW5kcyBvYmplY3QsXG4gIENvbnRleHQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4+ID0gRXZlbnRIYW5kbGVyUHJvY2Vzc2VkPEV2ZW50LCBDb250ZXh0PjtcblxudHlwZSBDb21wb3NlZEhhbmRsZXJJbnRlcm5hbDxFdmVudCBleHRlbmRzIG9iamVjdD4gPVxuICBFdmVudEhhbmRsZXJJbnRlcm5hbDxFdmVudD47XG5cbi8qKlxuICogTGV0cyB5b3UgY29tcG9zZSBtdWx0aXBsZSBldmVudCBoYW5kbGVycyBiYXNlZCBvbiBbdXNlRXZlbnRdKGh0dHBzOi8vZG9jcy5zd21hbnNpb24uY29tL3JlYWN0LW5hdGl2ZS1yZWFuaW1hdGVkL2RvY3MvYWR2YW5jZWQvdXNlRXZlbnQpIGhvb2suXG4gKlxuICogQHBhcmFtIGhhbmRsZXJzIC0gQW4gYXJyYXkgb2YgZXZlbnQgaGFuZGxlcnMgY3JlYXRlZCB1c2luZyBbdXNlRXZlbnRdKGh0dHBzOi8vZG9jcy5zd21hbnNpb24uY29tL3JlYWN0LW5hdGl2ZS1yZWFuaW1hdGVkL2RvY3MvYWR2YW5jZWQvdXNlRXZlbnQpIGhvb2suXG4gKiBAcmV0dXJucyBBbiBvYmplY3QgeW91IG5lZWQgdG8gcGFzcyB0byBhIGNvcmVzcG9uZGluZyBcIm9uRXZlbnRcIiBwcm9wIG9uIGFuIGBBbmltYXRlZGAgY29tcG9uZW50IChmb3IgZXhhbXBsZSBoYW5kbGVycyByZXNwb25zaWJsZSBmb3IgYG9uU2Nyb2xsYCBldmVudCBnbyB0byBgb25TY3JvbGxgIHByb3ApLlxuICogQHNlZSBodHRwczovL2RvY3Muc3dtYW5zaW9uLmNvbS9yZWFjdC1uYXRpdmUtcmVhbmltYXRlZC9kb2NzL2FkdmFuY2VkL3VzZUNvbXBvc2VkRXZlbnRIYW5kbGVyXG4gKi9cbi8vIEB0cy1leHBlY3QtZXJyb3IgVGhpcyBvdmVybG9hZCBpcyByZXF1aXJlZCBieSBvdXIgQVBJLlxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvbXBvc2VkRXZlbnRIYW5kbGVyPFxuICBFdmVudCBleHRlbmRzIG9iamVjdCxcbiAgQ29udGV4dCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4+KFxuICBoYW5kbGVyczogKEV2ZW50SGFuZGxlclByb2Nlc3NlZDxFdmVudCwgQ29udGV4dD4gfCBudWxsKVtdXG4pOiBDb21wb3NlZEhhbmRsZXJQcm9jZXNzZWQ8RXZlbnQsIENvbnRleHQ+O1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlQ29tcG9zZWRFdmVudEhhbmRsZXI8XG4gIEV2ZW50IGV4dGVuZHMgb2JqZWN0LFxuICBDb250ZXh0IGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbj4oaGFuZGxlcnM6IChFdmVudEhhbmRsZXJQcm9jZXNzZWQ8RXZlbnQsIENvbnRleHQ+IHwgbnVsbClbXSkge1xuICAvLyBSZWNvcmQgb2YgaGFuZGxlcnMnIHdvcmtsZXRzIHRvIGNhbGN1bGF0ZSBkZXBzIGRpZmZzLiBXZSB1c2UgdGhlIHJlY29yZCB0eXBlIHRvIG1hdGNoIHRoZSB1c2VIYW5kbGVyIEFQSSByZXF1aXJlbWVudHNcbiAgY29uc3Qgd29ya2xldHNSZWNvcmQ6IFJlY29yZDxzdHJpbmcsIFdvcmtsZXRGdW5jdGlvbj4gPSB7fTtcbiAgLy8gU3VtbWVkIGV2ZW50IG5hbWVzIGZvciByZWdpc3RyYXRpb25cbiAgY29uc3QgY29tcG9zZWRFdmVudE5hbWVzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIC8vIE1hcCB0aGF0IGhvbGRzIHdvcmtsZXRzIGZvciBzcGVjaWZpYyBoYW5kbGVkIGV2ZW50c1xuICBjb25zdCB3b3JrbGV0c01hcDoge1xuICAgIFtrZXk6IHN0cmluZ106ICgoZXZlbnQ6IFJlYW5pbWF0ZWRFdmVudDxFdmVudD4pID0+IHZvaWQpW107XG4gIH0gPSB7fTtcblxuICBoYW5kbGVyc1xuICAgIC5maWx0ZXIoKGgpID0+IGggIT09IG51bGwpXG4gICAgLmZvckVhY2goKGhhbmRsZXIpID0+IHtcbiAgICAgIC8vIEV2ZW50SGFuZGxlclByb2Nlc3NlZCBpcyB0aGUgcmV0dXJuIHR5cGUgb2YgdXNlRXZlbnQgYW5kIGhhcyB0byBiZSBmb3JjZSBjYXN0ZWQgdG8gRXZlbnRIYW5kbGVySW50ZXJuYWwsIGJlY2F1c2Ugd2UgbmVlZCBXb3JrbGV0RXZlbnRIYW5kbGVyIG9iamVjdFxuICAgICAgY29uc3QgeyB3b3JrbGV0RXZlbnRIYW5kbGVyIH0gPVxuICAgICAgICBoYW5kbGVyIGFzIHVua25vd24gYXMgRXZlbnRIYW5kbGVySW50ZXJuYWw8Q29udGV4dD47XG4gICAgICBpZiAod29ya2xldEV2ZW50SGFuZGxlciBpbnN0YW5jZW9mIFdvcmtsZXRFdmVudEhhbmRsZXIpIHtcbiAgICAgICAgd29ya2xldEV2ZW50SGFuZGxlci5ldmVudE5hbWVzLmZvckVhY2goKGV2ZW50TmFtZSkgPT4ge1xuICAgICAgICAgIGNvbXBvc2VkRXZlbnROYW1lcy5hZGQoZXZlbnROYW1lKTtcblxuICAgICAgICAgIGlmICh3b3JrbGV0c01hcFtldmVudE5hbWVdKSB7XG4gICAgICAgICAgICB3b3JrbGV0c01hcFtldmVudE5hbWVdLnB1c2god29ya2xldEV2ZW50SGFuZGxlci53b3JrbGV0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd29ya2xldHNNYXBbZXZlbnROYW1lXSA9IFt3b3JrbGV0RXZlbnRIYW5kbGVyLndvcmtsZXRdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGhhbmRsZXJOYW1lID0gZXZlbnROYW1lICsgYCR7d29ya2xldHNNYXBbZXZlbnROYW1lXS5sZW5ndGh9YDtcbiAgICAgICAgICB3b3JrbGV0c1JlY29yZFtoYW5kbGVyTmFtZV0gPVxuICAgICAgICAgICAgd29ya2xldEV2ZW50SGFuZGxlci53b3JrbGV0IGFzIFdvcmtsZXRGdW5jdGlvbjtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgY29uc3QgeyBkb0RlcGVuZGVuY2llc0RpZmZlciB9ID0gdXNlSGFuZGxlcih3b3JrbGV0c1JlY29yZCk7XG5cbiAgcmV0dXJuIHVzZUV2ZW50PEV2ZW50LCBDb250ZXh0PihcbiAgICAoZXZlbnQpID0+IHtcbiAgICAgICd3b3JrbGV0JztcbiAgICAgIGlmICh3b3JrbGV0c01hcFtldmVudC5ldmVudE5hbWVdKSB7XG4gICAgICAgIHdvcmtsZXRzTWFwW2V2ZW50LmV2ZW50TmFtZV0uZm9yRWFjaCgod29ya2xldCkgPT4gd29ya2xldChldmVudCkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgQXJyYXkuZnJvbShjb21wb3NlZEV2ZW50TmFtZXMpLFxuICAgIGRvRGVwZW5kZW5jaWVzRGlmZmVyXG4gICkgYXMgdW5rbm93biBhcyBDb21wb3NlZEhhbmRsZXJJbnRlcm5hbDxFdmVudD47XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQUFBLE1BQUEsQ0FBQUMsY0FBQSxDQUFBQyxPQUFBO0VBQUFDLEtBQUE7QUFBQTtBQUFBRCxPQUFBLENBQUFFLHVCQUFBLEdBQUFBLHVCQUFBO0FBQ1osSUFBQUMsU0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsWUFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsb0JBQUEsR0FBQUYsT0FBQTtBQTRCTyxTQUFTRix1QkFBdUJBLENBR3JDSyxRQUEwRCxFQUFFO0VBRTVELElBQU1DLGNBQStDLEdBQUcsQ0FBQyxDQUFDO0VBRTFELElBQU1DLGtCQUFrQixHQUFHLElBQUlDLEdBQUcsQ0FBUyxDQUFDO0VBRTVDLElBQU1DLFdBRUwsR0FBRyxDQUFDLENBQUM7RUFFTkosUUFBUSxDQUNMSyxNQUFNLENBQUUsVUFBQUMsQ0FBQztJQUFBLE9BQUtBLENBQUMsS0FBSyxJQUFJO0VBQUEsRUFBQyxDQUN6QkMsT0FBTyxDQUFFLFVBQUFDLE9BQU8sRUFBSztJQUVwQixJQUFRQyxtQkFBQSxHQUNORCxPQUFtRCxDQUQ3Q0MsbUJBQUE7SUFFUixJQUFJQSxtQkFBbUIsWUFBWUMsd0NBQW1CLEVBQUU7TUFDdERELG1CQUFtQixDQUFDRSxVQUFVLENBQUNKLE9BQU8sQ0FBRSxVQUFBSyxTQUFTLEVBQUs7UUFDcERWLGtCQUFrQixDQUFDVyxHQUFHLENBQUNELFNBQVMsQ0FBQztRQUVqQyxJQUFJUixXQUFXLENBQUNRLFNBQVMsQ0FBQyxFQUFFO1VBQzFCUixXQUFXLENBQUNRLFNBQVMsQ0FBQyxDQUFDRSxJQUFJLENBQUNMLG1CQUFtQixDQUFDTSxPQUFPLENBQUM7UUFDMUQsQ0FBQyxNQUFNO1VBQ0xYLFdBQVcsQ0FBQ1EsU0FBUyxDQUFDLEdBQUcsQ0FBQ0gsbUJBQW1CLENBQUNNLE9BQU8sQ0FBQztRQUN4RDtRQUVBLElBQU1DLFdBQVcsR0FBR0osU0FBUyxHQUFJLEdBQUVSLFdBQVcsQ0FBQ1EsU0FBUyxDQUFDLENBQUNLLE1BQU8sRUFBQztRQUNsRWhCLGNBQWMsQ0FBQ2UsV0FBVyxDQUFDLEdBQ3pCUCxtQkFBbUIsQ0FBQ00sT0FBMEI7TUFDbEQsQ0FBQyxDQUFDO0lBQ0o7RUFDRixDQUFDLENBQUM7RUFFSixJQUFBRyxXQUFBLEdBQWlDLElBQUFDLHVCQUFVLEVBQUNsQixjQUFjLENBQUM7SUFBbkRtQixvQkFBQSxHQUFBRixXQUFBLENBQUFFLG9CQUFBO0VBRVIsT0FBTyxJQUFBQyxrQkFBUSxFQUNaLFVBQUFDLEtBQUssRUFBSztJQUNULFNBQVM7O0lBQ1QsSUFBSWxCLFdBQVcsQ0FBQ2tCLEtBQUssQ0FBQ1YsU0FBUyxDQUFDLEVBQUU7TUFDaENSLFdBQVcsQ0FBQ2tCLEtBQUssQ0FBQ1YsU0FBUyxDQUFDLENBQUNMLE9BQU8sQ0FBRSxVQUFBUSxPQUFPO1FBQUEsT0FBS0EsT0FBTyxDQUFDTyxLQUFLLENBQUM7TUFBQSxFQUFDO0lBQ25FO0VBQ0YsQ0FBQyxFQUNEQyxLQUFLLENBQUNDLElBQUksQ0FBQ3RCLGtCQUFrQixDQUFDLEVBQzlCa0Isb0JBQ0YsQ0FBQztBQUNIIiwiaWdub3JlTGlzdCI6W119