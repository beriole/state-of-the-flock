{"version":3,"names":["Object","defineProperty","exports","value","getShadowNodeWrapperFromRef","findHostInstance_DEPRECATED","getInternalInstanceHandleFromPublicInstance","ref","_ref$getScrollRespond","_ref$getScrollRespond2","_ref$getNativeScrollR","_ref$__internalInstan","undefined","require","e","_ref","_require$getInternalI","_internalInstanceHandle","scrollViewRef","getScrollResponder","call","getNativeScrollRef","otherScrollViewRef","textInputRef","__internalInstanceHandle","stateNode","node","resolvedRef"],"sources":["fabricUtils.ts"],"sourcesContent":["'use strict';\n/* eslint-disable */\n\nimport type { ShadowNodeWrapper } from './commonTypes';\n\nlet findHostInstance_DEPRECATED: (ref: unknown) => void;\nlet getInternalInstanceHandleFromPublicInstance: (ref: unknown) => {\n  stateNode: { node: unknown };\n};\n\nexport function getShadowNodeWrapperFromRef(\n  ref: React.Component\n): ShadowNodeWrapper {\n  // load findHostInstance_DEPRECATED lazily because it may not be available before render\n  if (findHostInstance_DEPRECATED === undefined) {\n    try {\n      findHostInstance_DEPRECATED =\n        require('react-native/Libraries/Renderer/shims/ReactFabric').findHostInstance_DEPRECATED;\n    } catch (e) {\n      findHostInstance_DEPRECATED = (_ref: unknown) => null;\n    }\n  }\n\n  if (getInternalInstanceHandleFromPublicInstance === undefined) {\n    try {\n      getInternalInstanceHandleFromPublicInstance =\n        require('react-native/Libraries/ReactNative/ReactFabricPublicInstance/ReactFabricPublicInstance')\n          .getInternalInstanceHandleFromPublicInstance ??\n        ((_ref: any) => _ref._internalInstanceHandle);\n    } catch (e) {\n      getInternalInstanceHandleFromPublicInstance = (_ref: any) =>\n        _ref._internalInstanceHandle;\n    }\n  }\n\n  // taken from https://github.com/facebook/react-native/commit/803bb16531697233686efd475f004c1643e03617#diff-d8172256c6d63b5d32db10e54d7b10f37a26b337d5280d89f5bfd7bcea778292R196\n  // @ts-ignore some weird stuff on RN 0.74 - see examples with scrollView\n  const scrollViewRef = ref?.getScrollResponder?.()?.getNativeScrollRef?.();\n  // @ts-ignore some weird stuff on RN 0.74  - see examples with scrollView\n  const otherScrollViewRef = ref?.getNativeScrollRef?.();\n  // @ts-ignore some weird stuff on RN 0.74 - see setNativeProps example\n  const textInputRef = ref?.__internalInstanceHandle?.stateNode?.node;\n\n  let resolvedRef;\n  if (scrollViewRef) {\n    resolvedRef = scrollViewRef.__internalInstanceHandle.stateNode.node;\n  } else if (otherScrollViewRef) {\n    resolvedRef = otherScrollViewRef.__internalInstanceHandle.stateNode.node;\n  } else if (textInputRef) {\n    resolvedRef = textInputRef;\n  } else {\n    resolvedRef = getInternalInstanceHandleFromPublicInstance(\n      findHostInstance_DEPRECATED(ref)\n    ).stateNode.node;\n  }\n\n  return resolvedRef;\n}\n"],"mappings":"AAAA,YAAY;AAAAA,MAAA,CAAAC,cAAA,CAAAC,OAAA;EAAAC,KAAA;AAAA;AAAAD,OAAA,CAAAE,2BAAA,GAAAA,2BAAA;AAKZ,IAAIC,2BAAmD;AACvD,IAAIC,2CAEH;AAEM,SAASF,2BAA2BA,CACzCG,GAAoB,EACD;EAAA,IAAAC,qBAAA,EAAAC,sBAAA,EAAAC,qBAAA,EAAAC,qBAAA;EAEnB,IAAIN,2BAA2B,KAAKO,SAAS,EAAE;IAC7C,IAAI;MACFP,2BAA2B,GACzBQ,OAAO,CAAC,mDAAmD,CAAC,CAACR,2BAA2B;IAC5F,CAAC,CAAC,OAAOS,CAAC,EAAE;MACVT,2BAA2B,GAAI,SAA/BA,2BAA2BA,CAAIU,IAAa;QAAA,OAAK,IAAI;MAAA;IACvD;EACF;EAEA,IAAIT,2CAA2C,KAAKM,SAAS,EAAE;IAC7D,IAAI;MAAA,IAAAI,qBAAA;MACFV,2CAA2C,IAAAU,qBAAA,GACzCH,OAAO,CAAC,wFAAwF,CAAC,CAC9FP,2CAA2C,YAAAU,qBAAA,GAC5C,UAAAD,IAAS;QAAA,OAAKA,IAAI,CAACE,uBAAuB;MAAA,CAAC;IACjD,CAAC,CAAC,OAAOH,CAAC,EAAE;MACVR,2CAA2C,GAAI,SAA/CA,2CAA2CA,CAAIS,IAAS;QAAA,OACtDA,IAAI,CAACE,uBAAuB;MAAA;IAChC;EACF;EAIA,IAAMC,aAAa,GAAGX,GAAG,aAAHA,GAAG,gBAAAC,qBAAA,GAAHD,GAAG,CAAEY,kBAAkB,cAAAX,qBAAA,gBAAAA,qBAAA,GAAvBA,qBAAA,CAAAY,IAAA,CAAAb,GAA0B,CAAC,cAAAC,qBAAA,gBAAAC,sBAAA,GAA3BD,qBAAA,CAA6Ba,kBAAkB,cAAAZ,sBAAA,uBAA/CA,sBAAA,CAAAW,IAAA,CAAAZ,qBAAkD,CAAC;EAEzE,IAAMc,kBAAkB,GAAGf,GAAG,aAAHA,GAAG,gBAAAG,qBAAA,GAAHH,GAAG,CAAEc,kBAAkB,cAAAX,qBAAA,uBAAvBA,qBAAA,CAAAU,IAAA,CAAAb,GAA0B,CAAC;EAEtD,IAAMgB,YAAY,GAAGhB,GAAG,aAAHA,GAAG,gBAAAI,qBAAA,GAAHJ,GAAG,CAAEiB,wBAAwB,cAAAb,qBAAA,gBAAAA,qBAAA,GAA7BA,qBAAA,CAA+Bc,SAAS,cAAAd,qBAAA,uBAAxCA,qBAAA,CAA0Ce,IAAI;EAEnE,IAAIC,WAAW;EACf,IAAIT,aAAa,EAAE;IACjBS,WAAW,GAAGT,aAAa,CAACM,wBAAwB,CAACC,SAAS,CAACC,IAAI;EACrE,CAAC,MAAM,IAAIJ,kBAAkB,EAAE;IAC7BK,WAAW,GAAGL,kBAAkB,CAACE,wBAAwB,CAACC,SAAS,CAACC,IAAI;EAC1E,CAAC,MAAM,IAAIH,YAAY,EAAE;IACvBI,WAAW,GAAGJ,YAAY;EAC5B,CAAC,MAAM;IACLI,WAAW,GAAGrB,2CAA2C,CACvDD,2BAA2B,CAACE,GAAG,CACjC,CAAC,CAACkB,SAAS,CAACC,IAAI;EAClB;EAEA,OAAOC,WAAW;AACpB","ignoreList":[]}