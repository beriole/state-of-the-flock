4688f07f39fa8c9d2c90fdf1dc0797f6
'use strict';
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.bisectRoot = bisectRoot;
exports.calculateNewMassToMatchDuration = calculateNewMassToMatchDuration;
exports.checkIfConfigIsValid = checkIfConfigIsValid;
exports.criticallyDampedSpringCalculations = criticallyDampedSpringCalculations;
exports.initialCalculations = initialCalculations;
exports.isAnimationTerminatingCalculation = isAnimationTerminatingCalculation;
exports.scaleZetaToMatchClamps = scaleZetaToMatchClamps;
exports.underDampedSpringCalculations = underDampedSpringCalculations;
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
function checkIfConfigIsValid(config) {
  'worklet';

  var _config$clamp, _config$clamp2;
  var errorMessage = '';
  ['stiffness', 'damping', 'dampingRatio', 'restDisplacementThreshold', 'restSpeedThreshold', 'mass'].forEach(function (prop) {
    var value = config[prop];
    if (value <= 0) {
      errorMessage += `, ${prop} must be grater than zero but got ${value}`;
    }
  });
  if (config.duration < 0) {
    errorMessage += `, duration can't be negative, got ${config.duration}`;
  }
  if ((_config$clamp = config.clamp) !== null && _config$clamp !== void 0 && _config$clamp.min && (_config$clamp2 = config.clamp) !== null && _config$clamp2 !== void 0 && _config$clamp2.max && config.clamp.min > config.clamp.max) {
    errorMessage += `, clamp.min should be lower than clamp.max, got clamp: {min: ${config.clamp.min}, max: ${config.clamp.max}} `;
  }
  if (errorMessage !== '') {
    console.warn('[Reanimated] Invalid spring config' + errorMessage);
  }
  return errorMessage === '';
}
function bisectRoot(_ref) {
  'worklet';

  var min = _ref.min,
    max = _ref.max,
    func = _ref.func,
    _ref$maxIterations = _ref.maxIterations,
    maxIterations = _ref$maxIterations === void 0 ? 20 : _ref$maxIterations;
  var ACCURACY = 0.00005;
  var idx = maxIterations;
  var current = (max + min) / 2;
  while (Math.abs(func(current)) > ACCURACY && idx > 0) {
    idx -= 1;
    if (func(current) < 0) {
      min = current;
    } else {
      max = current;
    }
    current = (min + max) / 2;
  }
  return current;
}
function initialCalculations() {
  'worklet';

  var mass = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
  var config = arguments.length > 1 ? arguments[1] : undefined;
  if (config.skipAnimation) {
    return {
      zeta: 0,
      omega0: 0,
      omega1: 0
    };
  }
  if (config.useDuration) {
    var k = config.stiffness,
      zeta = config.dampingRatio;
    var omega0 = Math.sqrt(k / mass);
    var omega1 = omega0 * Math.sqrt(1 - zeta ** 2);
    return {
      zeta: zeta,
      omega0: omega0,
      omega1: omega1
    };
  } else {
    var c = config.damping,
      m = config.mass,
      _k = config.stiffness;
    var _zeta = c / (2 * Math.sqrt(_k * m));
    var _omega = Math.sqrt(_k / m);
    var _omega2 = _omega * Math.sqrt(1 - _zeta ** 2);
    return {
      zeta: _zeta,
      omega0: _omega,
      omega1: _omega2
    };
  }
}
function scaleZetaToMatchClamps(animation, clamp) {
  'worklet';

  var zeta = animation.zeta,
    toValue = animation.toValue,
    startValue = animation.startValue;
  var toValueNum = Number(toValue);
  if (toValueNum === startValue) {
    return zeta;
  }
  var _ref2 = toValueNum - startValue > 0 ? [clamp.min, clamp.max] : [clamp.max, clamp.min],
    _ref3 = (0, _slicedToArray2.default)(_ref2, 2),
    firstBound = _ref3[0],
    secondBound = _ref3[1];
  var relativeExtremum1 = secondBound !== undefined ? Math.abs((secondBound - toValueNum) / (toValueNum - startValue)) : undefined;
  var relativeExtremum2 = firstBound !== undefined ? Math.abs((firstBound - toValueNum) / (toValueNum - startValue)) : undefined;
  var newZeta1 = relativeExtremum1 !== undefined ? Math.abs(Math.log(relativeExtremum1) / Math.PI) : undefined;
  var newZeta2 = relativeExtremum2 !== undefined ? Math.abs(Math.log(relativeExtremum2) / (2 * Math.PI)) : undefined;
  var zetaSatisfyingClamp = [newZeta1, newZeta2].filter(function (x) {
    return x !== undefined;
  });
  return Math.max.apply(Math, (0, _toConsumableArray2.default)(zetaSatisfyingClamp).concat([zeta]));
}
function calculateNewMassToMatchDuration(x0, config, v0) {
  'worklet';

  if (config.skipAnimation) {
    return 0;
  }
  var k = config.stiffness,
    zeta = config.dampingRatio,
    threshold = config.restSpeedThreshold,
    duration = config.duration;
  var durationForMass = function durationForMass(mass) {
    'worklet';

    var amplitude = (mass * v0 * v0 + k * x0 * x0) / (Math.exp(1 - 0.5 * zeta) * k);
    var c = zeta * 2 * Math.sqrt(k * mass);
    return 1000 * (-2 * mass / c) * Math.log(threshold * 0.01 / amplitude) - duration;
  };
  return bisectRoot({
    min: 0,
    max: 100,
    func: durationForMass
  });
}
function criticallyDampedSpringCalculations(animation, precalculatedValues) {
  'worklet';

  var toValue = animation.toValue;
  var v0 = precalculatedValues.v0,
    x0 = precalculatedValues.x0,
    omega0 = precalculatedValues.omega0,
    t = precalculatedValues.t;
  var criticallyDampedEnvelope = Math.exp(-omega0 * t);
  var criticallyDampedPosition = toValue - criticallyDampedEnvelope * (x0 + (v0 + omega0 * x0) * t);
  var criticallyDampedVelocity = criticallyDampedEnvelope * (v0 * (t * omega0 - 1) + t * x0 * omega0 * omega0);
  return {
    position: criticallyDampedPosition,
    velocity: criticallyDampedVelocity
  };
}
function underDampedSpringCalculations(animation, precalculatedValues) {
  'worklet';

  var toValue = animation.toValue,
    current = animation.current,
    velocity = animation.velocity;
  var zeta = precalculatedValues.zeta,
    t = precalculatedValues.t,
    omega0 = precalculatedValues.omega0,
    omega1 = precalculatedValues.omega1;
  var v0 = -velocity;
  var x0 = toValue - current;
  var sin1 = Math.sin(omega1 * t);
  var cos1 = Math.cos(omega1 * t);
  var underDampedEnvelope = Math.exp(-zeta * omega0 * t);
  var underDampedFrag1 = underDampedEnvelope * (sin1 * ((v0 + zeta * omega0 * x0) / omega1) + x0 * cos1);
  var underDampedPosition = toValue - underDampedFrag1;
  var underDampedVelocity = zeta * omega0 * underDampedFrag1 - underDampedEnvelope * (cos1 * (v0 + zeta * omega0 * x0) - omega1 * x0 * sin1);
  return {
    position: underDampedPosition,
    velocity: underDampedVelocity
  };
}
function isAnimationTerminatingCalculation(animation, config) {
  'worklet';

  var toValue = animation.toValue,
    velocity = animation.velocity,
    startValue = animation.startValue,
    current = animation.current;
  var isOvershooting = config.overshootClamping ? current > toValue && startValue < toValue || current < toValue && startValue > toValue : false;
  var isVelocity = Math.abs(velocity) < config.restSpeedThreshold;
  var isDisplacement = Math.abs(toValue - current) < config.restDisplacementThreshold;
  return {
    isOvershooting: isOvershooting,
    isVelocity: isVelocity,
    isDisplacement: isDisplacement
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiYmlzZWN0Um9vdCIsImNhbGN1bGF0ZU5ld01hc3NUb01hdGNoRHVyYXRpb24iLCJjaGVja0lmQ29uZmlnSXNWYWxpZCIsImNyaXRpY2FsbHlEYW1wZWRTcHJpbmdDYWxjdWxhdGlvbnMiLCJpbml0aWFsQ2FsY3VsYXRpb25zIiwiaXNBbmltYXRpb25UZXJtaW5hdGluZ0NhbGN1bGF0aW9uIiwic2NhbGVaZXRhVG9NYXRjaENsYW1wcyIsInVuZGVyRGFtcGVkU3ByaW5nQ2FsY3VsYXRpb25zIiwiX3RvQ29uc3VtYWJsZUFycmF5MiIsIl9zbGljZWRUb0FycmF5MiIsImNvbmZpZyIsIl9jb25maWckY2xhbXAiLCJfY29uZmlnJGNsYW1wMiIsImVycm9yTWVzc2FnZSIsImZvckVhY2giLCJwcm9wIiwiZHVyYXRpb24iLCJjbGFtcCIsIm1pbiIsIm1heCIsImNvbnNvbGUiLCJ3YXJuIiwiX3JlZiIsImZ1bmMiLCJfcmVmJG1heEl0ZXJhdGlvbnMiLCJtYXhJdGVyYXRpb25zIiwiQUNDVVJBQ1kiLCJpZHgiLCJjdXJyZW50IiwiTWF0aCIsImFicyIsIm1hc3MiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJza2lwQW5pbWF0aW9uIiwiemV0YSIsIm9tZWdhMCIsIm9tZWdhMSIsInVzZUR1cmF0aW9uIiwiayIsInN0aWZmbmVzcyIsImRhbXBpbmdSYXRpbyIsInNxcnQiLCJjIiwiZGFtcGluZyIsIm0iLCJhbmltYXRpb24iLCJ0b1ZhbHVlIiwic3RhcnRWYWx1ZSIsInRvVmFsdWVOdW0iLCJOdW1iZXIiLCJfcmVmMiIsIl9yZWYzIiwiZGVmYXVsdCIsImZpcnN0Qm91bmQiLCJzZWNvbmRCb3VuZCIsInJlbGF0aXZlRXh0cmVtdW0xIiwicmVsYXRpdmVFeHRyZW11bTIiLCJuZXdaZXRhMSIsImxvZyIsIlBJIiwibmV3WmV0YTIiLCJ6ZXRhU2F0aXNmeWluZ0NsYW1wIiwiZmlsdGVyIiwieCIsImFwcGx5IiwiY29uY2F0IiwieDAiLCJ2MCIsInRocmVzaG9sZCIsInJlc3RTcGVlZFRocmVzaG9sZCIsImR1cmF0aW9uRm9yTWFzcyIsImFtcGxpdHVkZSIsImV4cCIsInByZWNhbGN1bGF0ZWRWYWx1ZXMiLCJ0IiwiY3JpdGljYWxseURhbXBlZEVudmVsb3BlIiwiY3JpdGljYWxseURhbXBlZFBvc2l0aW9uIiwiY3JpdGljYWxseURhbXBlZFZlbG9jaXR5IiwicG9zaXRpb24iLCJ2ZWxvY2l0eSIsInNpbjEiLCJzaW4iLCJjb3MxIiwiY29zIiwidW5kZXJEYW1wZWRFbnZlbG9wZSIsInVuZGVyRGFtcGVkRnJhZzEiLCJ1bmRlckRhbXBlZFBvc2l0aW9uIiwidW5kZXJEYW1wZWRWZWxvY2l0eSIsImlzT3ZlcnNob290aW5nIiwib3ZlcnNob290Q2xhbXBpbmciLCJpc1ZlbG9jaXR5IiwiaXNEaXNwbGFjZW1lbnQiLCJyZXN0RGlzcGxhY2VtZW50VGhyZXNob2xkIl0sInNvdXJjZXMiOlsic3ByaW5nVXRpbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IHR5cGUge1xuICBBbmltYXRpb24sXG4gIEFuaW1hdGFibGVWYWx1ZSxcbiAgVGltZXN0YW1wLFxuICBSZWR1Y2VNb3Rpb24sXG59IGZyb20gJy4uL2NvbW1vblR5cGVzJztcblxuLyoqXG4gKiBTcHJpbmcgYW5pbWF0aW9uIGNvbmZpZ3VyYXRpb24uXG4gKlxuICogQHBhcmFtIG1hc3MgLSBUaGUgd2VpZ2h0IG9mIHRoZSBzcHJpbmcuIFJlZHVjaW5nIHRoaXMgdmFsdWUgbWFrZXMgdGhlIGFuaW1hdGlvbiBmYXN0ZXIuIERlZmF1bHRzIHRvIDEuXG4gKiBAcGFyYW0gZGFtcGluZyAtIEhvdyBxdWlja2x5IGEgc3ByaW5nIHNsb3dzIGRvd24uIEhpZ2hlciBkYW1waW5nIG1lYW5zIHRoZSBzcHJpbmcgd2lsbCBjb21lIHRvIHJlc3QgZmFzdGVyLiBEZWZhdWx0cyB0byAxMC5cbiAqIEBwYXJhbSBkdXJhdGlvbiAtIExlbmd0aCBvZiB0aGUgYW5pbWF0aW9uIChpbiBtaWxsaXNlY29uZHMpLiBEZWZhdWx0cyB0byAyMDAwLlxuICogQHBhcmFtIGRhbXBpbmdSYXRpbyAtIEhvdyBkYW1wZWQgdGhlIHNwcmluZyBpcy4gVmFsdWUgMSBtZWFucyB0aGUgc3ByaW5nIGlzIGNyaXRpY2FsbHkgZGFtcGVkLCBhbmQgdmFsdWUgXFw+MSBtZWFucyB0aGUgc3ByaW5nIGlzIG92ZXJkYW1wZWQuIERlZmF1bHRzIHRvIDAuNS5cbiAqIEBwYXJhbSBzdGlmZm5lc3MgLSBIb3cgYm91bmN5IHRoZSBzcHJpbmcgaXMuIERlZmF1bHRzIHRvIDEwMC5cbiAqIEBwYXJhbSB2ZWxvY2l0eSAtIEluaXRpYWwgdmVsb2NpdHkgYXBwbGllZCB0byB0aGUgc3ByaW5nIGVxdWF0aW9uLiBEZWZhdWx0cyB0byAwLlxuICogQHBhcmFtIG92ZXJzaG9vdENsYW1waW5nIC0gV2hldGhlciBhIHNwcmluZyBjYW4gYm91bmNlIG92ZXIgdGhlIGB0b1ZhbHVlYC4gRGVmYXVsdHMgdG8gZmFsc2UuXG4gKiBAcGFyYW0gcmVzdERpc3BsYWNlbWVudFRocmVzaG9sZCAtIFRoZSBkaXNwbGFjZW1lbnQgYmVsb3cgd2hpY2ggdGhlIHNwcmluZyB3aWxsIHNuYXAgdG8gdG9WYWx1ZSB3aXRob3V0IGZ1cnRoZXIgb3NjaWxsYXRpb25zLiBEZWZhdWx0cyB0byAwLjAxLlxuICogQHBhcmFtIHJlc3RTcGVlZFRocmVzaG9sZCAtIFRoZSBzcGVlZCBpbiBwaXhlbHMgcGVyIHNlY29uZCBmcm9tIHdoaWNoIHRoZSBzcHJpbmcgd2lsbCBzbmFwIHRvIHRvVmFsdWUgd2l0aG91dCBmdXJ0aGVyIG9zY2lsbGF0aW9ucy4gRGVmYXVsdHMgdG8gMi5cbiAqIEBwYXJhbSByZWR1Y2VNb3Rpb24gLSBEZXRlcm1pbmVzIGhvdyB0aGUgYW5pbWF0aW9uIHJlc3BvbmRzIHRvIHRoZSBkZXZpY2UncyByZWR1Y2VkIG1vdGlvbiBhY2Nlc3NpYmlsaXR5IHNldHRpbmcuIERlZmF1bHQgdG8gYFJlZHVjZU1vdGlvbi5TeXN0ZW1gIC0ge0BsaW5rIFJlZHVjZU1vdGlvbn0uXG4gKiBAc2VlIGh0dHBzOi8vZG9jcy5zd21hbnNpb24uY29tL3JlYWN0LW5hdGl2ZS1yZWFuaW1hdGVkL2RvY3MvYW5pbWF0aW9ucy93aXRoU3ByaW5nLyNjb25maWctXG4gKi9cbmV4cG9ydCB0eXBlIFNwcmluZ0NvbmZpZyA9IHtcbiAgc3RpZmZuZXNzPzogbnVtYmVyO1xuICBvdmVyc2hvb3RDbGFtcGluZz86IGJvb2xlYW47XG4gIHJlc3REaXNwbGFjZW1lbnRUaHJlc2hvbGQ/OiBudW1iZXI7XG4gIHJlc3RTcGVlZFRocmVzaG9sZD86IG51bWJlcjtcbiAgdmVsb2NpdHk/OiBudW1iZXI7XG4gIHJlZHVjZU1vdGlvbj86IFJlZHVjZU1vdGlvbjtcbn0gJiAoXG4gIHwge1xuICAgICAgbWFzcz86IG51bWJlcjtcbiAgICAgIGRhbXBpbmc/OiBudW1iZXI7XG4gICAgICBkdXJhdGlvbj86IG5ldmVyO1xuICAgICAgZGFtcGluZ1JhdGlvPzogbmV2ZXI7XG4gICAgICBjbGFtcD86IG5ldmVyO1xuICAgIH1cbiAgfCB7XG4gICAgICBtYXNzPzogbmV2ZXI7XG4gICAgICBkYW1waW5nPzogbmV2ZXI7XG4gICAgICBkdXJhdGlvbj86IG51bWJlcjtcbiAgICAgIGRhbXBpbmdSYXRpbz86IG51bWJlcjtcbiAgICAgIGNsYW1wPzogeyBtaW4/OiBudW1iZXI7IG1heD86IG51bWJlciB9O1xuICAgIH1cbik7XG5cbi8vIFRoaXMgdHlwZSBjb250YWlucyBhbGwgdGhlIHByb3BlcnRpZXMgZnJvbSBTcHJpbmdDb25maWcsIHdoaWNoIGFyZSBjaGFuZ2VkIHRvIGJlIHJlcXVpcmVkLFxuLy8gZXhjZXB0IGZvciBvcHRpb25hbCAncmVkdWNlTW90aW9uJyBhbmQgJ2NsYW1wJ1xuZXhwb3J0IHR5cGUgRGVmYXVsdFNwcmluZ0NvbmZpZyA9IHtcbiAgW0sgaW4ga2V5b2YgUmVxdWlyZWQ8U3ByaW5nQ29uZmlnPl06IEsgZXh0ZW5kcyAncmVkdWNlTW90aW9uJyB8ICdjbGFtcCdcbiAgICA/IFJlcXVpcmVkPFNwcmluZ0NvbmZpZz5bS10gfCB1bmRlZmluZWRcbiAgICA6IFJlcXVpcmVkPFNwcmluZ0NvbmZpZz5bS107XG59O1xuZXhwb3J0IHR5cGUgV2l0aFNwcmluZ0NvbmZpZyA9IFNwcmluZ0NvbmZpZztcblxuZXhwb3J0IGludGVyZmFjZSBTcHJpbmdDb25maWdJbm5lciB7XG4gIHVzZUR1cmF0aW9uOiBib29sZWFuO1xuICBza2lwQW5pbWF0aW9uOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNwcmluZ0FuaW1hdGlvbiBleHRlbmRzIEFuaW1hdGlvbjxTcHJpbmdBbmltYXRpb24+IHtcbiAgY3VycmVudDogQW5pbWF0YWJsZVZhbHVlO1xuICB0b1ZhbHVlOiBBbmltYXRhYmxlVmFsdWU7XG4gIHZlbG9jaXR5OiBudW1iZXI7XG4gIGxhc3RUaW1lc3RhbXA6IFRpbWVzdGFtcDtcbiAgc3RhcnRUaW1lc3RhbXA6IFRpbWVzdGFtcDtcbiAgc3RhcnRWYWx1ZTogbnVtYmVyO1xuICB6ZXRhOiBudW1iZXI7XG4gIG9tZWdhMDogbnVtYmVyO1xuICBvbWVnYTE6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbm5lclNwcmluZ0FuaW1hdGlvblxuICBleHRlbmRzIE9taXQ8U3ByaW5nQW5pbWF0aW9uLCAndG9WYWx1ZScgfCAnY3VycmVudCc+IHtcbiAgdG9WYWx1ZTogbnVtYmVyO1xuICBjdXJyZW50OiBudW1iZXI7XG59XG5leHBvcnQgZnVuY3Rpb24gY2hlY2tJZkNvbmZpZ0lzVmFsaWQoY29uZmlnOiBEZWZhdWx0U3ByaW5nQ29uZmlnKTogYm9vbGVhbiB7XG4gICd3b3JrbGV0JztcbiAgbGV0IGVycm9yTWVzc2FnZSA9ICcnO1xuICAoXG4gICAgW1xuICAgICAgJ3N0aWZmbmVzcycsXG4gICAgICAnZGFtcGluZycsXG4gICAgICAnZGFtcGluZ1JhdGlvJyxcbiAgICAgICdyZXN0RGlzcGxhY2VtZW50VGhyZXNob2xkJyxcbiAgICAgICdyZXN0U3BlZWRUaHJlc2hvbGQnLFxuICAgICAgJ21hc3MnLFxuICAgIF0gYXMgY29uc3RcbiAgKS5mb3JFYWNoKChwcm9wKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBjb25maWdbcHJvcF07XG4gICAgaWYgKHZhbHVlIDw9IDApIHtcbiAgICAgIGVycm9yTWVzc2FnZSArPSBgLCAke3Byb3B9IG11c3QgYmUgZ3JhdGVyIHRoYW4gemVybyBidXQgZ290ICR7dmFsdWV9YDtcbiAgICB9XG4gIH0pO1xuXG4gIGlmIChjb25maWcuZHVyYXRpb24gPCAwKSB7XG4gICAgZXJyb3JNZXNzYWdlICs9IGAsIGR1cmF0aW9uIGNhbid0IGJlIG5lZ2F0aXZlLCBnb3QgJHtjb25maWcuZHVyYXRpb259YDtcbiAgfVxuXG4gIGlmIChcbiAgICBjb25maWcuY2xhbXA/Lm1pbiAmJlxuICAgIGNvbmZpZy5jbGFtcD8ubWF4ICYmXG4gICAgY29uZmlnLmNsYW1wLm1pbiA+IGNvbmZpZy5jbGFtcC5tYXhcbiAgKSB7XG4gICAgZXJyb3JNZXNzYWdlICs9IGAsIGNsYW1wLm1pbiBzaG91bGQgYmUgbG93ZXIgdGhhbiBjbGFtcC5tYXgsIGdvdCBjbGFtcDoge21pbjogJHtjb25maWcuY2xhbXAubWlufSwgbWF4OiAke2NvbmZpZy5jbGFtcC5tYXh9fSBgO1xuICB9XG5cbiAgaWYgKGVycm9yTWVzc2FnZSAhPT0gJycpIHtcbiAgICBjb25zb2xlLndhcm4oJ1tSZWFuaW1hdGVkXSBJbnZhbGlkIHNwcmluZyBjb25maWcnICsgZXJyb3JNZXNzYWdlKTtcbiAgfVxuXG4gIHJldHVybiBlcnJvck1lc3NhZ2UgPT09ICcnO1xufVxuXG4vLyB0cy1wcnVuZS1pZ25vcmUtbmV4dCBUaGlzIGZ1bmN0aW9uIGlzIGV4cG9ydGVkIHRvIGJlIHRlc3RlZFxuZXhwb3J0IGZ1bmN0aW9uIGJpc2VjdFJvb3Qoe1xuICBtaW4sXG4gIG1heCxcbiAgZnVuYyxcbiAgbWF4SXRlcmF0aW9ucyA9IDIwLFxufToge1xuICBtaW46IG51bWJlcjtcbiAgbWF4OiBudW1iZXI7XG4gIGZ1bmM6ICh4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgbWF4SXRlcmF0aW9ucz86IG51bWJlcjtcbn0pIHtcbiAgJ3dvcmtsZXQnO1xuICBjb25zdCBBQ0NVUkFDWSA9IDAuMDAwMDU7XG4gIGxldCBpZHggPSBtYXhJdGVyYXRpb25zO1xuICBsZXQgY3VycmVudCA9IChtYXggKyBtaW4pIC8gMjtcbiAgd2hpbGUgKE1hdGguYWJzKGZ1bmMoY3VycmVudCkpID4gQUNDVVJBQ1kgJiYgaWR4ID4gMCkge1xuICAgIGlkeCAtPSAxO1xuXG4gICAgaWYgKGZ1bmMoY3VycmVudCkgPCAwKSB7XG4gICAgICBtaW4gPSBjdXJyZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBtYXggPSBjdXJyZW50O1xuICAgIH1cbiAgICBjdXJyZW50ID0gKG1pbiArIG1heCkgLyAyO1xuICB9XG4gIHJldHVybiBjdXJyZW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbENhbGN1bGF0aW9ucyhcbiAgbWFzcyA9IDAsXG4gIGNvbmZpZzogRGVmYXVsdFNwcmluZ0NvbmZpZyAmIFNwcmluZ0NvbmZpZ0lubmVyXG4pOiB7XG4gIHpldGE6IG51bWJlcjtcbiAgb21lZ2EwOiBudW1iZXI7XG4gIG9tZWdhMTogbnVtYmVyO1xufSB7XG4gICd3b3JrbGV0JztcblxuICBpZiAoY29uZmlnLnNraXBBbmltYXRpb24pIHtcbiAgICByZXR1cm4geyB6ZXRhOiAwLCBvbWVnYTA6IDAsIG9tZWdhMTogMCB9O1xuICB9XG5cbiAgaWYgKGNvbmZpZy51c2VEdXJhdGlvbikge1xuICAgIGNvbnN0IHsgc3RpZmZuZXNzOiBrLCBkYW1waW5nUmF0aW86IHpldGEgfSA9IGNvbmZpZztcblxuICAgIC8qKiBvbWVnYTAgYW5kIG9tZWdhMSBkZW5vdGUgYW5ndWxhciBmcmVxdWVuY3kgYW5kIG5hdHVyYWwgYW5ndWxhciBmcmVxdWVuY3ksIHNlZSB0aGlzIGxpbmsgZm9yIGZvcm11bGFzOlxuICAgICAqICBodHRwczovL2NvdXJzZXMubHVtZW5sZWFybmluZy5jb20vc3VueS1vc3VuaXZlcnNpdHlwaHlzaWNzL2NoYXB0ZXIvMTUtNS1kYW1wZWQtb3NjaWxsYXRpb25zL1xuICAgICAqL1xuICAgIGNvbnN0IG9tZWdhMCA9IE1hdGguc3FydChrIC8gbWFzcyk7XG4gICAgY29uc3Qgb21lZ2ExID0gb21lZ2EwICogTWF0aC5zcXJ0KDEgLSB6ZXRhICoqIDIpO1xuXG4gICAgcmV0dXJuIHsgemV0YSwgb21lZ2EwLCBvbWVnYTEgfTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCB7IGRhbXBpbmc6IGMsIG1hc3M6IG0sIHN0aWZmbmVzczogayB9ID0gY29uZmlnO1xuXG4gICAgY29uc3QgemV0YSA9IGMgLyAoMiAqIE1hdGguc3FydChrICogbSkpOyAvLyBkYW1waW5nIHJhdGlvXG4gICAgY29uc3Qgb21lZ2EwID0gTWF0aC5zcXJ0KGsgLyBtKTsgLy8gdW5kYW1wZWQgYW5ndWxhciBmcmVxdWVuY3kgb2YgdGhlIG9zY2lsbGF0b3IgKHJhZC9tcylcbiAgICBjb25zdCBvbWVnYTEgPSBvbWVnYTAgKiBNYXRoLnNxcnQoMSAtIHpldGEgKiogMik7IC8vIGV4cG9uZW50aWFsIGRlY2F5XG5cbiAgICByZXR1cm4geyB6ZXRhLCBvbWVnYTAsIG9tZWdhMSB9O1xuICB9XG59XG5cbi8qKiBXZSBtYWtlIGFuIGFzc3VtcHRpb24gdGhhdCB3ZSBjYW4gbWFuaXB1bGF0ZSB6ZXRhIHdpdGhvdXQgY2hhbmdpbmcgZHVyYXRpb24gb2YgbW92ZW1lbnQuXG4gKiAgQWNjb3JkaW5nIHRvIHRoZW9yeSB0aGlzIGNoYW5nZSBpcyBzbWFsbCBhbmQgdGVzdHMgc2hvd3MgdGhhdCB3ZSBjYW4gaW5kZWVkIGlnbm9yZSBpdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlWmV0YVRvTWF0Y2hDbGFtcHMoXG4gIGFuaW1hdGlvbjogU3ByaW5nQW5pbWF0aW9uLFxuICBjbGFtcDogeyBtaW4/OiBudW1iZXI7IG1heD86IG51bWJlciB9XG4pOiBudW1iZXIge1xuICAnd29ya2xldCc7XG4gIGNvbnN0IHsgemV0YSwgdG9WYWx1ZSwgc3RhcnRWYWx1ZSB9ID0gYW5pbWF0aW9uO1xuICBjb25zdCB0b1ZhbHVlTnVtID0gTnVtYmVyKHRvVmFsdWUpO1xuXG4gIGlmICh0b1ZhbHVlTnVtID09PSBzdGFydFZhbHVlKSB7XG4gICAgcmV0dXJuIHpldGE7XG4gIH1cblxuICBjb25zdCBbZmlyc3RCb3VuZCwgc2Vjb25kQm91bmRdID1cbiAgICB0b1ZhbHVlTnVtIC0gc3RhcnRWYWx1ZSA+IDBcbiAgICAgID8gW2NsYW1wLm1pbiwgY2xhbXAubWF4XVxuICAgICAgOiBbY2xhbXAubWF4LCBjbGFtcC5taW5dO1xuXG4gIC8qKiBUaGUgZXh0cmVtYSB3ZSBnZXQgZnJvbSBlcXVhdGlvbiBiZWxvdyBhcmUgcmVsYXRpdmUgKHdlIG9idGFpbiBhIHJhdGlvKSxcbiAgICogIFRvIGdldCBhYnNvbHV0ZSBleHRyZW1hIHdlIGNvbnZlcnQgaXQgYXMgZm9sbG93czpcbiAgICpcbiAgICogIEFic29sdXRlRXh0cmVtdW0gPSBzdGFydFZhbHVlIMKxIFJlbGF0aXZlRXh0cmVtdW0gKiAodG9WYWx1ZSAtIHN0YXJ0VmFsdWUpXG4gICAqICBXaGVyZSDCsSBkZW5vdGVzOlxuICAgKiAgICArIGlmIGV4dHJlbXVtIGlzIG92ZXIgdGhlIHRhcmdldFxuICAgKiAgICAtIG90aGVyd2lzZVxuICAgKi9cblxuICBjb25zdCByZWxhdGl2ZUV4dHJlbXVtMSA9XG4gICAgc2Vjb25kQm91bmQgIT09IHVuZGVmaW5lZFxuICAgICAgPyBNYXRoLmFicygoc2Vjb25kQm91bmQgLSB0b1ZhbHVlTnVtKSAvICh0b1ZhbHVlTnVtIC0gc3RhcnRWYWx1ZSkpXG4gICAgICA6IHVuZGVmaW5lZDtcblxuICBjb25zdCByZWxhdGl2ZUV4dHJlbXVtMiA9XG4gICAgZmlyc3RCb3VuZCAhPT0gdW5kZWZpbmVkXG4gICAgICA/IE1hdGguYWJzKChmaXJzdEJvdW5kIC0gdG9WYWx1ZU51bSkgLyAodG9WYWx1ZU51bSAtIHN0YXJ0VmFsdWUpKVxuICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgLyoqIFVzZSB0aGlzIGZvcm11bGEgaHR0cDovL2h5cGVycGh5c2ljcy5waHktYXN0ci5nc3UuZWR1L2hiYXNlL29zY2RhLmh0bWwgdG8gY2FsY3VsYXRlXG4gICAqICBmaXJzdCB0d28gZXh0cmVtYS4gVGhlc2UgZXh0cmVtYSBhcmUgbG9jYXRlZCB3aGVyZSBjb3MgPSArLSAxXG4gICAqXG4gICAqICBUaGVyZWZvcmUgdGhlIGZpcnN0IHR3byBleHRyZW1hIGFyZTpcbiAgICpcbiAgICogICAgIE1hdGguZXhwKC16ZXRhICogTWF0aC5QSSk7ICAgICAgKG92ZXIgdGhlIHRhcmdldClcbiAgICogICAgIE1hdGguZXhwKC16ZXRhICogMiAqIE1hdGguUEkpOyAgKGJlZm9yZSB0aGUgdGFyZ2V0KVxuICAgKi9cblxuICBjb25zdCBuZXdaZXRhMSA9XG4gICAgcmVsYXRpdmVFeHRyZW11bTEgIT09IHVuZGVmaW5lZFxuICAgICAgPyBNYXRoLmFicyhNYXRoLmxvZyhyZWxhdGl2ZUV4dHJlbXVtMSkgLyBNYXRoLlBJKVxuICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgY29uc3QgbmV3WmV0YTIgPVxuICAgIHJlbGF0aXZlRXh0cmVtdW0yICE9PSB1bmRlZmluZWRcbiAgICAgID8gTWF0aC5hYnMoTWF0aC5sb2cocmVsYXRpdmVFeHRyZW11bTIpIC8gKDIgKiBNYXRoLlBJKSlcbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gIGNvbnN0IHpldGFTYXRpc2Z5aW5nQ2xhbXAgPSBbbmV3WmV0YTEsIG5ld1pldGEyXS5maWx0ZXIoXG4gICAgKHg6IG51bWJlciB8IHVuZGVmaW5lZCk6IHggaXMgbnVtYmVyID0+IHggIT09IHVuZGVmaW5lZFxuICApO1xuICAvLyBUaGUgYmlnZ2VyIGlzIHpldGEgdGhlIHNtYWxsZXIgYXJlIGJvdW5jZXMsIHdlIHJldHVybiB0aGUgYmlnZ2VzdCBvbmVcbiAgLy8gYmVjYXVzZSBpdCBzaG91bGQgc2F0aXNmeSBhbGwgY29uZGl0aW9uc1xuICByZXR1cm4gTWF0aC5tYXgoLi4uemV0YVNhdGlzZnlpbmdDbGFtcCwgemV0YSk7XG59XG5cbi8qKiBSdW5zIGJlZm9yZSBpbml0aWFsICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlTmV3TWFzc1RvTWF0Y2hEdXJhdGlvbihcbiAgeDA6IG51bWJlcixcbiAgY29uZmlnOiBEZWZhdWx0U3ByaW5nQ29uZmlnICYgU3ByaW5nQ29uZmlnSW5uZXIsXG4gIHYwOiBudW1iZXJcbikge1xuICAnd29ya2xldCc7XG4gIGlmIChjb25maWcuc2tpcEFuaW1hdGlvbikge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgLyoqIFVzZSB0aGlzIGZvcm11bGE6IGh0dHBzOi8vcGh5cy5saWJyZXRleHRzLm9yZy9Cb29rc2hlbHZlcy9Vbml2ZXJzaXR5X1BoeXNpY3MvQm9vayUzQV9Vbml2ZXJzaXR5X1BoeXNpY3NfKE9wZW5TdGF4KS9Cb29rJTNBX1VuaXZlcnNpdHlfUGh5c2ljc19JXy1fTWVjaGFuaWNzX1NvdW5kX09zY2lsbGF0aW9uc19hbmRfV2F2ZXNfKE9wZW5TdGF4KS8xNSUzQV9Pc2NpbGxhdGlvbnMvMTUuMDYlM0FfRGFtcGVkX09zY2lsbGF0aW9uc1xuICAgICAgICogdG8gZmluZCB0aGUgYXN5bXB0b3RlIGFuZCBlc3RpbWF0ZSB0aGUgZGFtcGluZyB0aGF0IGdpdmVzIHVzIHRoZSBleHBlY3RlZCBkdXJhdGlvbiBcblxuICAgICAgICAgICAg4o6bIOKOmyBj4o6eICAgICAgICAgICDijp4gICAgICAgICAgIFxuICAgICAgICAgICAg4o6cLeKOnOKUgOKUgOKOnyDii4UgZHVyYXRpb27ijp8gICAgICAgICAgIFxuICAgICAgICAgICAg4o6dIOKOnTJt4o6gICAgICAgICAgICDijqAgICAgICAgICAgIFxuICAgICAgIEEg4ouFIGUgICAgICAgICAgICAgICAgICAgPSB0aHJlc2hvbGRcblxuIFxuICAgICAgQW1wbGl0dWRlIGNhbGN1bGF0ZWQgdXNpbmcgXCJDb25zZXJ2YXRpb24gb2YgZW5lcmd5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgX19fX19fX19fX19fX19fX19cbiAgICAgICAgICAgICAgICAgICAgICDilbEgICAgICAyICAgICAgICAgMlxuICAgICAgICAgICAgICAgICAgICAg4pWxIG0g4ouFIHYwICArIGsg4ouFIHgwIFxuICAgICAgYW1wbGl0dWRlID0gICDilbEgIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuICAgICAgICAgICAgICAgICAg4pWy4pWxICAgICAgICAgICBrICAgICAgICBcblxuICAgICAgQW5kIHJlcGxhY2UgbWFzcyB3aXRoIGRhbXBpbmcgcmF0aW8gd2hpY2ggaXMgcHJvdmlkZWQ6IG0gPSAoY14yKS8oNCAqIGsgKiB6ZXRhXjIpICAgXG4gICAgICAqL1xuICBjb25zdCB7XG4gICAgc3RpZmZuZXNzOiBrLFxuICAgIGRhbXBpbmdSYXRpbzogemV0YSxcbiAgICByZXN0U3BlZWRUaHJlc2hvbGQ6IHRocmVzaG9sZCxcbiAgICBkdXJhdGlvbixcbiAgfSA9IGNvbmZpZztcblxuICBjb25zdCBkdXJhdGlvbkZvck1hc3MgPSAobWFzczogbnVtYmVyKSA9PiB7XG4gICAgJ3dvcmtsZXQnO1xuICAgIGNvbnN0IGFtcGxpdHVkZSA9XG4gICAgICAobWFzcyAqIHYwICogdjAgKyBrICogeDAgKiB4MCkgLyAoTWF0aC5leHAoMSAtIDAuNSAqIHpldGEpICogayk7XG4gICAgY29uc3QgYyA9IHpldGEgKiAyICogTWF0aC5zcXJ0KGsgKiBtYXNzKTtcbiAgICByZXR1cm4gKFxuICAgICAgMTAwMCAqICgoLTIgKiBtYXNzKSAvIGMpICogTWF0aC5sb2coKHRocmVzaG9sZCAqIDAuMDEpIC8gYW1wbGl0dWRlKSAtXG4gICAgICBkdXJhdGlvblxuICAgICk7XG4gIH07XG5cbiAgLy8gQmlzZWN0aW9uIHR1cm5zIG91dCB0byBiZSBtdWNoIGZhc3RlciB0aGFuIE5ld3RvbidzIG1ldGhvZCBpbiBvdXIgY2FzZVxuICByZXR1cm4gYmlzZWN0Um9vdCh7IG1pbjogMCwgbWF4OiAxMDAsIGZ1bmM6IGR1cmF0aW9uRm9yTWFzcyB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyaXRpY2FsbHlEYW1wZWRTcHJpbmdDYWxjdWxhdGlvbnMoXG4gIGFuaW1hdGlvbjogSW5uZXJTcHJpbmdBbmltYXRpb24sXG4gIHByZWNhbGN1bGF0ZWRWYWx1ZXM6IHtcbiAgICB2MDogbnVtYmVyO1xuICAgIHgwOiBudW1iZXI7XG4gICAgb21lZ2EwOiBudW1iZXI7XG4gICAgdDogbnVtYmVyO1xuICB9XG4pOiB7IHBvc2l0aW9uOiBudW1iZXI7IHZlbG9jaXR5OiBudW1iZXIgfSB7XG4gICd3b3JrbGV0JztcbiAgY29uc3QgeyB0b1ZhbHVlIH0gPSBhbmltYXRpb247XG5cbiAgY29uc3QgeyB2MCwgeDAsIG9tZWdhMCwgdCB9ID0gcHJlY2FsY3VsYXRlZFZhbHVlcztcblxuICBjb25zdCBjcml0aWNhbGx5RGFtcGVkRW52ZWxvcGUgPSBNYXRoLmV4cCgtb21lZ2EwICogdCk7XG4gIGNvbnN0IGNyaXRpY2FsbHlEYW1wZWRQb3NpdGlvbiA9XG4gICAgdG9WYWx1ZSAtIGNyaXRpY2FsbHlEYW1wZWRFbnZlbG9wZSAqICh4MCArICh2MCArIG9tZWdhMCAqIHgwKSAqIHQpO1xuXG4gIGNvbnN0IGNyaXRpY2FsbHlEYW1wZWRWZWxvY2l0eSA9XG4gICAgY3JpdGljYWxseURhbXBlZEVudmVsb3BlICpcbiAgICAodjAgKiAodCAqIG9tZWdhMCAtIDEpICsgdCAqIHgwICogb21lZ2EwICogb21lZ2EwKTtcblxuICByZXR1cm4ge1xuICAgIHBvc2l0aW9uOiBjcml0aWNhbGx5RGFtcGVkUG9zaXRpb24sXG4gICAgdmVsb2NpdHk6IGNyaXRpY2FsbHlEYW1wZWRWZWxvY2l0eSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuZGVyRGFtcGVkU3ByaW5nQ2FsY3VsYXRpb25zKFxuICBhbmltYXRpb246IElubmVyU3ByaW5nQW5pbWF0aW9uLFxuICBwcmVjYWxjdWxhdGVkVmFsdWVzOiB7XG4gICAgemV0YTogbnVtYmVyO1xuICAgIHYwOiBudW1iZXI7XG4gICAgeDA6IG51bWJlcjtcbiAgICBvbWVnYTA6IG51bWJlcjtcbiAgICBvbWVnYTE6IG51bWJlcjtcbiAgICB0OiBudW1iZXI7XG4gIH1cbik6IHsgcG9zaXRpb246IG51bWJlcjsgdmVsb2NpdHk6IG51bWJlciB9IHtcbiAgJ3dvcmtsZXQnO1xuICBjb25zdCB7IHRvVmFsdWUsIGN1cnJlbnQsIHZlbG9jaXR5IH0gPSBhbmltYXRpb247XG5cbiAgY29uc3QgeyB6ZXRhLCB0LCBvbWVnYTAsIG9tZWdhMSB9ID0gcHJlY2FsY3VsYXRlZFZhbHVlcztcblxuICBjb25zdCB2MCA9IC12ZWxvY2l0eTtcbiAgY29uc3QgeDAgPSB0b1ZhbHVlIC0gY3VycmVudDtcblxuICBjb25zdCBzaW4xID0gTWF0aC5zaW4ob21lZ2ExICogdCk7XG4gIGNvbnN0IGNvczEgPSBNYXRoLmNvcyhvbWVnYTEgKiB0KTtcblxuICAvLyB1bmRlciBkYW1wZWRcbiAgY29uc3QgdW5kZXJEYW1wZWRFbnZlbG9wZSA9IE1hdGguZXhwKC16ZXRhICogb21lZ2EwICogdCk7XG4gIGNvbnN0IHVuZGVyRGFtcGVkRnJhZzEgPVxuICAgIHVuZGVyRGFtcGVkRW52ZWxvcGUgKlxuICAgIChzaW4xICogKCh2MCArIHpldGEgKiBvbWVnYTAgKiB4MCkgLyBvbWVnYTEpICsgeDAgKiBjb3MxKTtcblxuICBjb25zdCB1bmRlckRhbXBlZFBvc2l0aW9uID0gdG9WYWx1ZSAtIHVuZGVyRGFtcGVkRnJhZzE7XG4gIC8vIFRoaXMgbG9va3MgY3JhenkgLS0gaXQncyBhY3R1YWxseSBqdXN0IHRoZSBkZXJpdmF0aXZlIG9mIHRoZSBvc2NpbGxhdGlvbiBmdW5jdGlvblxuICBjb25zdCB1bmRlckRhbXBlZFZlbG9jaXR5ID1cbiAgICB6ZXRhICogb21lZ2EwICogdW5kZXJEYW1wZWRGcmFnMSAtXG4gICAgdW5kZXJEYW1wZWRFbnZlbG9wZSAqXG4gICAgICAoY29zMSAqICh2MCArIHpldGEgKiBvbWVnYTAgKiB4MCkgLSBvbWVnYTEgKiB4MCAqIHNpbjEpO1xuXG4gIHJldHVybiB7IHBvc2l0aW9uOiB1bmRlckRhbXBlZFBvc2l0aW9uLCB2ZWxvY2l0eTogdW5kZXJEYW1wZWRWZWxvY2l0eSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNBbmltYXRpb25UZXJtaW5hdGluZ0NhbGN1bGF0aW9uKFxuICBhbmltYXRpb246IElubmVyU3ByaW5nQW5pbWF0aW9uLFxuICBjb25maWc6IERlZmF1bHRTcHJpbmdDb25maWdcbik6IHtcbiAgaXNPdmVyc2hvb3Rpbmc6IGJvb2xlYW47XG4gIGlzVmVsb2NpdHk6IGJvb2xlYW47XG4gIGlzRGlzcGxhY2VtZW50OiBib29sZWFuO1xufSB7XG4gICd3b3JrbGV0JztcbiAgY29uc3QgeyB0b1ZhbHVlLCB2ZWxvY2l0eSwgc3RhcnRWYWx1ZSwgY3VycmVudCB9ID0gYW5pbWF0aW9uO1xuXG4gIGNvbnN0IGlzT3ZlcnNob290aW5nID0gY29uZmlnLm92ZXJzaG9vdENsYW1waW5nXG4gICAgPyAoY3VycmVudCA+IHRvVmFsdWUgJiYgc3RhcnRWYWx1ZSA8IHRvVmFsdWUpIHx8XG4gICAgICAoY3VycmVudCA8IHRvVmFsdWUgJiYgc3RhcnRWYWx1ZSA+IHRvVmFsdWUpXG4gICAgOiBmYWxzZTtcblxuICBjb25zdCBpc1ZlbG9jaXR5ID0gTWF0aC5hYnModmVsb2NpdHkpIDwgY29uZmlnLnJlc3RTcGVlZFRocmVzaG9sZDtcbiAgY29uc3QgaXNEaXNwbGFjZW1lbnQgPVxuICAgIE1hdGguYWJzKHRvVmFsdWUgLSBjdXJyZW50KSA8IGNvbmZpZy5yZXN0RGlzcGxhY2VtZW50VGhyZXNob2xkO1xuXG4gIHJldHVybiB7IGlzT3ZlcnNob290aW5nLCBpc1ZlbG9jaXR5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