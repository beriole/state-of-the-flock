1d1c5d88faf6de916728e679c69a1e82
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = useAnimatedProps;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var ReactNativeFeatureFlags = _interopRequireWildcard(require("../../src/private/featureflags/ReactNativeFeatureFlags"));
var _ReactFabricPublicInstanceUtils = require("../ReactNative/ReactFabricPublicInstance/ReactFabricPublicInstanceUtils");
var _useRefEffect = _interopRequireDefault(require("../Utilities/useRefEffect"));
var _AnimatedEvent = require("./AnimatedEvent");
var _NativeAnimatedHelper = _interopRequireDefault(require("./NativeAnimatedHelper"));
var _AnimatedProps = _interopRequireDefault(require("./nodes/AnimatedProps"));
var _react = require("react");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
function useAnimatedProps(props) {
  var _useReducer = (0, _react.useReducer)(function (count) {
      return count + 1;
    }, 0),
    _useReducer2 = (0, _slicedToArray2.default)(_useReducer, 2),
    scheduleUpdate = _useReducer2[1];
  var onUpdateRef = (0, _react.useRef)(null);
  var timerRef = (0, _react.useRef)(null);
  var node = (0, _react.useMemo)(function () {
    return new _AnimatedProps.default(props, function () {
      return onUpdateRef.current == null ? void 0 : onUpdateRef.current();
    });
  }, [props]);
  var useNativePropsInFabric = ReactNativeFeatureFlags.shouldUseSetNativePropsInFabric();
  useAnimatedPropsLifecycle(node);
  var refEffect = (0, _react.useCallback)(function (instance) {
    node.setNativeView(instance);
    onUpdateRef.current = function () {
      if (process.env.NODE_ENV === 'test') {
        return scheduleUpdate();
      }
      var isFabricNode = isFabricInstance(instance);
      if (node.__isNative) {
        if (isFabricNode) {
          scheduleUpdate();
        }
        return;
      }
      if (typeof instance !== 'object' || typeof (instance == null ? void 0 : instance.setNativeProps) !== 'function') {
        return scheduleUpdate();
      }
      if (!isFabricNode) {
        return instance.setNativeProps(node.__getAnimatedValue());
      }
      if (!useNativePropsInFabric) {
        return scheduleUpdate();
      }
      instance.setNativeProps(node.__getAnimatedValue());
      if (timerRef.current != null) {
        clearTimeout(timerRef.current);
      }
      timerRef.current = setTimeout(function () {
        timerRef.current = null;
        scheduleUpdate();
      }, 48);
    };
    var target = getEventTarget(instance);
    var events = [];
    for (var propName in props) {
      var propValue = props[propName];
      if (propValue instanceof _AnimatedEvent.AnimatedEvent && propValue.__isNative) {
        propValue.__attach(target, propName);
        events.push([propName, propValue]);
      }
    }
    return function () {
      onUpdateRef.current = null;
      for (var _ref of events) {
        var _ref2 = (0, _slicedToArray2.default)(_ref, 2);
        var _propName = _ref2[0];
        var _propValue = _ref2[1];
        _propValue.__detach(target, _propName);
      }
    };
  }, [props, node, useNativePropsInFabric]);
  var callbackRef = (0, _useRefEffect.default)(refEffect);
  return [reduceAnimatedProps(node), callbackRef];
}
function reduceAnimatedProps(node) {
  return Object.assign({}, node.__getValue(), {
    collapsable: false
  });
}
function useAnimatedPropsLifecycle(node) {
  var prevNodeRef = (0, _react.useRef)(null);
  var isUnmountingRef = (0, _react.useRef)(false);
  (0, _react.useEffect)(function () {
    _NativeAnimatedHelper.default.API.flushQueue();
  });
  (0, _react.useLayoutEffect)(function () {
    isUnmountingRef.current = false;
    return function () {
      isUnmountingRef.current = true;
    };
  }, []);
  (0, _react.useLayoutEffect)(function () {
    node.__attach();
    if (prevNodeRef.current != null) {
      var prevNode = prevNodeRef.current;
      prevNode.__restoreDefaultValues();
      prevNode.__detach();
      prevNodeRef.current = null;
    }
    return function () {
      if (isUnmountingRef.current) {
        node.__detach();
      } else {
        prevNodeRef.current = node;
      }
    };
  }, [node]);
}
function getEventTarget(instance) {
  return typeof instance === 'object' && typeof (instance == null ? void 0 : instance.getScrollableNode) === 'function' ? instance.getScrollableNode() : instance;
}
function isFabricInstance(instance) {
  var _instance$getScrollRe;
  return (0, _ReactFabricPublicInstanceUtils.isPublicInstance)(instance) || (0, _ReactFabricPublicInstanceUtils.isPublicInstance)(instance == null || instance.getNativeScrollRef == null ? void 0 : instance.getNativeScrollRef()) || (0, _ReactFabricPublicInstanceUtils.isPublicInstance)(instance == null || instance.getScrollResponder == null || (_instance$getScrollRe = instance.getScrollResponder()) == null || _instance$getScrollRe.getNativeScrollRef == null ? void 0 : _instance$getScrollRe.getNativeScrollRef());
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmYXVsdCIsInVzZUFuaW1hdGVkUHJvcHMiLCJfc2xpY2VkVG9BcnJheTIiLCJSZWFjdE5hdGl2ZUZlYXR1cmVGbGFncyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX1JlYWN0RmFicmljUHVibGljSW5zdGFuY2VVdGlscyIsIl91c2VSZWZFZmZlY3QiLCJfQW5pbWF0ZWRFdmVudCIsIl9OYXRpdmVBbmltYXRlZEhlbHBlciIsIl9BbmltYXRlZFByb3BzIiwiX3JlYWN0IiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiaGFzIiwiZ2V0Iiwic2V0IiwiX3QiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJwcm9wcyIsIl91c2VSZWR1Y2VyIiwidXNlUmVkdWNlciIsImNvdW50IiwiX3VzZVJlZHVjZXIyIiwic2NoZWR1bGVVcGRhdGUiLCJvblVwZGF0ZVJlZiIsInVzZVJlZiIsInRpbWVyUmVmIiwibm9kZSIsInVzZU1lbW8iLCJBbmltYXRlZFByb3BzIiwiY3VycmVudCIsInVzZU5hdGl2ZVByb3BzSW5GYWJyaWMiLCJzaG91bGRVc2VTZXROYXRpdmVQcm9wc0luRmFicmljIiwidXNlQW5pbWF0ZWRQcm9wc0xpZmVjeWNsZSIsInJlZkVmZmVjdCIsInVzZUNhbGxiYWNrIiwiaW5zdGFuY2UiLCJzZXROYXRpdmVWaWV3IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiaXNGYWJyaWNOb2RlIiwiaXNGYWJyaWNJbnN0YW5jZSIsIl9faXNOYXRpdmUiLCJzZXROYXRpdmVQcm9wcyIsIl9fZ2V0QW5pbWF0ZWRWYWx1ZSIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJ0YXJnZXQiLCJnZXRFdmVudFRhcmdldCIsImV2ZW50cyIsInByb3BOYW1lIiwicHJvcFZhbHVlIiwiQW5pbWF0ZWRFdmVudCIsIl9fYXR0YWNoIiwicHVzaCIsIl9yZWYiLCJfcmVmMiIsIl9fZGV0YWNoIiwiY2FsbGJhY2tSZWYiLCJ1c2VSZWZFZmZlY3QiLCJyZWR1Y2VBbmltYXRlZFByb3BzIiwiYXNzaWduIiwiX19nZXRWYWx1ZSIsImNvbGxhcHNhYmxlIiwicHJldk5vZGVSZWYiLCJpc1VubW91bnRpbmdSZWYiLCJ1c2VFZmZlY3QiLCJOYXRpdmVBbmltYXRlZEhlbHBlciIsIkFQSSIsImZsdXNoUXVldWUiLCJ1c2VMYXlvdXRFZmZlY3QiLCJwcmV2Tm9kZSIsIl9fcmVzdG9yZURlZmF1bHRWYWx1ZXMiLCJnZXRTY3JvbGxhYmxlTm9kZSIsIl9pbnN0YW5jZSRnZXRTY3JvbGxSZSIsImlzRmFicmljUHVibGljSW5zdGFuY2UiLCJnZXROYXRpdmVTY3JvbGxSZWYiLCJnZXRTY3JvbGxSZXNwb25kZXIiXSwic291cmNlcyI6WyJ1c2VBbmltYXRlZFByb3BzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvdyBzdHJpY3QtbG9jYWxcbiAqIEBmb3JtYXRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCAqIGFzIFJlYWN0TmF0aXZlRmVhdHVyZUZsYWdzIGZyb20gJy4uLy4uL3NyYy9wcml2YXRlL2ZlYXR1cmVmbGFncy9SZWFjdE5hdGl2ZUZlYXR1cmVGbGFncyc7XG5pbXBvcnQge2lzUHVibGljSW5zdGFuY2UgYXMgaXNGYWJyaWNQdWJsaWNJbnN0YW5jZX0gZnJvbSAnLi4vUmVhY3ROYXRpdmUvUmVhY3RGYWJyaWNQdWJsaWNJbnN0YW5jZS9SZWFjdEZhYnJpY1B1YmxpY0luc3RhbmNlVXRpbHMnO1xuaW1wb3J0IHVzZVJlZkVmZmVjdCBmcm9tICcuLi9VdGlsaXRpZXMvdXNlUmVmRWZmZWN0JztcbmltcG9ydCB7QW5pbWF0ZWRFdmVudH0gZnJvbSAnLi9BbmltYXRlZEV2ZW50JztcbmltcG9ydCBOYXRpdmVBbmltYXRlZEhlbHBlciBmcm9tICcuL05hdGl2ZUFuaW1hdGVkSGVscGVyJztcbmltcG9ydCBBbmltYXRlZFByb3BzIGZyb20gJy4vbm9kZXMvQW5pbWF0ZWRQcm9wcyc7XG5pbXBvcnQge1xuICB1c2VDYWxsYmFjayxcbiAgdXNlRWZmZWN0LFxuICB1c2VMYXlvdXRFZmZlY3QsXG4gIHVzZU1lbW8sXG4gIHVzZVJlZHVjZXIsXG4gIHVzZVJlZixcbn0gZnJvbSAncmVhY3QnO1xuXG50eXBlIFJlZHVjZWRQcm9wczxUUHJvcHM+ID0ge1xuICAuLi5UUHJvcHMsXG4gIGNvbGxhcHNhYmxlOiBib29sZWFuLFxuICAuLi5cbn07XG50eXBlIENhbGxiYWNrUmVmPFQ+ID0gVCA9PiBtaXhlZDtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlQW5pbWF0ZWRQcm9wczxUUHJvcHM6IHsuLi59LCBUSW5zdGFuY2U+KFxuICBwcm9wczogVFByb3BzLFxuKTogW1JlZHVjZWRQcm9wczxUUHJvcHM+LCBDYWxsYmFja1JlZjxUSW5zdGFuY2UgfCBudWxsPl0ge1xuICBjb25zdCBbLCBzY2hlZHVsZVVwZGF0ZV0gPSB1c2VSZWR1Y2VyPG51bWJlciwgdm9pZD4oY291bnQgPT4gY291bnQgKyAxLCAwKTtcbiAgY29uc3Qgb25VcGRhdGVSZWYgPSB1c2VSZWY8PygpID0+IHZvaWQ+KG51bGwpO1xuICBjb25zdCB0aW1lclJlZiA9IHVzZVJlZjxUaW1lb3V0SUQgfCBudWxsPihudWxsKTtcblxuICAvLyBUT0RPOiBPbmx5IGludmFsaWRhdGUgYG5vZGVgIGlmIGFuaW1hdGVkIHByb3BzIG9yIGBzdHlsZWAgY2hhbmdlLiBJbiB0aGVcbiAgLy8gcHJldmlvdXMgaW1wbGVtZW50YXRpb24sIHdlIHBlcm1pdHRlZCBgc3R5bGVgIHRvIG92ZXJyaWRlIHByb3BzIHdpdGggdGhlXG4gIC8vIHNhbWUgbmFtZSBwcm9wZXJ0eSBuYW1lIGFzIHN0eWxlcywgc28gd2UgY2FuIHByb2JhYmx5IGNvbnRpbnVlIGRvaW5nIHRoYXQuXG4gIC8vIFRoZSBvcmRlcmluZyBvZiBvdGhlciBwcm9wcyAqc2hvdWxkKiBub3QgbWF0dGVyLlxuICBjb25zdCBub2RlID0gdXNlTWVtbyhcbiAgICAoKSA9PiBuZXcgQW5pbWF0ZWRQcm9wcyhwcm9wcywgKCkgPT4gb25VcGRhdGVSZWYuY3VycmVudD8uKCkpLFxuICAgIFtwcm9wc10sXG4gICk7XG4gIGNvbnN0IHVzZU5hdGl2ZVByb3BzSW5GYWJyaWMgPVxuICAgIFJlYWN0TmF0aXZlRmVhdHVyZUZsYWdzLnNob3VsZFVzZVNldE5hdGl2ZVByb3BzSW5GYWJyaWMoKTtcbiAgdXNlQW5pbWF0ZWRQcm9wc0xpZmVjeWNsZShub2RlKTtcblxuICAvLyBUT0RPOiBUaGlzIFwiZWZmZWN0XCIgZG9lcyB0aHJlZSB0aGluZ3M6XG4gIC8vXG4gIC8vICAgMSkgQ2FsbCBgc2V0TmF0aXZlVmlld2AuXG4gIC8vICAgMikgVXBkYXRlIGBvblVwZGF0ZVJlZmAuXG4gIC8vICAgMykgVXBkYXRlIGxpc3RlbmVycyBmb3IgYEFuaW1hdGVkRXZlbnRgIHByb3BzLlxuICAvL1xuICAvLyBJZGVhbGx5LCBlYWNoIG9mIHRoZXNlIHdvdWxkIGJlIHNlcGFyYXRlIFwiZWZmZWN0c1wiIHNvIHRoYXQgdGhleSBhcmUgbm90XG4gIC8vIHVubmVjZXNzYXJpbHkgcmUtcnVuIHdoZW4gaXJyZWxldmFudCBkZXBlbmRlbmNpZXMgY2hhbmdlLiBGb3IgZXhhbXBsZSwgd2VcbiAgLy8gc2hvdWxkIGJlIGFibGUgdG8gaG9pc3QgYWxsIGBBbmltYXRlZEV2ZW50YCBwcm9wcyBhbmQgb25seSBkbyAjMyBpZiBlaXRoZXJcbiAgLy8gdGhlIGBBbmltYXRlZEV2ZW50YCBwcm9wcyBjaGFuZ2Ugb3IgYGluc3RhbmNlYCBjaGFuZ2VzLlxuICAvL1xuICAvLyBCdXQgdGhlcmUgaXMgbm8gd2F5IHRvIHRyYW5zcGFyZW50bHkgY29tcG9zZSB0aHJlZSBzZXBhcmF0ZSBjYWxsYmFjayByZWZzLFxuICAvLyBzbyB3ZSBqdXN0IGNvbWJpbmUgdGhlbSBhbGwgaW50byBvbmUgZm9yIG5vdy5cbiAgY29uc3QgcmVmRWZmZWN0ID0gdXNlQ2FsbGJhY2soXG4gICAgKGluc3RhbmNlOiBUSW5zdGFuY2UpID0+IHtcbiAgICAgIC8vIE5PVEU6IFRoaXMgbWF5IGJlIGNhbGxlZCBtb3JlIG9mdGVuIHRoYW4gbmVjZXNzYXJ5IChlLmcuIHdoZW4gYHByb3BzYFxuICAgICAgLy8gY2hhbmdlcyksIGJ1dCBgc2V0TmF0aXZlVmlld2AgYWxyZWFkeSBvcHRpbWl6ZXMgZm9yIHRoYXQuXG4gICAgICBub2RlLnNldE5hdGl2ZVZpZXcoaW5zdGFuY2UpO1xuXG4gICAgICAvLyBOT1RFOiBXaGVuIHVzaW5nIHRoZSBKUyBhbmltYXRpb24gZHJpdmVyLCB0aGlzIGNhbGxiYWNrIGlzIGNhbGxlZCBvblxuICAgICAgLy8gZXZlcnkgYW5pbWF0aW9uIGZyYW1lLiBXaGVuIHVzaW5nIHRoZSBuYXRpdmUgZHJpdmVyLCB0aGlzIGNhbGxiYWNrIGlzXG4gICAgICAvLyBjYWxsZWQgd2hlbiB0aGUgYW5pbWF0aW9uIGNvbXBsZXRlcy5cbiAgICAgIG9uVXBkYXRlUmVmLmN1cnJlbnQgPSAoKSA9PiB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgMTogdGhpcyBpcyBhIHRlc3QuXG4gICAgICAgICAgLy8gY2FsbCBgc2NoZWR1bGVVcGRhdGVgIHRvIGJ5cGFzcyB1c2Ugb2Ygc2V0TmF0aXZlUHJvcHMuXG4gICAgICAgICAgcmV0dXJuIHNjaGVkdWxlVXBkYXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc0ZhYnJpY05vZGUgPSBpc0ZhYnJpY0luc3RhbmNlKGluc3RhbmNlKTtcbiAgICAgICAgaWYgKG5vZGUuX19pc05hdGl2ZSkge1xuICAgICAgICAgIC8vIENoZWNrIDI6IHRoaXMgaXMgYW4gYW5pbWF0aW9uIGRyaXZlbiBieSBuYXRpdmUuXG4gICAgICAgICAgLy8gSW4gbmF0aXZlIGRyaXZlbiBhbmltYXRpb25zLCB0aGlzIGNhbGxiYWNrIGlzIG9ubHkgY2FsbGVkIG9uY2UgdGhlIGFuaW1hdGlvbiBjb21wbGV0ZXMuXG4gICAgICAgICAgaWYgKGlzRmFicmljTm9kZSkge1xuICAgICAgICAgICAgLy8gQ2FsbCBgc2NoZWR1bGVVcGRhdGVgIHRvIHN5bmNocm9uaXNlIEZpYmVyIGFuZCBTaGFkb3cgdHJlZS5cbiAgICAgICAgICAgIC8vIE11c3Qgbm90IGJlIGNhbGxlZCBpbiBQYXBlci5cbiAgICAgICAgICAgIHNjaGVkdWxlVXBkYXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgaW5zdGFuY2UgIT09ICdvYmplY3QnIHx8XG4gICAgICAgICAgdHlwZW9mIGluc3RhbmNlPy5zZXROYXRpdmVQcm9wcyAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAvLyBDaGVjayAzOiB0aGUgaW5zdGFuY2UgZG9lcyBub3Qgc3VwcG9ydCBzZXROYXRpdmVQcm9wcy4gQ2FsbCBgc2NoZWR1bGVVcGRhdGVgLlxuICAgICAgICAgIHJldHVybiBzY2hlZHVsZVVwZGF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc0ZhYnJpY05vZGUpIHtcbiAgICAgICAgICAvLyBDaGVjayA0OiB0aGlzIGlzIGEgcGFwZXIgaW5zdGFuY2UsIGNhbGwgc2V0TmF0aXZlUHJvcHMuXG4gICAgICAgICAgLy8gJEZsb3dJZ25vcmVbbm90LWEtZnVuY3Rpb25dIC0gQXNzdW1lIGl0J3Mgc3RpbGwgYSBmdW5jdGlvbi5cbiAgICAgICAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS11c2VdXG4gICAgICAgICAgcmV0dXJuIGluc3RhbmNlLnNldE5hdGl2ZVByb3BzKG5vZGUuX19nZXRBbmltYXRlZFZhbHVlKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF1c2VOYXRpdmVQcm9wc0luRmFicmljKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgNTogc2V0TmF0aXZlUHJvcHMgYXJlIGRpc2FibGVkLlxuICAgICAgICAgIHJldHVybiBzY2hlZHVsZVVwZGF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhpcyBpcyBhIEZhYnJpYyBpbnN0YW5jZSBhbmQgc2V0TmF0aXZlUHJvcHMgaXMgc3VwcG9ydGVkLlxuXG4gICAgICAgIC8vICRGbG93SWdub3JlW25vdC1hLWZ1bmN0aW9uXSAtIEFzc3VtZSBpdCdzIHN0aWxsIGEgZnVuY3Rpb24uXG4gICAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXVzZV1cbiAgICAgICAgaW5zdGFuY2Uuc2V0TmF0aXZlUHJvcHMobm9kZS5fX2dldEFuaW1hdGVkVmFsdWUoKSk7XG5cbiAgICAgICAgLy8gS2VlcGluZyBzdGF0ZSBvZiBGaWJlciB0cmVlIGFuZCBTaGFkb3cgdHJlZSBpbiBzeW5jLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGlzIGlzIGRvbmUgYnkgY2FsbGluZyBgc2NoZWR1bGVVcGRhdGVgIHdoaWNoIHdpbGwgdHJpZ2dlciBhIGNvbW1pdC5cbiAgICAgICAgLy8gSG93ZXZlciwgUmVhY3QgY29tbWl0IGlzIG5vdCBmYXN0IGVub3VnaCB0byBkcml2ZSBhbmltYXRpb25zLlxuICAgICAgICAvLyBUaGlzIGlzIHdoZXJlIHNldE5hdGl2ZVByb3BzIGNvbWVzIGluIGhhbmR5IGJ1dCB0aGUgc3RhdGUgYmV0d2VlblxuICAgICAgICAvLyBGaWJlciB0cmVlIGFuZCBTaGFkb3cgdHJlZSBuZWVkcyB0byBiZSBrZXB0IGluIHN5bmMuXG4gICAgICAgIC8vIFRoZSBnb2FsIGlzIHRvIGNhbGwgYHNjaGVkdWxlVXBkYXRlYCBhcyBsaXR0bGUgYXMgcG9zc2libGUgdG8gbWFpbnRhaW5cbiAgICAgICAgLy8gcGVyZm9ybWFuY2UgYnV0IGZyZXF1ZW50bHkgZW5vdWdoIHRvIGtlZXAgc3RhdGUgaW4gc3luYy5cbiAgICAgICAgLy8gRGVib3VuY2UgaXMgc2V0IHRvIDQ4bXMsIHdoaWNoIGlzIDMgKiB0aGUgZHVyYXRpb24gb2YgYSBmcmFtZS5cbiAgICAgICAgLy8gMyBmcmFtZXMgd2FzIHRoZSBoaWdoZXN0IHZhbHVlIHdoZXJlIGZsaWNrZXJpbmcgc3RhdGUgd2FzIG5vdCBvYnNlcnZlZC5cbiAgICAgICAgaWYgKHRpbWVyUmVmLmN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lclJlZi5jdXJyZW50KTtcbiAgICAgICAgfVxuICAgICAgICB0aW1lclJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGltZXJSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgICAgc2NoZWR1bGVVcGRhdGUoKTtcbiAgICAgICAgfSwgNDgpO1xuICAgICAgfTtcblxuICAgICAgY29uc3QgdGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoaW5zdGFuY2UpO1xuICAgICAgY29uc3QgZXZlbnRzID0gW107XG5cbiAgICAgIGZvciAoY29uc3QgcHJvcE5hbWUgaW4gcHJvcHMpIHtcbiAgICAgICAgLy8gJEZsb3dGaXhNZVtpbnZhbGlkLWNvbXB1dGVkLXByb3BdXG4gICAgICAgIGNvbnN0IHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAgICAgICAgaWYgKHByb3BWYWx1ZSBpbnN0YW5jZW9mIEFuaW1hdGVkRXZlbnQgJiYgcHJvcFZhbHVlLl9faXNOYXRpdmUpIHtcbiAgICAgICAgICBwcm9wVmFsdWUuX19hdHRhY2godGFyZ2V0LCBwcm9wTmFtZSk7XG4gICAgICAgICAgZXZlbnRzLnB1c2goW3Byb3BOYW1lLCBwcm9wVmFsdWVdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBvblVwZGF0ZVJlZi5jdXJyZW50ID0gbnVsbDtcblxuICAgICAgICBmb3IgKGNvbnN0IFtwcm9wTmFtZSwgcHJvcFZhbHVlXSBvZiBldmVudHMpIHtcbiAgICAgICAgICBwcm9wVmFsdWUuX19kZXRhY2godGFyZ2V0LCBwcm9wTmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSxcbiAgICBbcHJvcHMsIG5vZGUsIHVzZU5hdGl2ZVByb3BzSW5GYWJyaWNdLFxuICApO1xuICBjb25zdCBjYWxsYmFja1JlZiA9IHVzZVJlZkVmZmVjdDxUSW5zdGFuY2U+KHJlZkVmZmVjdCk7XG5cbiAgcmV0dXJuIFtyZWR1Y2VBbmltYXRlZFByb3BzPFRQcm9wcz4obm9kZSksIGNhbGxiYWNrUmVmXTtcbn1cblxuZnVuY3Rpb24gcmVkdWNlQW5pbWF0ZWRQcm9wczxUUHJvcHM+KFxuICBub2RlOiBBbmltYXRlZFByb3BzLFxuKTogUmVkdWNlZFByb3BzPFRQcm9wcz4ge1xuICAvLyBGb3JjZSBgY29sbGFwc2FibGVgIHRvIGJlIGZhbHNlIHNvIHRoYXQgdGhlIG5hdGl2ZSB2aWV3IGlzIG5vdCBmbGF0dGVuZWQuXG4gIC8vIEZsYXR0ZW5lZCB2aWV3cyBjYW5ub3QgYmUgYWNjdXJhdGVseSByZWZlcmVuY2VkIGJ5IHRoZSBuYXRpdmUgZHJpdmVyLlxuICByZXR1cm4ge1xuICAgIC4uLm5vZGUuX19nZXRWYWx1ZSgpLFxuICAgIGNvbGxhcHNhYmxlOiBmYWxzZSxcbiAgfTtcbn1cblxuLyoqXG4gKiBNYW5hZ2VzIHRoZSBsaWZlY3ljbGUgb2YgdGhlIHN1cHBsaWVkIGBBbmltYXRlZFByb3BzYCBieSBpbnZva2luZyBgX19hdHRhY2hgXG4gKiBhbmQgYF9fZGV0YWNoYC4gSG93ZXZlciwgdGhpcyBpcyBtb3JlIGNvbXBsaWNhdGVkIGJlY2F1c2UgYEFuaW1hdGVkUHJvcHNgXG4gKiB1c2VzIHJlZmVyZW5jZSBjb3VudGluZyB0byBkZXRlcm1pbmUgd2hlbiB0byByZWN1cnNpdmVseSBkZXRhY2ggaXRzIGNoaWxkcmVuXG4gKiBub2Rlcy4gU28gaW4gb3JkZXIgdG8gb3B0aW1pemUgdGhpcywgd2UgYXZvaWQgZGV0YWNoaW5nIHVudGlsIHRoZSBuZXh0IGF0dGFjaFxuICogdW5sZXNzIHdlIGFyZSB1bm1vdW50aW5nLlxuICovXG5mdW5jdGlvbiB1c2VBbmltYXRlZFByb3BzTGlmZWN5Y2xlKG5vZGU6IEFuaW1hdGVkUHJvcHMpOiB2b2lkIHtcbiAgY29uc3QgcHJldk5vZGVSZWYgPSB1c2VSZWY8P0FuaW1hdGVkUHJvcHM+KG51bGwpO1xuICBjb25zdCBpc1VubW91bnRpbmdSZWYgPSB1c2VSZWY8Ym9vbGVhbj4oZmFsc2UpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gSXQgaXMgb2sgZm9yIG11bHRpcGxlIGNvbXBvbmVudHMgdG8gY2FsbCBgZmx1c2hRdWV1ZWAgYmVjYXVzZSBpdCBub29wc1xuICAgIC8vIGlmIHRoZSBxdWV1ZSBpcyBlbXB0eS4gV2hlbiBtdWx0aXBsZSBhbmltYXRlZCBjb21wb25lbnRzIGFyZSBtb3VudGVkIGF0XG4gICAgLy8gdGhlIHNhbWUgdGltZS4gT25seSBmaXJzdCBjb21wb25lbnQgZmx1c2hlcyB0aGUgcXVldWUgYW5kIHRoZSBvdGhlcnMgd2lsbCBub29wLlxuICAgIE5hdGl2ZUFuaW1hdGVkSGVscGVyLkFQSS5mbHVzaFF1ZXVlKCk7XG4gIH0pO1xuXG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaXNVbm1vdW50aW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaXNVbm1vdW50aW5nUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIG5vZGUuX19hdHRhY2goKTtcbiAgICBpZiAocHJldk5vZGVSZWYuY3VycmVudCAhPSBudWxsKSB7XG4gICAgICBjb25zdCBwcmV2Tm9kZSA9IHByZXZOb2RlUmVmLmN1cnJlbnQ7XG4gICAgICAvLyBUT0RPOiBTdG9wIHJlc3RvcmluZyBkZWZhdWx0IHZhbHVlcyAodW5sZXNzIGByZXNldGAgaXMgY2FsbGVkKS5cbiAgICAgIHByZXZOb2RlLl9fcmVzdG9yZURlZmF1bHRWYWx1ZXMoKTtcbiAgICAgIHByZXZOb2RlLl9fZGV0YWNoKCk7XG4gICAgICBwcmV2Tm9kZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChpc1VubW91bnRpbmdSZWYuY3VycmVudCkge1xuICAgICAgICAvLyBOT1RFOiBEbyBub3QgcmVzdG9yZSBkZWZhdWx0IHZhbHVlcyBvbiB1bm1vdW50LCBzZWUgRDE4MTk3NzM1LlxuICAgICAgICBub2RlLl9fZGV0YWNoKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcmV2Tm9kZVJlZi5jdXJyZW50ID0gbm9kZTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbbm9kZV0pO1xufVxuXG5mdW5jdGlvbiBnZXRFdmVudFRhcmdldDxUSW5zdGFuY2U+KGluc3RhbmNlOiBUSW5zdGFuY2UpOiBUSW5zdGFuY2Uge1xuICByZXR1cm4gdHlwZW9mIGluc3RhbmNlID09PSAnb2JqZWN0JyAmJlxuICAgIHR5cGVvZiBpbnN0YW5jZT8uZ2V0U2Nyb2xsYWJsZU5vZGUgPT09ICdmdW5jdGlvbidcbiAgICA/IC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXVzZV0gLSBMZWdhY3kgaW5zdGFuY2UgYXNzdW1wdGlvbnMuXG4gICAgICBpbnN0YW5jZS5nZXRTY3JvbGxhYmxlTm9kZSgpXG4gICAgOiBpbnN0YW5jZTtcbn1cblxuLy8gJEZsb3dGaXhNZVt1bmNsZWFyLXR5cGVdIC0gTGVnYWN5IGluc3RhbmNlIGFzc3VtcHRpb25zLlxuZnVuY3Rpb24gaXNGYWJyaWNJbnN0YW5jZShpbnN0YW5jZTogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiAoXG4gICAgaXNGYWJyaWNQdWJsaWNJbnN0YW5jZShpbnN0YW5jZSkgfHxcbiAgICAvLyBTb21lIGNvbXBvbmVudHMgaGF2ZSBhIHNldE5hdGl2ZVByb3BzIGZ1bmN0aW9uIGJ1dCBhcmVuJ3QgYSBob3N0IGNvbXBvbmVudFxuICAgIC8vIHN1Y2ggYXMgbGlzdHMgbGlrZSBGbGF0TGlzdCBhbmQgU2VjdGlvbkxpc3QuIFRoZXNlIHNob3VsZCBhbHNvIHVzZVxuICAgIC8vIGZvcmNlVXBkYXRlIGluIEZhYnJpYyBzaW5jZSBzZXROYXRpdmVQcm9wcyBkb2Vzbid0IGV4aXN0IG9uIHRoZSB1bmRlcmx5aW5nXG4gICAgLy8gaG9zdCBjb21wb25lbnQuIFRoaXMgY3JhenkgaGFjayBpcyBlc3NlbnRpYWxseSBzcGVjaWFsIGNhc2luZyB0aG9zZSBsaXN0cyBhbmRcbiAgICAvLyBTY3JvbGxWaWV3IGl0c2VsZiB0byB1c2UgZm9yY2VVcGRhdGUgaW4gRmFicmljLlxuICAgIC8vIElmIHRoZXNlIGNvbXBvbmVudHMgZW5kIHVwIHVzaW5nIGZvcndhcmRSZWYgdGhlbiB0aGVzZSBoYWNrcyBjYW4gZ28gYXdheVxuICAgIC8vIGFzIGluc3RhbmNlIHdvdWxkIGFjdHVhbGx5IGJlIHRoZSB1bmRlcmx5aW5nIGhvc3QgY29tcG9uZW50IGFuZCB0aGUgYWJvdmUgY2hlY2tcbiAgICAvLyB3b3VsZCBiZSBzdWZmaWNpZW50LlxuICAgIGlzRmFicmljUHVibGljSW5zdGFuY2UoaW5zdGFuY2U/LmdldE5hdGl2ZVNjcm9sbFJlZj8uKCkpIHx8XG4gICAgaXNGYWJyaWNQdWJsaWNJbnN0YW5jZShcbiAgICAgIGluc3RhbmNlPy5nZXRTY3JvbGxSZXNwb25kZXI/LigpPy5nZXROYXRpdmVTY3JvbGxSZWY/LigpLFxuICAgIClcbiAgKTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBVUEsWUFBWTs7QUFBQyxJ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