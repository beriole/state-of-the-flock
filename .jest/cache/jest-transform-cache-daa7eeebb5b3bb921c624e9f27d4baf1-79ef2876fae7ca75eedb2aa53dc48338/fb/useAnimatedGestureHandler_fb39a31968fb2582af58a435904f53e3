5f2ed250efb0c449f4808e93c129ca8d
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useAnimatedGestureHandler = useAnimatedGestureHandler;
var _useHandler2 = require("./useHandler");
var _useEvent = require("./useEvent");
var EVENT_TYPE = {
  UNDETERMINED: 0,
  FAILED: 1,
  BEGAN: 2,
  CANCELLED: 3,
  ACTIVE: 4,
  END: 5
};
function useAnimatedGestureHandler(handlers, dependencies) {
  var _useHandler = (0, _useHandler2.useHandler)(handlers, dependencies),
    context = _useHandler.context,
    doDependenciesDiffer = _useHandler.doDependenciesDiffer,
    useWeb = _useHandler.useWeb;
  var handler = function handler(e) {
    'worklet';

    var event = useWeb ? e.nativeEvent : e;
    if (event.state === EVENT_TYPE.BEGAN && handlers.onStart) {
      handlers.onStart(event, context);
    }
    if (event.state === EVENT_TYPE.ACTIVE && handlers.onActive) {
      handlers.onActive(event, context);
    }
    if (event.oldState === EVENT_TYPE.ACTIVE && event.state === EVENT_TYPE.END && handlers.onEnd) {
      handlers.onEnd(event, context);
    }
    if (event.oldState === EVENT_TYPE.BEGAN && event.state === EVENT_TYPE.FAILED && handlers.onFail) {
      handlers.onFail(event, context);
    }
    if (event.oldState === EVENT_TYPE.ACTIVE && event.state === EVENT_TYPE.CANCELLED && handlers.onCancel) {
      handlers.onCancel(event, context);
    }
    if ((event.oldState === EVENT_TYPE.BEGAN || event.oldState === EVENT_TYPE.ACTIVE) && event.state !== EVENT_TYPE.BEGAN && event.state !== EVENT_TYPE.ACTIVE && handlers.onFinish) {
      handlers.onFinish(event, context, event.state === EVENT_TYPE.CANCELLED || event.state === EVENT_TYPE.FAILED);
    }
  };
  if (useWeb) {
    return handler;
  }
  return (0, _useEvent.useEvent)(handler, ['onGestureHandlerStateChange', 'onGestureHandlerEvent'], doDependenciesDiffer);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInVzZUFuaW1hdGVkR2VzdHVyZUhhbmRsZXIiLCJfdXNlSGFuZGxlcjIiLCJyZXF1aXJlIiwiX3VzZUV2ZW50IiwiRVZFTlRfVFlQRSIsIlVOREVURVJNSU5FRCIsIkZBSUxFRCIsIkJFR0FOIiwiQ0FOQ0VMTEVEIiwiQUNUSVZFIiwiRU5EIiwiaGFuZGxlcnMiLCJkZXBlbmRlbmNpZXMiLCJfdXNlSGFuZGxlciIsInVzZUhhbmRsZXIiLCJjb250ZXh0IiwiZG9EZXBlbmRlbmNpZXNEaWZmZXIiLCJ1c2VXZWIiLCJoYW5kbGVyIiwiZSIsImV2ZW50IiwibmF0aXZlRXZlbnQiLCJzdGF0ZSIsIm9uU3RhcnQiLCJvbkFjdGl2ZSIsIm9sZFN0YXRlIiwib25FbmQiLCJvbkZhaWwiLCJvbkNhbmNlbCIsIm9uRmluaXNoIiwidXNlRXZlbnQiXSwic291cmNlcyI6WyJ1c2VBbmltYXRlZEdlc3R1cmVIYW5kbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbmltcG9ydCB0eXBlIHtcbiAgRGVwZW5kZW5jeUxpc3QsXG4gIE5hdGl2ZUV2ZW50V3JhcHBlcixcbiAgUmVhbmltYXRlZEV2ZW50LFxufSBmcm9tICcuL2NvbW1vblR5cGVzJztcbmltcG9ydCB7IHVzZUhhbmRsZXIgfSBmcm9tICcuL3VzZUhhbmRsZXInO1xuaW1wb3J0IHsgdXNlRXZlbnQgfSBmcm9tICcuL3VzZUV2ZW50JztcblxuY29uc3QgRVZFTlRfVFlQRSA9IHtcbiAgVU5ERVRFUk1JTkVEOiAwLFxuICBGQUlMRUQ6IDEsXG4gIEJFR0FOOiAyLFxuICBDQU5DRUxMRUQ6IDMsXG4gIEFDVElWRTogNCxcbiAgRU5EOiA1LFxufSBhcyBjb25zdDtcblxudHlwZSBTdGF0ZVR5cGUgPSAodHlwZW9mIEVWRU5UX1RZUEUpW2tleW9mIHR5cGVvZiBFVkVOVF9UWVBFXTtcblxuLy8gVGhpcyB0eXBlIGNvbWVzIGZyb20gUmVhY3QgTmF0aXZlIEdlc3R1cmUgSGFuZGxlclxuLy8gaW1wb3J0IHR5cGUgeyBQYW5HZXN0dXJlSGFuZGxlckdlc3R1cmVFdmVudCBhcyBEZWZhdWx0RXZlbnQgfSBmcm9tICdyZWFjdC1uYXRpdmUtZ2VzdHVyZS1oYW5kbGVyJztcbnR5cGUgRGVmYXVsdEV2ZW50ID0ge1xuICBuYXRpdmVFdmVudDoge1xuICAgIHJlYWRvbmx5IGhhbmRsZXJUYWc6IG51bWJlcjtcbiAgICByZWFkb25seSBudW1iZXJPZlBvaW50ZXJzOiBudW1iZXI7XG4gICAgcmVhZG9ubHkgc3RhdGU6ICh0eXBlb2YgRVZFTlRfVFlQRSlba2V5b2YgdHlwZW9mIEVWRU5UX1RZUEVdO1xuICAgIHJlYWRvbmx5IHg6IG51bWJlcjtcbiAgICByZWFkb25seSB5OiBudW1iZXI7XG4gICAgcmVhZG9ubHkgYWJzb2x1dGVYOiBudW1iZXI7XG4gICAgcmVhZG9ubHkgYWJzb2x1dGVZOiBudW1iZXI7XG4gICAgcmVhZG9ubHkgdHJhbnNsYXRpb25YOiBudW1iZXI7XG4gICAgcmVhZG9ubHkgdHJhbnNsYXRpb25ZOiBudW1iZXI7XG4gICAgcmVhZG9ubHkgdmVsb2NpdHlYOiBudW1iZXI7XG4gICAgcmVhZG9ubHkgdmVsb2NpdHlZOiBudW1iZXI7XG4gIH07XG59O1xuXG5pbnRlcmZhY2UgUHJvcHNVc2VkSW5Vc2VBbmltYXRlZEdlc3R1cmVIYW5kbGVyIHtcbiAgaGFuZGxlclRhZz86IG51bWJlcjtcbiAgbnVtYmVyT2ZQb2ludGVycz86IG51bWJlcjtcbiAgc3RhdGU/OiBTdGF0ZVR5cGU7XG4gIG9sZFN0YXRlPzogU3RhdGVUeXBlO1xufVxuXG5leHBvcnQgdHlwZSBHZXN0dXJlSGFuZGxlckV2ZW50PEV2ZW50IGV4dGVuZHMgb2JqZWN0PiA9XG4gIHwgUmVhbmltYXRlZEV2ZW50PEV2ZW50PlxuICB8IEV2ZW50O1xuXG50eXBlIEdlc3R1cmVIYW5kbGVyPFxuICBFdmVudCBleHRlbmRzIE5hdGl2ZUV2ZW50V3JhcHBlcjxQcm9wc1VzZWRJblVzZUFuaW1hdGVkR2VzdHVyZUhhbmRsZXI+LFxuICBDb250ZXh0IGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbj4gPSAoXG4gIGV2ZW50UGF5bG9hZDogUmVhbmltYXRlZEV2ZW50PEV2ZW50PixcbiAgY29udGV4dDogQ29udGV4dCxcbiAgaXNDYW5jZWxlZE9yRmFpbGVkPzogYm9vbGVhblxuKSA9PiB2b2lkO1xuXG5leHBvcnQgaW50ZXJmYWNlIEdlc3R1cmVIYW5kbGVyczxcbiAgRXZlbnQgZXh0ZW5kcyBOYXRpdmVFdmVudFdyYXBwZXI8UHJvcHNVc2VkSW5Vc2VBbmltYXRlZEdlc3R1cmVIYW5kbGVyPixcbiAgQ29udGV4dCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4+IHtcbiAgW2tleTogc3RyaW5nXTogR2VzdHVyZUhhbmRsZXI8RXZlbnQsIENvbnRleHQ+IHwgdW5kZWZpbmVkO1xuICBvblN0YXJ0PzogR2VzdHVyZUhhbmRsZXI8RXZlbnQsIENvbnRleHQ+O1xuICBvbkFjdGl2ZT86IEdlc3R1cmVIYW5kbGVyPEV2ZW50LCBDb250ZXh0PjtcbiAgb25FbmQ/OiBHZXN0dXJlSGFuZGxlcjxFdmVudCwgQ29udGV4dD47XG4gIG9uRmFpbD86IEdlc3R1cmVIYW5kbGVyPEV2ZW50LCBDb250ZXh0PjtcbiAgb25DYW5jZWw/OiBHZXN0dXJlSGFuZGxlcjxFdmVudCwgQ29udGV4dD47XG4gIG9uRmluaXNoPzogR2VzdHVyZUhhbmRsZXI8RXZlbnQsIENvbnRleHQ+O1xufVxuXG4vKipcbiAqIEBkZXByZWNhdGVkIHVzZUFuaW1hdGVkR2VzdHVyZUhhbmRsZXIgaXMgYW4gb2xkIEFQSSB3aGljaCBpcyBubyBsb25nZXIgc3VwcG9ydGVkLlxuICpcbiAqIFBsZWFzZSBjaGVjayBodHRwczovL2RvY3Muc3dtYW5zaW9uLmNvbS9yZWFjdC1uYXRpdmUtZ2VzdHVyZS1oYW5kbGVyL2RvY3MvZ3VpZGVzL3VwZ3JhZGluZy10by0yL1xuICogZm9yIGluZm9ybWF0aW9uIGFib3V0IGhvdyB0byBtaWdyYXRlIHRvIGByZWFjdC1uYXRpdmUtZ2VzdHVyZS1oYW5kbGVyYCB2MlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlQW5pbWF0ZWRHZXN0dXJlSGFuZGxlcjxcbiAgRXZlbnQgZXh0ZW5kcyBOYXRpdmVFdmVudFdyYXBwZXI8UHJvcHNVc2VkSW5Vc2VBbmltYXRlZEdlc3R1cmVIYW5kbGVyPiA9IERlZmF1bHRFdmVudCxcbiAgQ29udGV4dCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbj4oaGFuZGxlcnM6IEdlc3R1cmVIYW5kbGVyczxFdmVudCwgQ29udGV4dD4sIGRlcGVuZGVuY2llcz86IERlcGVuZGVuY3lMaXN0KSB7XG4gIHR5cGUgV2ViT3JOYXRpdmVFdmVudCA9IEV2ZW50IHwgUmVhbmltYXRlZEV2ZW50PEV2ZW50PjtcblxuICBjb25zdCB7IGNvbnRleHQsIGRvRGVwZW5kZW5jaWVzRGlmZmVyLCB1c2VXZWIgfSA9IHVzZUhhbmRsZXI8RXZlbnQsIENvbnRleHQ+KFxuICAgIGhhbmRsZXJzLFxuICAgIGRlcGVuZGVuY2llc1xuICApO1xuICBjb25zdCBoYW5kbGVyID0gKGU6IFdlYk9yTmF0aXZlRXZlbnQpID0+IHtcbiAgICAnd29ya2xldCc7XG4gICAgY29uc3QgZXZlbnQgPSB1c2VXZWJcbiAgICAgID8gLy8gT24gV2ViIHdlIGdldCBldmVudHMgc3RyYWlnaHQgZnJvbSBSZWFjdCBOYXRpdmUgYW5kIHRoZXkgZG9uJ3QgaGF2ZVxuICAgICAgICAvLyB0aGUgYGV2ZW50TmFtZWAgZmllbGQgdGhlcmUuIFRvIHNpbXBsaWZ5IHRoZSB0eXBlcyBoZXJlIHdlIGp1c3RcbiAgICAgICAgLy8gY2FzdCBpdCBhcyB0aGUgZmllbGQgd2FzIGF2YWlsYWJsZS5cbiAgICAgICAgKChlIGFzIEV2ZW50KS5uYXRpdmVFdmVudCBhcyBSZWFuaW1hdGVkRXZlbnQ8RXZlbnQ+KVxuICAgICAgOiAoZSBhcyBSZWFuaW1hdGVkRXZlbnQ8RXZlbnQ+KTtcblxuICAgIGlmIChldmVudC5zdGF0ZSA9PT0gRVZFTlRfVFlQRS5CRUdBTiAmJiBoYW5kbGVycy5vblN0YXJ0KSB7XG4gICAgICBoYW5kbGVycy5vblN0YXJ0KGV2ZW50LCBjb250ZXh0KTtcbiAgICB9XG4gICAgaWYgKGV2ZW50LnN0YXRlID09PSBFVkVOVF9UWVBFLkFDVElWRSAmJiBoYW5kbGVycy5vbkFjdGl2ZSkge1xuICAgICAgaGFuZGxlcnMub25BY3RpdmUoZXZlbnQsIGNvbnRleHQpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBldmVudC5vbGRTdGF0ZSA9PT0gRVZFTlRfVFlQRS5BQ1RJVkUgJiZcbiAgICAgIGV2ZW50LnN0YXRlID09PSBFVkVOVF9UWVBFLkVORCAmJlxuICAgICAgaGFuZGxlcnMub25FbmRcbiAgICApIHtcbiAgICAgIGhhbmRsZXJzLm9uRW5kKGV2ZW50LCBjb250ZXh0KTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgZXZlbnQub2xkU3RhdGUgPT09IEVWRU5UX1RZUEUuQkVHQU4gJiZcbiAgICAgIGV2ZW50LnN0YXRlID09PSBFVkVOVF9UWVBFLkZBSUxFRCAmJlxuICAgICAgaGFuZGxlcnMub25GYWlsXG4gICAgKSB7XG4gICAgICBoYW5kbGVycy5vbkZhaWwoZXZlbnQsIGNvbnRleHQpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBldmVudC5vbGRTdGF0ZSA9PT0gRVZFTlRfVFlQRS5BQ1RJVkUgJiZcbiAgICAgIGV2ZW50LnN0YXRlID09PSBFVkVOVF9UWVBFLkNBTkNFTExFRCAmJlxuICAgICAgaGFuZGxlcnMub25DYW5jZWxcbiAgICApIHtcbiAgICAgIGhhbmRsZXJzLm9uQ2FuY2VsKGV2ZW50LCBjb250ZXh0KTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgKGV2ZW50Lm9sZFN0YXRlID09PSBFVkVOVF9UWVBFLkJFR0FOIHx8XG4gICAgICAgIGV2ZW50Lm9sZFN0YXRlID09PSBFVkVOVF9UWVBFLkFDVElWRSkgJiZcbiAgICAgIGV2ZW50LnN0YXRlICE9PSBFVkVOVF9UWVBFLkJFR0FOICYmXG4gICAgICBldmVudC5zdGF0ZSAhPT0gRVZFTlRfVFlQRS5BQ1RJVkUgJiZcbiAgICAgIGhhbmRsZXJzLm9uRmluaXNoXG4gICAgKSB7XG4gICAgICBoYW5kbGVycy5vbkZpbmlzaChcbiAgICAgICAgZXZlbnQsXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIGV2ZW50LnN0YXRlID09PSBFVkVOVF9UWVBFLkNBTkNFTExFRCB8fFxuICAgICAgICAgIGV2ZW50LnN0YXRlID09PSBFVkVOVF9UWVBFLkZBSUxFRFxuICAgICAgKTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKHVzZVdlYikge1xuICAgIHJldHVybiBoYW5kbGVyO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL3J1bGVzLW9mLWhvb2tzXG4gIHJldHVybiB1c2VFdmVudDxFdmVudD4oXG4gICAgaGFuZGxlcixcbiAgICBbJ29uR2VzdHVyZUhhbmRsZXJTdGF0ZUNoYW5nZScsICdvbkdlc3R1cmVIYW5kbGVyRXZlbnQnXSxcbiAgICBkb0RlcGVuZGVuY2llc0RpZmZlclxuICAgIC8vIFRoaXMgaXMgbm90IGNvcnJlY3QgYnV0IHdlIHdhbnQgdG8gbWFrZSBHSCB0aGluayBpdCByZWNlaXZlcyBhIGZ1bmN0aW9uLlxuICApIGFzIHVua25vd24gYXMgKGU6IEV2ZW50KSA9PiB2b2lkO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUFDQSxNQUFBLENBQUFDLGNBQUEsQ0FBQUMsT0FBQTtFQUFBQyxLQUFBO0FBQUE7QUFBQUQsT0FBQSxDQUFBRSx5QkFBQSxHQUFBQSx5QkFBQTtBQU1iLElBQUFDLFlBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLFNBQUEsR0FBQUQsT0FBQTtBQUVBLElBQU1FLFVBQVUsR0FBRztFQUNqQkMsWUFBWSxFQUFFLENBQUM7RUFDZkMsTUFBTSxFQUFFLENBQUM7RUFDVEMsS0FB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