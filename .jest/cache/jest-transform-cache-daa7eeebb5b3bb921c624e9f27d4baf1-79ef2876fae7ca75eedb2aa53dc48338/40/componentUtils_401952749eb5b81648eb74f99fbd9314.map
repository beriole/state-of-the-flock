{"version":3,"names":["Object","defineProperty","exports","value","getProcessedConfig","getReducedMotionFromConfig","handleExitingAnimation","handleLayoutTransition","maybeModifyStyleForKeyframe","saveSnapshot","setElementAnimation","_config","require","_Easing","_createAnimation","_domUtils","_jsReanimated","_commonTypes","_commonTypes2","_componentStyle","_animationBuilder","_ReducedMotion","_Curved","_Easing2","getEasingFromConfig","config","easingV","getEasingByName","easingName","EasingNameSymbol","WebEasings","console","warn","getRandomDelay","maxDelay","arguments","length","undefined","Math","floor","random","getDelayFromConfig","shouldRandomizeDelay","randomizeDelay","delay","delayV","reduceMotionV","ReducedMotionManager","jsValue","ReduceMotion","Never","Always","getDurationFromConfig","animationName","defaultDuration","Animations","duration","durationV","getCallbackFromConfig","callbackV","getReversedFromConfig","reversed","animationType","easing","callback","element","Keyframe","style","animationFillMode","timestampRules","values","definitions","position","rect","getBoundingClientRect","snapshot","top","left","width","height","scrollOffsets","getElementScrollValue","snapshots","set","animationConfig","shouldSavePosition","parent","configureAnimation","animationDuration","animationDelay","animationTimingFunction","LayoutAnimationType","ENTERING","requestAnimationFrame","onanimationend","_animationConfig$call","contains","removedAfterAnimation","removeChild","call","removeEventListener","animationCancelHandler","_animationConfig$call2","onanimationstart","_updatePropsJS","visibility","addEventListener","scheduleAnimationCleanup","setElementPosition","get","transitionData","TransitionType","LINEAR","SEQUENCED","FADING","JUMPING","CURVED","ENTRY_EXIT","_TransitionGenerator","TransitionGenerator","transitionKeyframeName","dummyTransitionKeyframeName","_prepareCurvedTransit","prepareCurvedTransition","dummy","dummyAnimationConfig","current","scrollTopOffset","scrollLeftOffset","scrollTop","scrollLeft","parentElement","offsetParent","cloneNode","reanimatedDummy","firstChild","appendChild","currentScrollTopOffset","lastScrollTopOffset","currentScrollLeftOffset","lastScrollLeftOffset"],"sources":["componentUtils.ts"],"sourcesContent":["'use strict';\n\nimport { Animations, TransitionType } from './config';\nimport type {\n  AnimationCallback,\n  AnimationConfig,\n  AnimationNames,\n  CustomConfig,\n  KeyframeDefinitions,\n} from './config';\nimport { WebEasings, getEasingByName } from './Easing.web';\nimport type { WebEasingsNames } from './Easing.web';\nimport type { TransitionData } from './animationParser';\nimport { TransitionGenerator } from './createAnimation';\nimport { scheduleAnimationCleanup } from './domUtils';\nimport { _updatePropsJS } from '../../js-reanimated';\nimport type { ReanimatedHTMLElement } from '../../js-reanimated';\nimport { ReduceMotion } from '../../commonTypes';\nimport { LayoutAnimationType } from '../animationBuilder/commonTypes';\nimport type { ReanimatedSnapshot, ScrollOffsets } from './componentStyle';\nimport { setElementPosition, snapshots } from './componentStyle';\nimport { Keyframe } from '../animationBuilder';\nimport { ReducedMotionManager } from '../../ReducedMotion';\nimport { prepareCurvedTransition } from './transition/Curved.web';\nimport { EasingNameSymbol } from '../../Easing';\n\nfunction getEasingFromConfig(config: CustomConfig): string {\n  if (!config.easingV) {\n    return getEasingByName('linear');\n  }\n\n  const easingName = config.easingV[EasingNameSymbol];\n\n  if (!(easingName in WebEasings)) {\n    console.warn(\n      `[Reanimated] Selected easing is not currently supported on web.`\n    );\n\n    return getEasingByName('linear');\n  }\n\n  return getEasingByName(easingName as WebEasingsNames);\n}\n\nfunction getRandomDelay(maxDelay = 1000) {\n  return Math.floor(Math.random() * (maxDelay + 1)) / 1000;\n}\n\nfunction getDelayFromConfig(config: CustomConfig): number {\n  const shouldRandomizeDelay = config.randomizeDelay;\n\n  const delay = shouldRandomizeDelay ? getRandomDelay() : 0;\n\n  if (!config.delayV) {\n    return delay;\n  }\n\n  return shouldRandomizeDelay\n    ? getRandomDelay(config.delayV)\n    : config.delayV / 1000;\n}\n\nexport function getReducedMotionFromConfig(config: CustomConfig) {\n  if (!config.reduceMotionV) {\n    return ReducedMotionManager.jsValue;\n  }\n\n  switch (config.reduceMotionV) {\n    case ReduceMotion.Never:\n      return false;\n    case ReduceMotion.Always:\n      return true;\n    default:\n      return ReducedMotionManager.jsValue;\n  }\n}\n\nfunction getDurationFromConfig(\n  config: CustomConfig,\n  animationName: string\n): number {\n  // Duration in keyframe has to be in seconds. However, when using `.duration()` modifier we pass it in miliseconds.\n  // If `duration` was specified in config, we have to divide it by `1000`, otherwise we return value that is already in seconds.\n\n  const defaultDuration =\n    animationName in Animations\n      ? Animations[animationName as AnimationNames].duration\n      : 0.3;\n\n  return config.durationV !== undefined\n    ? config.durationV / 1000\n    : defaultDuration;\n}\n\nfunction getCallbackFromConfig(config: CustomConfig): AnimationCallback {\n  return config.callbackV !== undefined ? config.callbackV : null;\n}\n\nfunction getReversedFromConfig(config: CustomConfig) {\n  return !!config.reversed;\n}\n\nexport function getProcessedConfig(\n  animationName: string,\n  animationType: LayoutAnimationType,\n  config: CustomConfig\n): AnimationConfig {\n  return {\n    animationName,\n    animationType,\n    duration: getDurationFromConfig(config, animationName),\n    delay: getDelayFromConfig(config),\n    easing: getEasingFromConfig(config),\n    callback: getCallbackFromConfig(config),\n    reversed: getReversedFromConfig(config),\n  };\n}\n\nexport function maybeModifyStyleForKeyframe(\n  element: HTMLElement,\n  config: CustomConfig\n) {\n  if (!(config instanceof Keyframe)) {\n    return;\n  }\n\n  // We need to set `animationFillMode` to `forwards`, otherwise component will go back to its position.\n  // This will result in wrong snapshot\n  element.style.animationFillMode = 'forwards';\n\n  for (const timestampRules of Object.values(\n    config.definitions as KeyframeDefinitions\n  )) {\n    if ('originX' in timestampRules || 'originY' in timestampRules) {\n      element.style.position = 'absolute';\n      return;\n    }\n  }\n}\n\nexport function saveSnapshot(element: HTMLElement) {\n  const rect = element.getBoundingClientRect();\n\n  const snapshot: ReanimatedSnapshot = {\n    top: rect.top,\n    left: rect.left,\n    width: rect.width,\n    height: rect.height,\n    scrollOffsets: getElementScrollValue(element),\n  };\n\n  snapshots.set(element, snapshot);\n}\n\nexport function setElementAnimation(\n  element: ReanimatedHTMLElement,\n  animationConfig: AnimationConfig,\n  shouldSavePosition = false,\n  parent: Element | null = null\n) {\n  const { animationName, duration, delay, easing } = animationConfig;\n\n  const configureAnimation = () => {\n    element.style.animationName = animationName;\n    element.style.animationDuration = `${duration}s`;\n    element.style.animationDelay = `${delay}s`;\n    element.style.animationTimingFunction = easing;\n  };\n\n  if (animationConfig.animationType === LayoutAnimationType.ENTERING) {\n    // On chrome sometimes entering animations flicker. This is most likely caused by animation being interrupted\n    // by already started tasks. To avoid flickering, we use `requestAnimationFrame`, which will run callback right before repaint.\n    requestAnimationFrame(configureAnimation);\n  } else {\n    configureAnimation();\n  }\n\n  element.onanimationend = () => {\n    if (shouldSavePosition) {\n      saveSnapshot(element);\n    }\n\n    if (parent?.contains(element)) {\n      element.removedAfterAnimation = true;\n      parent.removeChild(element);\n    }\n\n    animationConfig.callback?.(true);\n    element.removeEventListener('animationcancel', animationCancelHandler);\n  };\n\n  const animationCancelHandler = () => {\n    animationConfig.callback?.(false);\n\n    if (parent?.contains(element)) {\n      element.removedAfterAnimation = true;\n      parent.removeChild(element);\n    }\n\n    element.removeEventListener('animationcancel', animationCancelHandler);\n  };\n\n  // Here we have to use `addEventListener` since element.onanimationcancel doesn't work on chrome\n  element.onanimationstart = () => {\n    if (animationConfig.animationType === LayoutAnimationType.ENTERING) {\n      _updatePropsJS({ visibility: 'initial' }, element);\n    }\n\n    element.addEventListener('animationcancel', animationCancelHandler);\n  };\n\n  if (!(animationName in Animations)) {\n    scheduleAnimationCleanup(animationName, duration + delay, () => {\n      if (shouldSavePosition) {\n        setElementPosition(element, snapshots.get(element)!);\n      }\n    });\n  }\n}\n\nexport function handleLayoutTransition(\n  element: ReanimatedHTMLElement,\n  animationConfig: AnimationConfig,\n  transitionData: TransitionData\n) {\n  const { animationName } = animationConfig;\n\n  let animationType;\n\n  switch (animationName) {\n    case 'LinearTransition':\n      animationType = TransitionType.LINEAR;\n      break;\n    case 'SequencedTransition':\n      animationType = TransitionType.SEQUENCED;\n      break;\n    case 'FadingTransition':\n      animationType = TransitionType.FADING;\n      break;\n    case 'JumpingTransition':\n      animationType = TransitionType.JUMPING;\n      break;\n    case 'CurvedTransition':\n      animationType = TransitionType.CURVED;\n      break;\n    case 'EntryExitTransition':\n      animationType = TransitionType.ENTRY_EXIT;\n      break;\n    default:\n      animationType = TransitionType.LINEAR;\n      break;\n  }\n\n  const { transitionKeyframeName, dummyTransitionKeyframeName } =\n    TransitionGenerator(animationType, transitionData);\n\n  animationConfig.animationName = transitionKeyframeName;\n\n  if (animationType === TransitionType.CURVED) {\n    const { dummy, dummyAnimationConfig } = prepareCurvedTransition(\n      element,\n      animationConfig,\n      transitionData,\n      dummyTransitionKeyframeName! // In `CurvedTransition` it cannot be undefined\n    );\n\n    setElementAnimation(dummy, dummyAnimationConfig);\n  }\n  setElementAnimation(element, animationConfig);\n}\n\nfunction getElementScrollValue(element: HTMLElement): ScrollOffsets {\n  let current: HTMLElement | null = element;\n\n  const scrollOffsets: ScrollOffsets = {\n    scrollTopOffset: 0,\n    scrollLeftOffset: 0,\n  };\n\n  while (current) {\n    if (current.scrollTop !== 0 && scrollOffsets.scrollTopOffset === 0) {\n      scrollOffsets.scrollTopOffset = current.scrollTop;\n    }\n\n    if (current.scrollLeft !== 0 && scrollOffsets.scrollLeftOffset === 0) {\n      scrollOffsets.scrollLeftOffset = current.scrollLeft;\n    }\n\n    current = current.parentElement;\n  }\n\n  return scrollOffsets;\n}\n\nexport function handleExitingAnimation(\n  element: HTMLElement,\n  animationConfig: AnimationConfig\n) {\n  const parent = element.offsetParent;\n  const dummy = element.cloneNode() as ReanimatedHTMLElement;\n  dummy.reanimatedDummy = true;\n\n  element.style.animationName = '';\n  dummy.style.animationName = '';\n\n  // After cloning the element, we want to move all children from original element to its clone. This is because original element\n  // will be unmounted, therefore when this code executes in child component, parent will be either empty or removed soon.\n  // Using element.cloneNode(true) doesn't solve the problem, because it creates copy of children and we won't be able to set their animations\n  //\n  // This loop works because appendChild() moves element into its new parent instead of copying it\n  while (element.firstChild) {\n    dummy.appendChild(element.firstChild);\n  }\n\n  parent?.appendChild(dummy);\n\n  const snapshot = snapshots.get(element)!;\n\n  const scrollOffsets = getElementScrollValue(element);\n\n  // Scroll does not trigger snapshotting, therefore if we start exiting animation after\n  // scrolling through parent component, dummy will end up in wrong place. In order to fix that\n  // we keep last known scroll position in snapshot and then adjust dummy position based on\n  // last known scroll offset and current scroll offset\n\n  const currentScrollTopOffset = scrollOffsets.scrollTopOffset;\n  const lastScrollTopOffset = snapshot.scrollOffsets.scrollTopOffset;\n\n  if (currentScrollTopOffset !== lastScrollTopOffset) {\n    snapshot.top += lastScrollTopOffset - currentScrollTopOffset;\n  }\n\n  const currentScrollLeftOffset = scrollOffsets.scrollLeftOffset;\n  const lastScrollLeftOffset = snapshot.scrollOffsets.scrollLeftOffset;\n\n  if (currentScrollLeftOffset !== lastScrollLeftOffset) {\n    snapshot.left += lastScrollLeftOffset - currentScrollLeftOffset;\n  }\n\n  snapshots.set(dummy, snapshot);\n\n  setElementPosition(dummy, snapshot);\n\n  setElementAnimation(dummy, animationConfig, false, parent);\n}\n"],"mappings":"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","ignoreList":[]}