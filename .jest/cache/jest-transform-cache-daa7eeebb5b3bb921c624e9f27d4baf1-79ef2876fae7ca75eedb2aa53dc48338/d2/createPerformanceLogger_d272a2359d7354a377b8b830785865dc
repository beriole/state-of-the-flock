0cd3a9f6398dfe03c23345013f779ebf
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createPerformanceLogger;
exports.getCurrentTimestamp = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var Systrace = _interopRequireWildcard(require("../Performance/Systrace"));
var _infoLog = _interopRequireDefault(require("./infoLog"));
var _global$nativeQPLTime;
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
var _cookies = {};
var PRINT_TO_CONSOLE = false;
var getCurrentTimestamp = exports.getCurrentTimestamp = (_global$nativeQPLTime = global.nativeQPLTimestamp) != null ? _global$nativeQPLTime : function () {
  return global.performance.now();
};
var PerformanceLogger = function () {
  function PerformanceLogger() {
    (0, _classCallCheck2.default)(this, PerformanceLogger);
    this._timespans = {};
    this._extras = {};
    this._points = {};
    this._pointExtras = {};
    this._closed = false;
  }
  return (0, _createClass2.default)(PerformanceLogger, [{
    key: "addTimespan",
    value: function addTimespan(key, startTime, endTime, startExtras, endExtras) {
      if (this._closed) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: addTimespan - has closed ignoring: ', key);
        }
        return;
      }
      if (this._timespans[key]) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to add a timespan that already exists ', key);
        }
        return;
      }
      this._timespans[key] = {
        startTime: startTime,
        endTime: endTime,
        totalTime: endTime - (startTime || 0),
        startExtras: startExtras,
        endExtras: endExtras
      };
    }
  }, {
    key: "append",
    value: function append(performanceLogger) {
      this._timespans = Object.assign({}, performanceLogger.getTimespans(), this._timespans);
      this._extras = Object.assign({}, performanceLogger.getExtras(), this._extras);
      this._points = Object.assign({}, performanceLogger.getPoints(), this._points);
      this._pointExtras = Object.assign({}, performanceLogger.getPointExtras(), this._pointExtras);
    }
  }, {
    key: "clear",
    value: function clear() {
      this._timespans = {};
      this._extras = {};
      this._points = {};
      if (PRINT_TO_CONSOLE) {
        (0, _infoLog.default)('PerformanceLogger.js', 'clear');
      }
    }
  }, {
    key: "clearCompleted",
    value: function clearCompleted() {
      for (var _key in this._timespans) {
        var _this$_timespans$_key;
        if (((_this$_timespans$_key = this._timespans[_key]) == null ? void 0 : _this$_timespans$_key.totalTime) != null) {
          delete this._timespans[_key];
        }
      }
      this._extras = {};
      this._points = {};
      if (PRINT_TO_CONSOLE) {
        (0, _infoLog.default)('PerformanceLogger.js', 'clearCompleted');
      }
    }
  }, {
    key: "close",
    value: function close() {
      this._closed = true;
    }
  }, {
    key: "currentTimestamp",
    value: function currentTimestamp() {
      return getCurrentTimestamp();
    }
  }, {
    key: "getExtras",
    value: function getExtras() {
      return this._extras;
    }
  }, {
    key: "getPoints",
    value: function getPoints() {
      return this._points;
    }
  }, {
    key: "getPointExtras",
    value: function getPointExtras() {
      return this._pointExtras;
    }
  }, {
    key: "getTimespans",
    value: function getTimespans() {
      return this._timespans;
    }
  }, {
    key: "hasTimespan",
    value: function hasTimespan(key) {
      return !!this._timespans[key];
    }
  }, {
    key: "isClosed",
    value: function isClosed() {
      return this._closed;
    }
  }, {
    key: "logEverything",
    value: function logEverything() {
      if (PRINT_TO_CONSOLE) {
        for (var _key2 in this._timespans) {
          var _this$_timespans$_key2;
          if (((_this$_timespans$_key2 = this._timespans[_key2]) == null ? void 0 : _this$_timespans$_key2.totalTime) != null) {
            (0, _infoLog.default)(_key2 + ': ' + this._timespans[_key2].totalTime + 'ms');
          }
        }
        (0, _infoLog.default)(this._extras);
        for (var _key3 in this._points) {
          if (this._points[_key3] != null) {
            (0, _infoLog.default)(_key3 + ': ' + this._points[_key3] + 'ms');
          }
        }
      }
    }
  }, {
    key: "markPoint",
    value: function markPoint(key) {
      var timestamp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getCurrentTimestamp();
      var extras = arguments.length > 2 ? arguments[2] : undefined;
      if (this._closed) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: markPoint - has closed ignoring: ', key);
        }
        return;
      }
      if (this._points[key] != null) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to mark a point that has been already logged ', key);
        }
        return;
      }
      this._points[key] = timestamp;
      if (extras) {
        this._pointExtras[key] = extras;
      }
    }
  }, {
    key: "removeExtra",
    value: function removeExtra(key) {
      var value = this._extras[key];
      delete this._extras[key];
      return value;
    }
  }, {
    key: "setExtra",
    value: function setExtra(key, value) {
      if (this._closed) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: setExtra - has closed ignoring: ', key);
        }
        return;
      }
      if (this._extras.hasOwnProperty(key)) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to set an extra that already exists ', {
            key: key,
            currentValue: this._extras[key],
            attemptedValue: value
          });
        }
        return;
      }
      this._extras[key] = value;
    }
  }, {
    key: "startTimespan",
    value: function startTimespan(key) {
      var timestamp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getCurrentTimestamp();
      var extras = arguments.length > 2 ? arguments[2] : undefined;
      if (this._closed) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: startTimespan - has closed ignoring: ', key);
        }
        return;
      }
      if (this._timespans[key]) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to start a timespan that already exists ', key);
        }
        return;
      }
      this._timespans[key] = {
        startTime: timestamp,
        startExtras: extras
      };
      _cookies[key] = Systrace.beginAsyncEvent(key);
      if (PRINT_TO_CONSOLE) {
        (0, _infoLog.default)('PerformanceLogger.js', 'start: ' + key);
      }
    }
  }, {
    key: "stopTimespan",
    value: function stopTimespan(key) {
      var timestamp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getCurrentTimestamp();
      var extras = arguments.length > 2 ? arguments[2] : undefined;
      if (this._closed) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: stopTimespan - has closed ignoring: ', key);
        }
        return;
      }
      var timespan = this._timespans[key];
      if (!timespan || timespan.startTime == null) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to end a timespan that has not started ', key);
        }
        return;
      }
      if (timespan.endTime != null) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to end a timespan that has already ended ', key);
        }
        return;
      }
      timespan.endExtras = extras;
      timespan.endTime = timestamp;
      timespan.totalTime = timespan.endTime - (timespan.startTime || 0);
      if (PRINT_TO_CONSOLE) {
        (0, _infoLog.default)('PerformanceLogger.js', 'end: ' + key);
      }
      if (_cookies[key] != null) {
        Systrace.endAsyncEvent(key, _cookies[key]);
        delete _cookies[key];
      }
    }
  }]);
}();
function createPerformanceLogger() {
  return new PerformanceLogger();
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTeXN0cmFjZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9pbmZvTG9nIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9nbG9iYWwkbmF0aXZlUVBMVGltZSIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJfdCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiX2Nvb2tpZXMiLCJQUklOVF9UT19DT05TT0xFIiwiZ2V0Q3VycmVudFRpbWVzdGFtcCIsImV4cG9ydHMiLCJnbG9iYWwiLCJuYXRpdmVRUExUaW1lc3RhbXAiLCJwZXJmb3JtYW5jZSIsIm5vdyIsIlBlcmZvcm1hbmNlTG9nZ2VyIiwiX2NsYXNzQ2FsbENoZWNrMiIsIl90aW1lc3BhbnMiLCJfZXh0cmFzIiwiX3BvaW50cyIsIl9wb2ludEV4dHJhcyIsIl9jbG9zZWQiLCJfY3JlYXRlQ2xhc3MyIiwia2V5IiwidmFsdWUiLCJhZGRUaW1lc3BhbiIsInN0YXJ0VGltZSIsImVuZFRpbWUiLCJzdGFydEV4dHJhcyIsImVuZEV4dHJhcyIsIl9fREVWX18iLCJpbmZvTG9nIiwidG90YWxUaW1lIiwiYXBwZW5kIiwicGVyZm9ybWFuY2VMb2dnZXIiLCJhc3NpZ24iLCJnZXRUaW1lc3BhbnMiLCJnZXRFeHRyYXMiLCJnZXRQb2ludHMiLCJnZXRQb2ludEV4dHJhcyIsImNsZWFyIiwiY2xlYXJDb21wbGV0ZWQiLCJfdGhpcyRfdGltZXNwYW5zJF9rZXkiLCJjbG9zZSIsImN1cnJlbnRUaW1lc3RhbXAiLCJoYXNUaW1lc3BhbiIsImlzQ2xvc2VkIiwibG9nRXZlcnl0aGluZyIsIl90aGlzJF90aW1lc3BhbnMkX2tleTIiLCJtYXJrUG9pbnQiLCJ0aW1lc3RhbXAiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJleHRyYXMiLCJyZW1vdmVFeHRyYSIsInNldEV4dHJhIiwiY3VycmVudFZhbHVlIiwiYXR0ZW1wdGVkVmFsdWUiLCJzdGFydFRpbWVzcGFuIiwiYmVnaW5Bc3luY0V2ZW50Iiwic3RvcFRpbWVzcGFuIiwidGltZXNwYW4iLCJlbmRBc3luY0V2ZW50IiwiY3JlYXRlUGVyZm9ybWFuY2VMb2dnZXIiXSwic291cmNlcyI6WyJjcmVhdGVQZXJmb3JtYW5jZUxvZ2dlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3cgc3RyaWN0XG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0IHR5cGUge1xuICBFeHRyYXMsXG4gIEV4dHJhVmFsdWUsXG4gIElQZXJmb3JtYW5jZUxvZ2dlcixcbiAgVGltZXNwYW4sXG59IGZyb20gJy4vSVBlcmZvcm1hbmNlTG9nZ2VyJztcblxuaW1wb3J0ICogYXMgU3lzdHJhY2UgZnJvbSAnLi4vUGVyZm9ybWFuY2UvU3lzdHJhY2UnO1xuaW1wb3J0IGluZm9Mb2cgZnJvbSAnLi9pbmZvTG9nJztcblxuY29uc3QgX2Nvb2tpZXM6IHtba2V5OiBzdHJpbmddOiBudW1iZXIsIC4uLn0gPSB7fTtcblxuY29uc3QgUFJJTlRfVE9fQ09OU09MRTogZmFsc2UgPSBmYWxzZTsgLy8gVHlwZSBhcyBmYWxzZSB0byBwcmV2ZW50IGFjY2lkZW50YWxseSBjb21taXR0aW5nIGB0cnVlYDtcblxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRUaW1lc3RhbXA6ICgpID0+IG51bWJlciA9XG4gIGdsb2JhbC5uYXRpdmVRUExUaW1lc3RhbXAgPz8gKCgpID0+IGdsb2JhbC5wZXJmb3JtYW5jZS5ub3coKSk7XG5cbmNsYXNzIFBlcmZvcm1hbmNlTG9nZ2VyIGltcGxlbWVudHMgSVBlcmZvcm1hbmNlTG9nZ2VyIHtcbiAgX3RpbWVzcGFuczoge1trZXk6IHN0cmluZ106ID9UaW1lc3Bhbn0gPSB7fTtcbiAgX2V4dHJhczoge1trZXk6IHN0cmluZ106ID9FeHRyYVZhbHVlfSA9IHt9O1xuICBfcG9pbnRzOiB7W2tleTogc3RyaW5nXTogP251bWJlcn0gPSB7fTtcbiAgX3BvaW50RXh0cmFzOiB7W2tleTogc3RyaW5nXTogP0V4dHJhcywgLi4ufSA9IHt9O1xuICBfY2xvc2VkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgYWRkVGltZXNwYW4oXG4gICAga2V5OiBzdHJpbmcsXG4gICAgc3RhcnRUaW1lOiBudW1iZXIsXG4gICAgZW5kVGltZTogbnVtYmVyLFxuICAgIHN0YXJ0RXh0cmFzPzogRXh0cmFzLFxuICAgIGVuZEV4dHJhcz86IEV4dHJhcyxcbiAgKSB7XG4gICAgaWYgKHRoaXMuX2Nsb3NlZCkge1xuICAgICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUgJiYgX19ERVZfXykge1xuICAgICAgICBpbmZvTG9nKCdQZXJmb3JtYW5jZUxvZ2dlcjogYWRkVGltZXNwYW4gLSBoYXMgY2xvc2VkIGlnbm9yaW5nOiAnLCBrZXkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fdGltZXNwYW5zW2tleV0pIHtcbiAgICAgIGlmIChQUklOVF9UT19DT05TT0xFICYmIF9fREVWX18pIHtcbiAgICAgICAgaW5mb0xvZyhcbiAgICAgICAgICAnUGVyZm9ybWFuY2VMb2dnZXI6IEF0dGVtcHRpbmcgdG8gYWRkIGEgdGltZXNwYW4gdGhhdCBhbHJlYWR5IGV4aXN0cyAnLFxuICAgICAgICAgIGtleSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl90aW1lc3BhbnNba2V5XSA9IHtcbiAgICAgIHN0YXJ0VGltZSxcbiAgICAgIGVuZFRpbWUsXG4gICAgICB0b3RhbFRpbWU6IGVuZFRpbWUgLSAoc3RhcnRUaW1lIHx8IDApLFxuICAgICAgc3RhcnRFeHRyYXMsXG4gICAgICBlbmRFeHRyYXMsXG4gICAgfTtcbiAgfVxuXG4gIGFwcGVuZChwZXJmb3JtYW5jZUxvZ2dlcjogSVBlcmZvcm1hbmNlTG9nZ2VyKSB7XG4gICAgdGhpcy5fdGltZXNwYW5zID0ge1xuICAgICAgLi4ucGVyZm9ybWFuY2VMb2dnZXIuZ2V0VGltZXNwYW5zKCksXG4gICAgICAuLi50aGlzLl90aW1lc3BhbnMsXG4gICAgfTtcbiAgICB0aGlzLl9leHRyYXMgPSB7Li4ucGVyZm9ybWFuY2VMb2dnZXIuZ2V0RXh0cmFzKCksIC4uLnRoaXMuX2V4dHJhc307XG4gICAgdGhpcy5fcG9pbnRzID0gey4uLnBlcmZvcm1hbmNlTG9nZ2VyLmdldFBvaW50cygpLCAuLi50aGlzLl9wb2ludHN9O1xuICAgIHRoaXMuX3BvaW50RXh0cmFzID0ge1xuICAgICAgLi4ucGVyZm9ybWFuY2VMb2dnZXIuZ2V0UG9pbnRFeHRyYXMoKSxcbiAgICAgIC4uLnRoaXMuX3BvaW50RXh0cmFzLFxuICAgIH07XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLl90aW1lc3BhbnMgPSB7fTtcbiAgICB0aGlzLl9leHRyYXMgPSB7fTtcbiAgICB0aGlzLl9wb2ludHMgPSB7fTtcbiAgICBpZiAoUFJJTlRfVE9fQ09OU09MRSkge1xuICAgICAgaW5mb0xvZygnUGVyZm9ybWFuY2VMb2dnZXIuanMnLCAnY2xlYXInKTtcbiAgICB9XG4gIH1cblxuICBjbGVhckNvbXBsZXRlZCgpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLl90aW1lc3BhbnMpIHtcbiAgICAgIGlmICh0aGlzLl90aW1lc3BhbnNba2V5XT8udG90YWxUaW1lICE9IG51bGwpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuX3RpbWVzcGFuc1trZXldO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9leHRyYXMgPSB7fTtcbiAgICB0aGlzLl9wb2ludHMgPSB7fTtcbiAgICBpZiAoUFJJTlRfVE9fQ09OU09MRSkge1xuICAgICAgaW5mb0xvZygnUGVyZm9ybWFuY2VMb2dnZXIuanMnLCAnY2xlYXJDb21wbGV0ZWQnKTtcbiAgICB9XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9jbG9zZWQgPSB0cnVlO1xuICB9XG5cbiAgY3VycmVudFRpbWVzdGFtcCgpOiBudW1iZXIge1xuICAgIHJldHVybiBnZXRDdXJyZW50VGltZXN0YW1wKCk7XG4gIH1cblxuICBnZXRFeHRyYXMoKToge1trZXk6IHN0cmluZ106ID9FeHRyYVZhbHVlfSB7XG4gICAgcmV0dXJuIHRoaXMuX2V4dHJhcztcbiAgfVxuXG4gIGdldFBvaW50cygpOiB7W2tleTogc3RyaW5nXTogP251bWJlcn0ge1xuICAgIHJldHVybiB0aGlzLl9wb2ludHM7XG4gIH1cblxuICBnZXRQb2ludEV4dHJhcygpOiB7W2tleTogc3RyaW5nXTogP0V4dHJhc30ge1xuICAgIHJldHVybiB0aGlzLl9wb2ludEV4dHJhcztcbiAgfVxuXG4gIGdldFRpbWVzcGFucygpOiB7W2tleTogc3RyaW5nXTogP1RpbWVzcGFufSB7XG4gICAgcmV0dXJuIHRoaXMuX3RpbWVzcGFucztcbiAgfVxuXG4gIGhhc1RpbWVzcGFuKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhdGhpcy5fdGltZXNwYW5zW2tleV07XG4gIH1cblxuICBpc0Nsb3NlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fY2xvc2VkO1xuICB9XG5cbiAgbG9nRXZlcnl0aGluZygpIHtcbiAgICBpZiAoUFJJTlRfVE9fQ09OU09MRSkge1xuICAgICAgLy8gbG9nIHRpbWVzcGFuc1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5fdGltZXNwYW5zKSB7XG4gICAgICAgIGlmICh0aGlzLl90aW1lc3BhbnNba2V5XT8udG90YWxUaW1lICE9IG51bGwpIHtcbiAgICAgICAgICBpbmZvTG9nKGtleSArICc6ICcgKyB0aGlzLl90aW1lc3BhbnNba2V5XS50b3RhbFRpbWUgKyAnbXMnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBsb2cgZXh0cmFzXG4gICAgICBpbmZvTG9nKHRoaXMuX2V4dHJhcyk7XG5cbiAgICAgIC8vIGxvZyBwb2ludHNcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuX3BvaW50cykge1xuICAgICAgICBpZiAodGhpcy5fcG9pbnRzW2tleV0gIT0gbnVsbCkge1xuICAgICAgICAgIGluZm9Mb2coa2V5ICsgJzogJyArIHRoaXMuX3BvaW50c1trZXldICsgJ21zJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBtYXJrUG9pbnQoXG4gICAga2V5OiBzdHJpbmcsXG4gICAgdGltZXN0YW1wPzogbnVtYmVyID0gZ2V0Q3VycmVudFRpbWVzdGFtcCgpLFxuICAgIGV4dHJhcz86IEV4dHJhcyxcbiAgKSB7XG4gICAgaWYgKHRoaXMuX2Nsb3NlZCkge1xuICAgICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUgJiYgX19ERVZfXykge1xuICAgICAgICBpbmZvTG9nKCdQZXJmb3JtYW5jZUxvZ2dlcjogbWFya1BvaW50IC0gaGFzIGNsb3NlZCBpZ25vcmluZzogJywga2V5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3BvaW50c1trZXldICE9IG51bGwpIHtcbiAgICAgIGlmIChQUklOVF9UT19DT05TT0xFICYmIF9fREVWX18pIHtcbiAgICAgICAgaW5mb0xvZyhcbiAgICAgICAgICAnUGVyZm9ybWFuY2VMb2dnZXI6IEF0dGVtcHRpbmcgdG8gbWFyayBhIHBvaW50IHRoYXQgaGFzIGJlZW4gYWxyZWFkeSBsb2dnZWQgJyxcbiAgICAgICAgICBrZXksXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3BvaW50c1trZXldID0gdGltZXN0YW1wO1xuICAgIGlmIChleHRyYXMpIHtcbiAgICAgIHRoaXMuX3BvaW50RXh0cmFzW2tleV0gPSBleHRyYXM7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlRXh0cmEoa2V5OiBzdHJpbmcpOiA/RXh0cmFWYWx1ZSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLl9leHRyYXNba2V5XTtcbiAgICBkZWxldGUgdGhpcy5fZXh0cmFzW2tleV07XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgc2V0RXh0cmEoa2V5OiBzdHJpbmcsIHZhbHVlOiBFeHRyYVZhbHVlKSB7XG4gICAgaWYgKHRoaXMuX2Nsb3NlZCkge1xuICAgICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUgJiYgX19ERVZfXykge1xuICAgICAgICBpbmZvTG9nKCdQZXJmb3JtYW5jZUxvZ2dlcjogc2V0RXh0cmEgLSBoYXMgY2xvc2VkIGlnbm9yaW5nOiAnLCBrZXkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9leHRyYXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUgJiYgX19ERVZfXykge1xuICAgICAgICBpbmZvTG9nKFxuICAgICAgICAgICdQZXJmb3JtYW5jZUxvZ2dlcjogQXR0ZW1wdGluZyB0byBzZXQgYW4gZXh0cmEgdGhhdCBhbHJlYWR5IGV4aXN0cyAnLFxuICAgICAgICAgIHtrZXksIGN1cnJlbnRWYWx1ZTogdGhpcy5fZXh0cmFzW2tleV0sIGF0dGVtcHRlZFZhbHVlOiB2YWx1ZX0sXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2V4dHJhc1trZXldID0gdmFsdWU7XG4gIH1cblxuICBzdGFydFRpbWVzcGFuKFxuICAgIGtleTogc3RyaW5nLFxuICAgIHRpbWVzdGFtcD86IG51bWJlciA9IGdldEN1cnJlbnRUaW1lc3RhbXAoKSxcbiAgICBleHRyYXM/OiBFeHRyYXMsXG4gICkge1xuICAgIGlmICh0aGlzLl9jbG9zZWQpIHtcbiAgICAgIGlmIChQUklOVF9UT19DT05TT0xFICYmIF9fREVWX18pIHtcbiAgICAgICAgaW5mb0xvZyhcbiAgICAgICAgICAnUGVyZm9ybWFuY2VMb2dnZXI6IHN0YXJ0VGltZXNwYW4gLSBoYXMgY2xvc2VkIGlnbm9yaW5nOiAnLFxuICAgICAgICAgIGtleSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fdGltZXNwYW5zW2tleV0pIHtcbiAgICAgIGlmIChQUklOVF9UT19DT05TT0xFICYmIF9fREVWX18pIHtcbiAgICAgICAgaW5mb0xvZyhcbiAgICAgICAgICAnUGVyZm9ybWFuY2VMb2dnZXI6IEF0dGVtcHRpbmcgdG8gc3RhcnQgYSB0aW1lc3BhbiB0aGF0IGFscmVhZHkgZXhpc3RzICcsXG4gICAgICAgICAga2V5LFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3RpbWVzcGFuc1trZXldID0ge1xuICAgICAgc3RhcnRUaW1lOiB0aW1lc3RhbXAsXG4gICAgICBzdGFydEV4dHJhczogZXh0cmFzLFxuICAgIH07XG4gICAgX2Nvb2tpZXNba2V5XSA9IFN5c3RyYWNlLmJlZ2luQXN5bmNFdmVudChrZXkpO1xuICAgIGlmIChQUklOVF9UT19DT05TT0xFKSB7XG4gICAgICBpbmZvTG9nKCdQZXJmb3JtYW5jZUxvZ2dlci5qcycsICdzdGFydDogJyArIGtleSk7XG4gICAgfVxuICB9XG5cbiAgc3RvcFRpbWVzcGFuKFxuICAgIGtleTogc3RyaW5nLFxuICAgIHRpbWVzdGFtcD86IG51bWJlciA9IGdldEN1cnJlbnRUaW1lc3RhbXAoKSxcbiAgICBleHRyYXM/OiBFeHRyYXMsXG4gICkge1xuICAgIGlmICh0aGlzLl9jbG9zZWQpIHtcbiAgICAgIGlmIChQUklOVF9UT19DT05TT0xFICYmIF9fREVWX18pIHtcbiAgICAgICAgaW5mb0xvZygnUGVyZm9ybWFuY2VMb2dnZXI6IHN0b3BUaW1lc3BhbiAtIGhhcyBjbG9zZWQgaWdub3Jpbmc6ICcsIGtleSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdGltZXNwYW4gPSB0aGlzLl90aW1lc3BhbnNba2V5XTtcbiAgICBpZiAoIXRpbWVzcGFuIHx8IHRpbWVzcGFuLnN0YXJ0VGltZSA9PSBudWxsKSB7XG4gICAgICBpZiAoUFJJTlRfVE9fQ09OU09MRSAmJiBfX0RFVl9fKSB7XG4gICAgICAgIGluZm9Mb2coXG4gICAgICAgICAgJ1BlcmZvcm1hbmNlTG9nZ2VyOiBBdHRlbXB0aW5nIHRvIGVuZCBhIHRpbWVzcGFuIHRoYXQgaGFzIG5vdCBzdGFydGVkICcsXG4gICAgICAgICAga2V5LFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGltZXNwYW4uZW5kVGltZSAhPSBudWxsKSB7XG4gICAgICBpZiAoUFJJTlRfVE9fQ09OU09MRSAmJiBfX0RFVl9fKSB7XG4gICAgICAgIGluZm9Mb2coXG4gICAgICAgICAgJ1BlcmZvcm1hbmNlTG9nZ2VyOiBBdHRlbXB0aW5nIHRvIGVuZCBhIHRpbWVzcGFuIHRoYXQgaGFzIGFscmVhZHkgZW5kZWQgJyxcbiAgICAgICAgICBrZXksXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGltZXNwYW4uZW5kRXh0cmFzID0gZXh0cmFzO1xuICAgIHRpbWVzcGFuLmVuZFRpbWUgPSB0aW1lc3RhbXA7XG4gICAgdGltZXNwYW4udG90YWxUaW1lID0gdGltZXNwYW4uZW5kVGltZSAtICh0aW1lc3Bhbi5zdGFydFRpbWUgfHwgMCk7XG4gICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUpIHtcbiAgICAgIGluZm9Mb2coJ1BlcmZvcm1hbmNlTG9nZ2VyLmpzJywgJ2VuZDogJyArIGtleSk7XG4gICAgfVxuXG4gICAgaWYgKF9jb29raWVzW2tleV0gIT0gbnVsbCkge1xuICAgICAgU3lzdHJhY2UuZW5kQXN5bmNFdmVudChrZXksIF9jb29raWVzW2tleV0pO1xuICAgICAgZGVsZXRlIF9jb29raWVzW2tleV07XG4gICAgfVxuICB9XG59XG5cbi8vIFJlLWV4cG9ydGluZyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCBhbGwgdGhlIGNsaWVudHMgdGhhdFxuLy8gbWF5IHN0aWxsIGltcG9ydCBpdCBmcm9tIHRoaXMgbW9kdWxlLlxuZXhwb3J0IHR5cGUge0V4dHJhcywgRXh0cmFWYWx1ZSwgSVBlcmZvcm1hbmNlTG9nZ2VyLCBUaW1lc3Bhbn07XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBjcmVhdGVzIHBlcmZvcm1hbmNlIGxvZ2dlcnMgdGhhdCBjYW4gYmUgdXNlZCB0byBjb2xsZWN0IGFuZCBsb2dcbiAqIHZhcmlvdXMgcGVyZm9ybWFuY2UgZGF0YSBzdWNoIGFzIHRpbWVzcGFucywgcG9pbnRzIGFuZCBleHRyYXMuXG4gKiBUaGUgbG9nZ2VycyBuZWVkIHRvIGhhdmUgbWluaW1hbCBvdmVyaGVhZCBzaW5jZSB0aGV5J3JlIHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlUGVyZm9ybWFuY2VMb2dnZXIoKTogSVBlcmZvcm1hbmNlTG9nZ2VyIHtcbiAgcmV0dXJuIG5ldyBQZXJmb3JtYW5jZUxvZ2dlcigpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQWlCQSxJQUFBQSxRQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxRQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFBZ0MsSUFBQUcscUJBQUE7QUFBQSxTQUFBSix3QkFBQUssQ0FBQSxFQUFBQyxDQUFBLDZCQUFBQyxPQUFBLE1BQUFDLENBQUEsT0FBQUQsT0FBQSxJQUFBRSxDQUFBLE9BQUFGLE9BQUEsWUFBQVAsdUJB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