5c45f857fa2de9c891b4a3f8bff22f54
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useAnimatedKeyboard = useAnimatedKeyboard;
var _react = require("react");
var _core = require("../core");
var _commonTypes = require("../commonTypes");
function useAnimatedKeyboard() {
  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
    isStatusBarTranslucentAndroid: false
  };
  var ref = (0, _react.useRef)(null);
  var listenerId = (0, _react.useRef)(-1);
  var isSubscribed = (0, _react.useRef)(false);
  if (ref.current === null) {
    var keyboardEventData = {
      state: (0, _core.makeMutable)(_commonTypes.KeyboardState.UNKNOWN),
      height: (0, _core.makeMutable)(0)
    };
    listenerId.current = (0, _core.subscribeForKeyboardEvents)(function (state, height) {
      'worklet';

      keyboardEventData.state.value = state;
      keyboardEventData.height.value = height;
    }, options);
    ref.current = keyboardEventData;
    isSubscribed.current = true;
  }
  (0, _react.useEffect)(function () {
    if (isSubscribed.current === false && ref.current !== null) {
      var _keyboardEventData = ref.current;
      listenerId.current = (0, _core.subscribeForKeyboardEvents)(function (state, height) {
        'worklet';

        _keyboardEventData.state.value = state;
        _keyboardEventData.height.value = height;
      }, options);
      isSubscribed.current = true;
    }
    return function () {
      (0, _core.unsubscribeFromKeyboardEvents)(listenerId.current);
      isSubscribed.current = false;
    };
  }, []);
  return ref.current;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInVzZUFuaW1hdGVkS2V5Ym9hcmQiLCJfcmVhY3QiLCJyZXF1aXJlIiwiX2NvcmUiLCJfY29tbW9uVHlwZXMiLCJvcHRpb25zIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiaXNTdGF0dXNCYXJUcmFuc2x1Y2VudEFuZHJvaWQiLCJyZWYiLCJ1c2VSZWYiLCJsaXN0ZW5lcklkIiwiaXNTdWJzY3JpYmVkIiwiY3VycmVudCIsImtleWJvYXJkRXZlbnREYXRhIiwic3RhdGUiLCJtYWtlTXV0YWJsZSIsIktleWJvYXJkU3RhdGUiLCJVTktOT1dOIiwiaGVpZ2h0Iiwic3Vic2NyaWJlRm9yS2V5Ym9hcmRFdmVudHMiLCJ1c2VFZmZlY3QiLCJ1bnN1YnNjcmliZUZyb21LZXlib2FyZEV2ZW50cyJdLCJzb3VyY2VzIjpbInVzZUFuaW1hdGVkS2V5Ym9hcmQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICBtYWtlTXV0YWJsZSxcbiAgc3Vic2NyaWJlRm9yS2V5Ym9hcmRFdmVudHMsXG4gIHVuc3Vic2NyaWJlRnJvbUtleWJvYXJkRXZlbnRzLFxufSBmcm9tICcuLi9jb3JlJztcbmltcG9ydCB0eXBlIHtcbiAgQW5pbWF0ZWRLZXlib2FyZEluZm8sXG4gIEFuaW1hdGVkS2V5Ym9hcmRPcHRpb25zLFxufSBmcm9tICcuLi9jb21tb25UeXBlcyc7XG5pbXBvcnQgeyBLZXlib2FyZFN0YXRlIH0gZnJvbSAnLi4vY29tbW9uVHlwZXMnO1xuXG4vKipcbiAqIExldHMgeW91IHN5bmNocm9ub3VzbHkgZ2V0IHRoZSBwb3NpdGlvbiBhbmQgc3RhdGUgb2YgdGhlIGtleWJvYXJkLlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gYWRkaXRpb25hbCBrZXlib2FyZCBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gKiBAcmV0dXJucyBBbiBvYmplY3Qgd2l0aCB0aGUgY3VycmVudCBrZXlib2FyZCBgaGVpZ2h0YCBhbmQgYHN0YXRlYCBhcyBbc2hhcmVkIHZhbHVlc10oaHR0cHM6Ly9kb2NzLnN3bWFuc2lvbi5jb20vcmVhY3QtbmF0aXZlLXJlYW5pbWF0ZWQvZG9jcy9mdW5kYW1lbnRhbHMvZ2xvc3Nhcnkjc2hhcmVkLXZhbHVlKS5cbiAqIEBzZWUgaHR0cHM6Ly9kb2NzLnN3bWFuc2lvbi5jb20vcmVhY3QtbmF0aXZlLXJlYW5pbWF0ZWQvZG9jcy9kZXZpY2UvdXNlQW5pbWF0ZWRLZXlib2FyZFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlQW5pbWF0ZWRLZXlib2FyZChcbiAgb3B0aW9uczogQW5pbWF0ZWRLZXlib2FyZE9wdGlvbnMgPSB7IGlzU3RhdHVzQmFyVHJhbnNsdWNlbnRBbmRyb2lkOiBmYWxzZSB9XG4pOiBBbmltYXRlZEtleWJvYXJkSW5mbyB7XG4gIGNvbnN0IHJlZiA9IHVzZVJlZjxBbmltYXRlZEtleWJvYXJkSW5mbyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBsaXN0ZW5lcklkID0gdXNlUmVmPG51bWJlcj4oLTEpO1xuICBjb25zdCBpc1N1YnNjcmliZWQgPSB1c2VSZWY8Ym9vbGVhbj4oZmFsc2UpO1xuXG4gIGlmIChyZWYuY3VycmVudCA9PT0gbnVsbCkge1xuICAgIGNvbnN0IGtleWJvYXJkRXZlbnREYXRhOiBBbmltYXRlZEtleWJvYXJkSW5mbyA9IHtcbiAgICAgIHN0YXRlOiBtYWtlTXV0YWJsZTxLZXlib2FyZFN0YXRlPihLZXlib2FyZFN0YXRlLlVOS05PV04pLFxuICAgICAgaGVpZ2h0OiBtYWtlTXV0YWJsZSgwKSxcbiAgICB9O1xuICAgIGxpc3RlbmVySWQuY3VycmVudCA9IHN1YnNjcmliZUZvcktleWJvYXJkRXZlbnRzKChzdGF0ZSwgaGVpZ2h0KSA9PiB7XG4gICAgICAnd29ya2xldCc7XG4gICAgICBrZXlib2FyZEV2ZW50RGF0YS5zdGF0ZS52YWx1ZSA9IHN0YXRlO1xuICAgICAga2V5Ym9hcmRFdmVudERhdGEuaGVpZ2h0LnZhbHVlID0gaGVpZ2h0O1xuICAgIH0sIG9wdGlvbnMpO1xuICAgIHJlZi5jdXJyZW50ID0ga2V5Ym9hcmRFdmVudERhdGE7XG4gICAgaXNTdWJzY3JpYmVkLmN1cnJlbnQgPSB0cnVlO1xuICB9XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzU3Vic2NyaWJlZC5jdXJyZW50ID09PSBmYWxzZSAmJiByZWYuY3VycmVudCAhPT0gbnVsbCkge1xuICAgICAgY29uc3Qga2V5Ym9hcmRFdmVudERhdGEgPSByZWYuY3VycmVudDtcbiAgICAgIC8vIHN1YnNjcmliZSBhZ2FpbiBhZnRlciBGYXN0IFJlZnJlc2hcbiAgICAgIGxpc3RlbmVySWQuY3VycmVudCA9IHN1YnNjcmliZUZvcktleWJvYXJkRXZlbnRzKChzdGF0ZSwgaGVpZ2h0KSA9PiB7XG4gICAgICAgICd3b3JrbGV0JztcbiAgICAgICAga2V5Ym9hcmRFdmVudERhdGEuc3RhdGUudmFsdWUgPSBzdGF0ZTtcbiAgICAgICAga2V5Ym9hcmRFdmVudERhdGEuaGVpZ2h0LnZhbHVlID0gaGVpZ2h0O1xuICAgICAgfSwgb3B0aW9ucyk7XG4gICAgICBpc1N1YnNjcmliZWQuY3VycmVudCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB1bnN1YnNjcmliZUZyb21LZXlib2FyZEV2ZW50cyhsaXN0ZW5lcklkLmN1cnJlbnQpO1xuICAgICAgaXNTdWJzY3JpYmVkLmN1cnJlbnQgPSBmYWxzZTtcbiAgICB9O1xuICB9LCBbXSk7XG4gIHJldHVybiByZWYuY3VycmVudDtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFBQUEsTUFBQSxDQUFBQyxjQUFBLENBQUFDLE9BQUE7RUFBQUMsS0FBQTtBQUFBO0FBQUFELE9BQUEsQ0FBQUUsbUJBQUEsR0FBQUEsbUJBQUE7QUFDWixJQUFBQyxNQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxLQUFBLEdBQUFELE9BQUE7QUFTQSxJQUFBRSxZQUFBLEdBQUFGLE9BQUE7QUFTTyxTQUFTRixtQkFBbUJBLENBQUEsRUFFWDtFQUFBLElBRHRCSyxPQUFnQyxHQUFBQyxTQUFBLENBQUFDLE1BQUEsUUFBQUQsU0FBQSxRQUFBRSxTQUFBLEdBQUFGLFNBQUEsTUFBRztJQUFFRyw2QkFBNkIsRUFBRTtFQUFNLENBQUM7RUFFM0UsSUFBTUMsR0FBRyxHQUFHLElBQUFDLGFBQU0sRUFBOEIsSUFBSSxDQUFDO0VBQ3JELElBQU1DLFVBQVUsR0FBRyxJQUFBRCxhQUFNLEVBQVMsQ0FBQyxDQUFDLENBQUM7RUFDckMsSUFBTUUsWUFBWSxHQUFHLElBQUFGLGFBQU0sRUFBVSxLQUFLLENBQUM7RUFFM0MsSUFBSUQsR0FBRyxDQUFDSSxPQUFPLEtBQUssSUFBSSxFQUFFO0lBQ3hCLElBQU1DLGlCQUF1QyxHQUFHO01BQzlDQyxLQUFLLEVBQUUsSUFBQUMsaUJBQVcsRUFBZ0JDLDBCQUFhLENBQUNDLE9BQU8sQ0FBQztNQUN4REMsTUFBTSxFQUFFLElBQUFILGlCQUFXLEVBQUMsQ0FBQztJQUN2QixDQUFDO0lBQ0RMLFVBQVUsQ0FBQ0UsT0FBTyxHQUFHLElBQUFPLGdDQUEwQixFQUFDLFVBQUNMLEtBQUssRUFBRUksTUFBTSxFQUFLO01BQ2pFLFNBQVM7O01BQ1RMLGlCQUFpQixDQUFDQyxLQUFLLENBQUNqQixLQUFLLEdBQUdpQixLQUFLO01BQ3JDRCxpQkFBaUIsQ0FBQ0ssTUFBTSxDQUFDckIsS0FBSyxHQUFHcUIsTUFBTTtJQUN6QyxDQUFDLEVBQUVmLE9BQU8sQ0FBQztJQUNYSyxHQUFHLENBQUNJLE9BQU8sR0FBR0MsaUJBQWlCO0lBQy9CRixZQUFZLENBQUNDLE9BQU8sR0FBRyxJQUFJO0VBQzdCO0VBQ0EsSUFBQVEsZ0JBQVMsRUFBQyxZQUFNO0lBQ2QsSUFBSVQsWUFBWSxDQUFDQyxPQUFPLEtBQUssS0FBSyxJQUFJSixHQUFHLENBQUNJLE9BQU8sS0FBSyxJQUFJLEVBQUU7TUFDMUQsSUFBTUMsa0JBQWlCLEdBQUdMLEdBQUcsQ0FBQ0ksT0FBTztNQUVyQ0YsVUFBVSxDQUFDRSxPQUFPLEdBQUcsSUFBQU8sZ0NBQTBCLEVBQUMsVUFBQ0wsS0FBSyxFQUFFSSxNQUFNLEVBQUs7UUFDakUsU0FBUzs7UUFDVEwsa0JBQWlCLENBQUNDLEtBQUssQ0FBQ2pCLEtBQUssR0FBR2lCLEtBQUs7UUFDckNELGtCQUFpQixDQUFDSyxNQUFNLENBQUNyQixLQUFLLEdBQUdxQixNQUFNO01BQ3pDLENBQUMsRUFBRWYsT0FBTyxDQUFDO01BQ1hRLFlBQVksQ0FBQ0MsT0FBTyxHQUFHLElBQUk7SUFDN0I7SUFDQSxPQUFPLFlBQU07TUFDWCxJQUFBUyxtQ0FBNkIsRUFBQ1gsVUFBVSxDQUFDRSxPQUFPLENBQUM7TUFDakRELFlBQVksQ0FBQ0MsT0FBTyxHQUFHLEtBQUs7SUFDOUIsQ0FBQztFQUNILENBQUMsRUFBRSxFQUFFLENBQUM7RUFDTixPQUFPSixHQUFHLENBQUNJLE9BQU87QUFDcEIiLCJpZ25vcmVMaXN0IjpbXX0=