e5c2cf4e77eb12c432eaf459076ecafe
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getSwipeSimulator = getSwipeSimulator;
var _styleUpdater = require("./styleUpdater");
var _RNScreensTurboModule = require("./RNScreensTurboModule");
var BASE_VELOCITY = 400;
var ADDITIONAL_VELOCITY_FACTOR_X = 400;
var ADDITIONAL_VELOCITY_FACTOR_Y = 500;
var ADDITIONAL_VELOCITY_FACTOR_XY = 600;
function computeEasingProgress(startingTimestamp, distance, velocity) {
  'worklet';

  if (Math.abs(distance) < 1) {
    return 1;
  }
  var elapsedTime = (_getAnimationTimestamp() - startingTimestamp) / 1000;
  var currentPosition = velocity * elapsedTime;
  var progress = currentPosition / distance;
  return progress;
}
function easing(x) {
  'worklet';
  return 1 - Math.pow(1 - x, 5);
}
function computeProgress(screenTransitionConfig, event, isTransitionCanceled) {
  'worklet';

  var screenDimensions = screenTransitionConfig.screenDimensions;
  var progressX = Math.abs(event.translationX / screenDimensions.width);
  var progressY = Math.abs(event.translationY / screenDimensions.height);
  var maxProgress = Math.max(progressX, progressY);
  var progress = isTransitionCanceled ? maxProgress / 2 : maxProgress;
  return progress;
}
function maybeScheduleNextFrame(step, didScreenReachDestination, screenTransitionConfig, event, isTransitionCanceled) {
  'worklet';

  if (!didScreenReachDestination) {
    var stackTag = screenTransitionConfig.stackTag;
    var progress = computeProgress(screenTransitionConfig, event, isTransitionCanceled);
    _RNScreensTurboModule.RNScreensTurboModule.updateTransition(stackTag, progress);
    requestAnimationFrame(step);
  } else {
    var _screenTransitionConf;
    (_screenTransitionConf = screenTransitionConfig.onFinishAnimation) === null || _screenTransitionConf === void 0 || _screenTransitionConf.call(screenTransitionConfig);
  }
}
function getSwipeSimulator(event, screenTransitionConfig, lockAxis) {
  'worklet';

  var screenDimensions = screenTransitionConfig.screenDimensions;
  var startTimestamp = _getAnimationTimestamp();
  var isTransitionCanceled = screenTransitionConfig.isTransitionCanceled;
  var startingPosition = {
    x: event.translationX,
    y: event.translationY
  };
  var direction = {
    x: Math.sign(event.translationX),
    y: Math.sign(event.translationY)
  };
  var finalPosition = isTransitionCanceled ? {
    x: 0,
    y: 0
  } : {
    x: direction.x * screenDimensions.width,
    y: direction.y * screenDimensions.height
  };
  var distance = {
    x: Math.abs(finalPosition.x - startingPosition.x),
    y: Math.abs(finalPosition.y - startingPosition.y)
  };
  var didScreenReachDestination = {
    x: false,
    y: false
  };
  var velocity = {
    x: BASE_VELOCITY,
    y: BASE_VELOCITY
  };
  if (lockAxis === 'x') {
    velocity.y = 0;
    velocity.x += ADDITIONAL_VELOCITY_FACTOR_X * distance.x / screenDimensions.width;
  } else if (lockAxis === 'y') {
    velocity.x = 0;
    velocity.y += ADDITIONAL_VELOCITY_FACTOR_Y * distance.y / screenDimensions.height;
  } else {
    var euclideanDistance = Math.sqrt(distance.x ** 2 + distance.y ** 2);
    var screenDiagonal = Math.sqrt(screenDimensions.width ** 2 + screenDimensions.height ** 2);
    var velocityVectorLength = BASE_VELOCITY + ADDITIONAL_VELOCITY_FACTOR_XY * euclideanDistance / screenDiagonal;
    if (Math.abs(startingPosition.x) > Math.abs(startingPosition.y)) {
      velocity.x = velocityVectorLength;
      velocity.y = velocityVectorLength * Math.abs(startingPosition.y / startingPosition.x);
    } else {
      velocity.x = velocityVectorLength * Math.abs(startingPosition.x / startingPosition.y);
      velocity.y = velocityVectorLength;
    }
  }
  if (isTransitionCanceled) {
    function didScreenReachDestinationCheck() {
      if (lockAxis === 'x') {
        return didScreenReachDestination.x;
      } else if (lockAxis === 'y') {
        return didScreenReachDestination.y;
      } else {
        return didScreenReachDestination.x && didScreenReachDestination.y;
      }
    }
    function restoreOriginalStyleForBelowTopScreen() {
      event.translationX = direction.x * screenDimensions.width;
      event.translationY = direction.y * screenDimensions.height;
      (0, _styleUpdater.applyStyleForBelowTopScreen)(screenTransitionConfig, event);
    }
    var _computeFrame = function computeFrame() {
      var progress = {
        x: computeEasingProgress(startTimestamp, distance.x, velocity.x),
        y: computeEasingProgress(startTimestamp, distance.y, velocity.y)
      };
      event.translationX = startingPosition.x - direction.x * distance.x * easing(progress.x);
      event.translationY = startingPosition.y - direction.y * distance.y * easing(progress.y);
      if (direction.x > 0) {
        if (event.translationX <= 0) {
          didScreenReachDestination.x = true;
          event.translationX = 0;
        }
      } else {
        if (event.translationX >= 0) {
          didScreenReachDestination.x = true;
          event.translationX = 0;
        }
      }
      if (direction.y > 0) {
        if (event.translationY <= 0) {
          didScreenReachDestination.y = true;
          event.translationY = 0;
        }
      } else {
        if (event.translationY >= 0) {
          didScreenReachDestination.y = true;
          event.translationY = 0;
        }
      }
      (0, _styleUpdater.applyStyle)(screenTransitionConfig, event);
      var finished = didScreenReachDestinationCheck();
      if (finished) {
        restoreOriginalStyleForBelowTopScreen();
      }
      maybeScheduleNextFrame(_computeFrame, finished, screenTransitionConfig, event, isTransitionCanceled);
    };
    return _computeFrame;
  } else {
    var _computeFrame2 = function computeFrame() {
      var progress = {
        x: computeEasingProgress(startTimestamp, distance.x, velocity.x),
        y: computeEasingProgress(startTimestamp, distance.y, velocity.y)
      };
      event.translationX = startingPosition.x + direction.x * distance.x * easing(progress.x);
      event.translationY = startingPosition.y + direction.y * distance.y * easing(progress.y);
      if (direction.x > 0) {
        if (event.translationX >= screenDimensions.width) {
          didScreenReachDestination.x = true;
          event.translationX = screenDimensions.width;
        }
      } else {
        if (event.translationX <= -screenDimensions.width) {
          didScreenReachDestination.x = true;
          event.translationX = -screenDimensions.width;
        }
      }
      if (direction.y > 0) {
        if (event.translationY >= screenDimensions.height) {
          didScreenReachDestination.y = true;
          event.translationY = screenDimensions.height;
        }
      } else {
        if (event.translationY <= -screenDimensions.height) {
          didScreenReachDestination.y = true;
          event.translationY = -screenDimensions.height;
        }
      }
      (0, _styleUpdater.applyStyle)(screenTransitionConfig, event);
      maybeScheduleNextFrame(_computeFrame2, didScreenReachDestination.x || didScreenReachDestination.y, screenTransitionConfig, event, isTransitionCanceled);
    };
    return _computeFrame2;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImdldFN3aXBlU2ltdWxhdG9yIiwiX3N0eWxlVXBkYXRlciIsInJlcXVpcmUiLCJfUk5TY3JlZW5zVHVyYm9Nb2R1bGUiLCJCQVNFX1ZFTE9DSVRZIiwiQURESVRJT05BTF9WRUxPQ0lUWV9GQUNUT1JfWCIsIkFERElUSU9OQUxfVkVMT0NJVFlfRkFDVE9SX1kiLCJBRERJVElPTkFMX1ZFTE9DSVRZX0ZBQ1RPUl9YWSIsImNvbXB1dGVFYXNpbmdQcm9ncmVzcyIsInN0YXJ0aW5nVGltZXN0YW1wIiwiZGlzdGFuY2UiLCJ2ZWxvY2l0eSIsIk1hdGgiLCJhYnMiLCJlbGFwc2VkVGltZSIsIl9nZXRBbmltYXRpb25UaW1lc3RhbXAiLCJjdXJyZW50UG9zaXRpb24iLCJwcm9ncmVzcyIsImVhc2luZyIsIngiLCJwb3ciLCJjb21wdXRlUHJvZ3Jlc3MiLCJzY3JlZW5UcmFuc2l0aW9uQ29uZmlnIiwiZXZlbnQiLCJpc1RyYW5zaXRpb25DYW5jZWxlZCIsInNjcmVlbkRpbWVuc2lvbnMiLCJwcm9ncmVzc1giLCJ0cmFuc2xhdGlvblgiLCJ3aWR0aCIsInByb2dyZXNzWSIsInRyYW5zbGF0aW9uWSIsImhlaWdodCIsIm1heFByb2dyZXNzIiwibWF4IiwibWF5YmVTY2hlZHVsZU5leHRGcmFtZSIsInN0ZXAiLCJkaWRTY3JlZW5SZWFjaERlc3RpbmF0aW9uIiwic3RhY2tUYWciLCJSTlNjcmVlbnNUdXJib01vZHVsZSIsInVwZGF0ZVRyYW5zaXRpb24iLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJfc2NyZWVuVHJhbnNpdGlvbkNvbmYiLCJvbkZpbmlzaEFuaW1hdGlvbiIsImNhbGwiLCJsb2NrQXhpcyIsInN0YXJ0VGltZXN0YW1wIiwic3RhcnRpbmdQb3NpdGlvbiIsInkiLCJkaXJlY3Rpb24iLCJzaWduIiwiZmluYWxQb3NpdGlvbiIsImV1Y2xpZGVhbkRpc3RhbmNlIiwic3FydCIsInNjcmVlbkRpYWdvbmFsIiwidmVsb2NpdHlWZWN0b3JMZW5ndGgiLCJkaWRTY3JlZW5SZWFjaERlc3RpbmF0aW9uQ2hlY2siLCJyZXN0b3JlT3JpZ2luYWxTdHlsZUZvckJlbG93VG9wU2NyZWVuIiwiYXBwbHlTdHlsZUZvckJlbG93VG9wU2NyZWVuIiwiY29tcHV0ZUZyYW1lIiwiYXBwbHlTdHlsZSIsImZpbmlzaGVkIl0sInNvdXJjZXMiOlsic3dpcGVTaW11bGF0b3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IHR5cGUge1xuICBQYW5HZXN0dXJlSGFuZGxlckV2ZW50UGF5bG9hZCxcbiAgU2NyZWVuVHJhbnNpdGlvbkNvbmZpZyxcbiAgTG9ja0F4aXMsXG59IGZyb20gJy4vY29tbW9uVHlwZXMnO1xuaW1wb3J0IHsgYXBwbHlTdHlsZSwgYXBwbHlTdHlsZUZvckJlbG93VG9wU2NyZWVuIH0gZnJvbSAnLi9zdHlsZVVwZGF0ZXInO1xuaW1wb3J0IHsgUk5TY3JlZW5zVHVyYm9Nb2R1bGUgfSBmcm9tICcuL1JOU2NyZWVuc1R1cmJvTW9kdWxlJztcblxuY29uc3QgQkFTRV9WRUxPQ0lUWSA9IDQwMDtcbmNvbnN0IEFERElUSU9OQUxfVkVMT0NJVFlfRkFDVE9SX1ggPSA0MDA7XG5jb25zdCBBRERJVElPTkFMX1ZFTE9DSVRZX0ZBQ1RPUl9ZID0gNTAwO1xuY29uc3QgQURESVRJT05BTF9WRUxPQ0lUWV9GQUNUT1JfWFkgPSA2MDA7XG5cbmZ1bmN0aW9uIGNvbXB1dGVFYXNpbmdQcm9ncmVzcyhcbiAgc3RhcnRpbmdUaW1lc3RhbXA6IG51bWJlcixcbiAgZGlzdGFuY2U6IG51bWJlcixcbiAgdmVsb2NpdHk6IG51bWJlclxuKSB7XG4gICd3b3JrbGV0JztcbiAgaWYgKE1hdGguYWJzKGRpc3RhbmNlKSA8IDEpIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuICBjb25zdCBlbGFwc2VkVGltZSA9IChfZ2V0QW5pbWF0aW9uVGltZXN0YW1wKCkgLSBzdGFydGluZ1RpbWVzdGFtcCkgLyAxMDAwO1xuICBjb25zdCBjdXJyZW50UG9zaXRpb24gPSB2ZWxvY2l0eSAqIGVsYXBzZWRUaW1lO1xuICBjb25zdCBwcm9ncmVzcyA9IGN1cnJlbnRQb3NpdGlvbiAvIGRpc3RhbmNlO1xuICByZXR1cm4gcHJvZ3Jlc3M7XG59XG5cbmZ1bmN0aW9uIGVhc2luZyh4OiBudW1iZXIpOiBudW1iZXIge1xuICAnd29ya2xldCc7XG4gIC8vIGJhc2VkIG9uIGh0dHBzOi8vZWFzaW5ncy5uZXQvI2Vhc2VPdXRRdWFydFxuICByZXR1cm4gMSAtIE1hdGgucG93KDEgLSB4LCA1KTtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZVByb2dyZXNzKFxuICBzY3JlZW5UcmFuc2l0aW9uQ29uZmlnOiBTY3JlZW5UcmFuc2l0aW9uQ29uZmlnLFxuICBldmVudDogUGFuR2VzdHVyZUhhbmRsZXJFdmVudFBheWxvYWQsXG4gIGlzVHJhbnNpdGlvbkNhbmNlbGVkOiBib29sZWFuXG4pIHtcbiAgJ3dvcmtsZXQnO1xuICBjb25zdCBzY3JlZW5EaW1lbnNpb25zID0gc2NyZWVuVHJhbnNpdGlvbkNvbmZpZy5zY3JlZW5EaW1lbnNpb25zO1xuICBjb25zdCBwcm9ncmVzc1ggPSBNYXRoLmFicyhldmVudC50cmFuc2xhdGlvblggLyBzY3JlZW5EaW1lbnNpb25zLndpZHRoKTtcbiAgY29uc3QgcHJvZ3Jlc3NZID0gTWF0aC5hYnMoZXZlbnQudHJhbnNsYXRpb25ZIC8gc2NyZWVuRGltZW5zaW9ucy5oZWlnaHQpO1xuICBjb25zdCBtYXhQcm9ncmVzcyA9IE1hdGgubWF4KHByb2dyZXNzWCwgcHJvZ3Jlc3NZKTtcbiAgY29uc3QgcHJvZ3Jlc3MgPSBpc1RyYW5zaXRpb25DYW5jZWxlZCA/IG1heFByb2dyZXNzIC8gMiA6IG1heFByb2dyZXNzO1xuICByZXR1cm4gcHJvZ3Jlc3M7XG59XG5cbmZ1bmN0aW9uIG1heWJlU2NoZWR1bGVOZXh0RnJhbWUoXG4gIHN0ZXA6ICgpID0+IHZvaWQsXG4gIGRpZFNjcmVlblJlYWNoRGVzdGluYXRpb246IGJvb2xlYW4sXG4gIHNjcmVlblRyYW5zaXRpb25Db25maWc6IFNjcmVlblRyYW5zaXRpb25Db25maWcsXG4gIGV2ZW50OiBQYW5HZXN0dXJlSGFuZGxlckV2ZW50UGF5bG9hZCxcbiAgaXNUcmFuc2l0aW9uQ2FuY2VsZWQ6IGJvb2xlYW5cbikge1xuICAnd29ya2xldCc7XG4gIGlmICghZGlkU2NyZWVuUmVhY2hEZXN0aW5hdGlvbikge1xuICAgIGNvbnN0IHN0YWNrVGFnID0gc2NyZWVuVHJhbnNpdGlvbkNvbmZpZy5zdGFja1RhZztcbiAgICBjb25zdCBwcm9ncmVzcyA9IGNvbXB1dGVQcm9ncmVzcyhcbiAgICAgIHNjcmVlblRyYW5zaXRpb25Db25maWcsXG4gICAgICBldmVudCxcbiAgICAgIGlzVHJhbnNpdGlvbkNhbmNlbGVkXG4gICAgKTtcbiAgICBSTlNjcmVlbnNUdXJib01vZHVsZS51cGRhdGVUcmFuc2l0aW9uKHN0YWNrVGFnLCBwcm9ncmVzcyk7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xuICB9IGVsc2Uge1xuICAgIHNjcmVlblRyYW5zaXRpb25Db25maWcub25GaW5pc2hBbmltYXRpb24/LigpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTd2lwZVNpbXVsYXRvcihcbiAgZXZlbnQ6IFBhbkdlc3R1cmVIYW5kbGVyRXZlbnRQYXlsb2FkLFxuICBzY3JlZW5UcmFuc2l0aW9uQ29uZmlnOiBTY3JlZW5UcmFuc2l0aW9uQ29uZmlnLFxuICBsb2NrQXhpcz86IExvY2tBeGlzXG4pIHtcbiAgJ3dvcmtsZXQnO1xuICBjb25zdCBzY3JlZW5EaW1lbnNpb25zID0gc2NyZWVuVHJhbnNpdGlvbkNvbmZpZy5zY3JlZW5EaW1lbnNpb25zO1xuICBjb25zdCBzdGFydFRpbWVzdGFtcCA9IF9nZXRBbmltYXRpb25UaW1lc3RhbXAoKTtcbiAgY29uc3QgeyBpc1RyYW5zaXRpb25DYW5jZWxlZCB9ID0gc2NyZWVuVHJhbnNpdGlvbkNvbmZpZztcbiAgY29uc3Qgc3RhcnRpbmdQb3NpdGlvbiA9IHtcbiAgICB4OiBldmVudC50cmFuc2xhdGlvblgsXG4gICAgeTogZXZlbnQudHJhbnNsYXRpb25ZLFxuICB9O1xuICBjb25zdCBkaXJlY3Rpb24gPSB7XG4gICAgeDogTWF0aC5zaWduKGV2ZW50LnRyYW5zbGF0aW9uWCksXG4gICAgeTogTWF0aC5zaWduKGV2ZW50LnRyYW5zbGF0aW9uWSksXG4gIH07XG4gIGNvbnN0IGZpbmFsUG9zaXRpb24gPSBpc1RyYW5zaXRpb25DYW5jZWxlZFxuICAgID8geyB4OiAwLCB5OiAwIH1cbiAgICA6IHtcbiAgICAgICAgeDogZGlyZWN0aW9uLnggKiBzY3JlZW5EaW1lbnNpb25zLndpZHRoLFxuICAgICAgICB5OiBkaXJlY3Rpb24ueSAqIHNjcmVlbkRpbWVuc2lvbnMuaGVpZ2h0LFxuICAgICAgfTtcbiAgY29uc3QgZGlzdGFuY2UgPSB7XG4gICAgeDogTWF0aC5hYnMoZmluYWxQb3NpdGlvbi54IC0gc3RhcnRpbmdQb3NpdGlvbi54KSxcbiAgICB5OiBNYXRoLmFicyhmaW5hbFBvc2l0aW9uLnkgLSBzdGFydGluZ1Bvc2l0aW9uLnkpLFxuICB9O1xuICBjb25zdCBkaWRTY3JlZW5SZWFjaERlc3RpbmF0aW9uID0ge1xuICAgIHg6IGZhbHNlLFxuICAgIHk6IGZhbHNlLFxuICB9O1xuICBjb25zdCB2ZWxvY2l0eSA9IHsgeDogQkFTRV9WRUxPQ0lUWSwgeTogQkFTRV9WRUxPQ0lUWSB9O1xuICBpZiAobG9ja0F4aXMgPT09ICd4Jykge1xuICAgIHZlbG9jaXR5LnkgPSAwO1xuICAgIHZlbG9jaXR5LnggKz1cbiAgICAgIChBRERJVElPTkFMX1ZFTE9DSVRZX0ZBQ1RPUl9YICogZGlzdGFuY2UueCkgLyBzY3JlZW5EaW1lbnNpb25zLndpZHRoO1xuICB9IGVsc2UgaWYgKGxvY2tBeGlzID09PSAneScpIHtcbiAgICB2ZWxvY2l0eS54ID0gMDtcbiAgICB2ZWxvY2l0eS55ICs9XG4gICAgICAoQURESVRJT05BTF9WRUxPQ0lUWV9GQUNUT1JfWSAqIGRpc3RhbmNlLnkpIC8gc2NyZWVuRGltZW5zaW9ucy5oZWlnaHQ7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgZXVjbGlkZWFuRGlzdGFuY2UgPSBNYXRoLnNxcnQoZGlzdGFuY2UueCAqKiAyICsgZGlzdGFuY2UueSAqKiAyKTtcbiAgICBjb25zdCBzY3JlZW5EaWFnb25hbCA9IE1hdGguc3FydChcbiAgICAgIHNjcmVlbkRpbWVuc2lvbnMud2lkdGggKiogMiArIHNjcmVlbkRpbWVuc2lvbnMuaGVpZ2h0ICoqIDJcbiAgICApO1xuICAgIGNvbnN0IHZlbG9jaXR5VmVjdG9yTGVuZ3RoID1cbiAgICAgIEJBU0VfVkVMT0NJVFkgK1xuICAgICAgKEFERElUSU9OQUxfVkVMT0NJVFlfRkFDVE9SX1hZICogZXVjbGlkZWFuRGlzdGFuY2UpIC8gc2NyZWVuRGlhZ29uYWw7XG4gICAgaWYgKE1hdGguYWJzKHN0YXJ0aW5nUG9zaXRpb24ueCkgPiBNYXRoLmFicyhzdGFydGluZ1Bvc2l0aW9uLnkpKSB7XG4gICAgICB2ZWxvY2l0eS54ID0gdmVsb2NpdHlWZWN0b3JMZW5ndGg7XG4gICAgICB2ZWxvY2l0eS55ID1cbiAgICAgICAgdmVsb2NpdHlWZWN0b3JMZW5ndGggKlxuICAgICAgICBNYXRoLmFicyhzdGFydGluZ1Bvc2l0aW9uLnkgLyBzdGFydGluZ1Bvc2l0aW9uLngpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2ZWxvY2l0eS54ID1cbiAgICAgICAgdmVsb2NpdHlWZWN0b3JMZW5ndGggKlxuICAgICAgICBNYXRoLmFicyhzdGFydGluZ1Bvc2l0aW9uLnggLyBzdGFydGluZ1Bvc2l0aW9uLnkpO1xuICAgICAgdmVsb2NpdHkueSA9IHZlbG9jaXR5VmVjdG9yTGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIGlmIChpc1RyYW5zaXRpb25DYW5jZWxlZCkge1xuICAgIGZ1bmN0aW9uIGRpZFNjcmVlblJlYWNoRGVzdGluYXRpb25DaGVjaygpIHtcbiAgICAgIGlmIChsb2NrQXhpcyA9PT0gJ3gnKSB7XG4gICAgICAgIHJldHVybiBkaWRTY3JlZW5SZWFjaERlc3RpbmF0aW9uLng7XG4gICAgICB9IGVsc2UgaWYgKGxvY2tBeGlzID09PSAneScpIHtcbiAgICAgICAgcmV0dXJuIGRpZFNjcmVlblJlYWNoRGVzdGluYXRpb24ueTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkaWRTY3JlZW5SZWFjaERlc3RpbmF0aW9uLnggJiYgZGlkU2NyZWVuUmVhY2hEZXN0aW5hdGlvbi55O1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc3RvcmVPcmlnaW5hbFN0eWxlRm9yQmVsb3dUb3BTY3JlZW4oKSB7XG4gICAgICBldmVudC50cmFuc2xhdGlvblggPSBkaXJlY3Rpb24ueCAqIHNjcmVlbkRpbWVuc2lvbnMud2lkdGg7XG4gICAgICBldmVudC50cmFuc2xhdGlvblkgPSBkaXJlY3Rpb24ueSAqIHNjcmVlbkRpbWVuc2lvbnMuaGVpZ2h0O1xuICAgICAgYXBwbHlTdHlsZUZvckJlbG93VG9wU2NyZWVuKHNjcmVlblRyYW5zaXRpb25Db25maWcsIGV2ZW50KTtcbiAgICB9XG5cbiAgICBjb25zdCBjb21wdXRlRnJhbWUgPSAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9ncmVzcyA9IHtcbiAgICAgICAgeDogY29tcHV0ZUVhc2luZ1Byb2dyZXNzKHN0YXJ0VGltZXN0YW1wLCBkaXN0YW5jZS54LCB2ZWxvY2l0eS54KSxcbiAgICAgICAgeTogY29tcHV0ZUVhc2luZ1Byb2dyZXNzKHN0YXJ0VGltZXN0YW1wLCBkaXN0YW5jZS55LCB2ZWxvY2l0eS55KSxcbiAgICAgIH07XG4gICAgICBldmVudC50cmFuc2xhdGlvblggPVxuICAgICAgICBzdGFydGluZ1Bvc2l0aW9uLnggLSBkaXJlY3Rpb24ueCAqIGRpc3RhbmNlLnggKiBlYXNpbmcocHJvZ3Jlc3MueCk7XG4gICAgICBldmVudC50cmFuc2xhdGlvblkgPVxuICAgICAgICBzdGFydGluZ1Bvc2l0aW9uLnkgLSBkaXJlY3Rpb24ueSAqIGRpc3RhbmNlLnkgKiBlYXNpbmcocHJvZ3Jlc3MueSk7XG4gICAgICBpZiAoZGlyZWN0aW9uLnggPiAwKSB7XG4gICAgICAgIGlmIChldmVudC50cmFuc2xhdGlvblggPD0gMCkge1xuICAgICAgICAgIGRpZFNjcmVlblJlYWNoRGVzdGluYXRpb24ueCA9IHRydWU7XG4gICAgICAgICAgZXZlbnQudHJhbnNsYXRpb25YID0gMDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGV2ZW50LnRyYW5zbGF0aW9uWCA+PSAwKSB7XG4gICAgICAgICAgZGlkU2NyZWVuUmVhY2hEZXN0aW5hdGlvbi54ID0gdHJ1ZTtcbiAgICAgICAgICBldmVudC50cmFuc2xhdGlvblggPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZGlyZWN0aW9uLnkgPiAwKSB7XG4gICAgICAgIGlmIChldmVudC50cmFuc2xhdGlvblkgPD0gMCkge1xuICAgICAgICAgIGRpZFNjcmVlblJlYWNoRGVzdGluYXRpb24ueSA9IHRydWU7XG4gICAgICAgICAgZXZlbnQudHJhbnNsYXRpb25ZID0gMDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGV2ZW50LnRyYW5zbGF0aW9uWSA+PSAwKSB7XG4gICAgICAgICAgZGlkU2NyZWVuUmVhY2hEZXN0aW5hdGlvbi55ID0gdHJ1ZTtcbiAgICAgICAgICBldmVudC50cmFuc2xhdGlvblkgPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBhcHBseVN0eWxlKHNjcmVlblRyYW5zaXRpb25Db25maWcsIGV2ZW50KTtcbiAgICAgIGNvbnN0IGZpbmlzaGVkID0gZGlkU2NyZWVuUmVhY2hEZXN0aW5hdGlvbkNoZWNrKCk7XG4gICAgICBpZiAoZmluaXNoZWQpIHtcbiAgICAgICAgcmVzdG9yZU9yaWdpbmFsU3R5bGVGb3JCZWxvd1RvcFNjcmVlbigpO1xuICAgICAgfVxuICAgICAgbWF5YmVTY2hlZHVsZU5leHRGcmFtZShcbiAgICAgICAgY29tcHV0ZUZyYW1lLFxuICAgICAgICBmaW5pc2hlZCxcbiAgICAgICAgc2NyZWVuVHJhbnNpdGlvbkNvbmZpZyxcbiAgICAgICAgZXZlbnQsXG4gICAgICAgIGlzVHJhbnNpdGlvbkNhbmNlbGVkXG4gICAgICApO1xuICAgIH07XG4gICAgcmV0dXJuIGNvbXB1dGVGcmFtZTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBjb21wdXRlRnJhbWUgPSAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9ncmVzcyA9IHtcbiAgICAgICAgeDogY29tcHV0ZUVhc2luZ1Byb2dyZXNzKHN0YXJ0VGltZXN0YW1wLCBkaXN0YW5jZS54LCB2ZWxvY2l0eS54KSxcbiAgICAgICAgeTogY29tcHV0ZUVhc2luZ1Byb2dyZXNzKHN0YXJ0VGltZXN0YW1wLCBkaXN0YW5jZS55LCB2ZWxvY2l0eS55KSxcbiAgICAgIH07XG4gICAgICBldmVudC50cmFuc2xhdGlvblggPVxuICAgICAgICBzdGFydGluZ1Bvc2l0aW9uLnggKyBkaXJlY3Rpb24ueCAqIGRpc3RhbmNlLnggKiBlYXNpbmcocHJvZ3Jlc3MueCk7XG4gICAgICBldmVudC50cmFuc2xhdGlvblkgPVxuICAgICAgICBzdGFydGluZ1Bvc2l0aW9uLnkgKyBkaXJlY3Rpb24ueSAqIGRpc3RhbmNlLnkgKiBlYXNpbmcocHJvZ3Jlc3MueSk7XG4gICAgICBpZiAoZGlyZWN0aW9uLnggPiAwKSB7XG4gICAgICAgIGlmIChldmVudC50cmFuc2xhdGlvblggPj0gc2NyZWVuRGltZW5zaW9ucy53aWR0aCkge1xuICAgICAgICAgIGRpZFNjcmVlblJlYWNoRGVzdGluYXRpb24ueCA9IHRydWU7XG4gICAgICAgICAgZXZlbnQudHJhbnNsYXRpb25YID0gc2NyZWVuRGltZW5zaW9ucy53aWR0aDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGV2ZW50LnRyYW5zbGF0aW9uWCA8PSAtc2NyZWVuRGltZW5zaW9ucy53aWR0aCkge1xuICAgICAgICAgIGRpZFNjcmVlblJlYWNoRGVzdGluYXRpb24ueCA9IHRydWU7XG4gICAgICAgICAgZXZlbnQudHJhbnNsYXRpb25YID0gLXNjcmVlbkRpbWVuc2lvbnMud2lkdGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChkaXJlY3Rpb24ueSA+IDApIHtcbiAgICAgICAgaWYgKGV2ZW50LnRyYW5zbGF0aW9uWSA+PSBzY3JlZW5EaW1lbnNpb25zLmhlaWdodCkge1xuICAgICAgICAgIGRpZFNjcmVlblJlYWNoRGVzdGluYXRpb24ueSA9IHRydWU7XG4gICAgICAgICAgZXZlbnQudHJhbnNsYXRpb25ZID0gc2NyZWVuRGltZW5zaW9ucy5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChldmVudC50cmFuc2xhdGlvblkgPD0gLXNjcmVlbkRpbWVuc2lvbnMuaGVpZ2h0KSB7XG4gICAgICAgICAgZGlkU2NyZWVuUmVhY2hEZXN0aW5hdGlvbi55ID0gdHJ1ZTtcbiAgICAgICAgICBldmVudC50cmFuc2xhdGlvblkgPSAtc2NyZWVuRGltZW5zaW9ucy5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGFwcGx5U3R5bGUoc2NyZWVuVHJhbnNpdGlvbkNvbmZpZywgZXZlbnQpO1xuICAgICAgbWF5YmVTY2hlZHVsZU5leHRGcmFtZShcbiAgICAgICAgY29tcHV0ZUZyYW1lLFxuICAgICAgICBkaWRTY3JlZW5SZWFjaERlc3RpbmF0aW9uLnggfHwgZGlkU2NyZWVuUmVhY2hEZXN0aW5hdGlvbi55LFxuICAgICAgICBzY3JlZW5UcmFuc2l0aW9uQ29uZmlnLFxuICAgICAgICBldmVudCxcbiAgICAgICAgaXNUcmFuc2l0aW9uQ2FuY2VsZWRcbiAgICAgICk7XG4gICAgfTtcbiAgICByZXR1cm4gY29tcHV0ZUZyYW1lO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQUFBLE1BQUEsQ0FBQUMsY0FBQSxDQUFBQyxPQUFBO0VBQUFD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