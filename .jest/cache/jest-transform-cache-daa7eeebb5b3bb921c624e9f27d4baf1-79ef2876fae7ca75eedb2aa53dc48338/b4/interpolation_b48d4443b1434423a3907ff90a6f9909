b3566ef652627134e4277925f398e43a
'use strict';
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Extrapolation = void 0;
exports.clamp = clamp;
exports.interpolate = interpolate;
var Extrapolation = exports.Extrapolation = function (Extrapolation) {
  Extrapolation["IDENTITY"] = "identity";
  Extrapolation["CLAMP"] = "clamp";
  Extrapolation["EXTEND"] = "extend";
  return Extrapolation;
}({});
function getVal(type, coef, val, leftEdgeOutput, rightEdgeOutput, x) {
  'worklet';

  switch (type) {
    case Extrapolation.IDENTITY:
      return x;
    case Extrapolation.CLAMP:
      if (coef * val < coef * leftEdgeOutput) {
        return leftEdgeOutput;
      }
      return rightEdgeOutput;
    case Extrapolation.EXTEND:
    default:
      return val;
  }
}
function isExtrapolate(value) {
  'worklet';

  return value === Extrapolation.EXTEND || value === Extrapolation.CLAMP || value === Extrapolation.IDENTITY;
}
function validateType(type) {
  'worklet';
  var extrapolationConfig = {
    extrapolateLeft: Extrapolation.EXTEND,
    extrapolateRight: Extrapolation.EXTEND
  };
  if (!type) {
    return extrapolationConfig;
  }
  if (typeof type === 'string') {
    if (!isExtrapolate(type)) {
      throw new Error(`[Reanimated] Unsupported value for "interpolate" \nSupported values: ["extend", "clamp", "identity", Extrapolatation.CLAMP, Extrapolatation.EXTEND, Extrapolatation.IDENTITY]\n Valid example:
        interpolate(value, [inputRange], [outputRange], "clamp")`);
    }
    extrapolationConfig.extrapolateLeft = type;
    extrapolationConfig.extrapolateRight = type;
    return extrapolationConfig;
  }
  if (type.extrapolateLeft && !isExtrapolate(type.extrapolateLeft) || type.extrapolateRight && !isExtrapolate(type.extrapolateRight)) {
    throw new Error(`[Reanimated] Unsupported value for "interpolate" \nSupported values: ["extend", "clamp", "identity", Extrapolatation.CLAMP, Extrapolatation.EXTEND, Extrapolatation.IDENTITY]\n Valid example:
      interpolate(value, [inputRange], [outputRange], {
        extrapolateLeft: Extrapolation.CLAMP,
        extrapolateRight: Extrapolation.IDENTITY
      }})`);
  }
  Object.assign(extrapolationConfig, type);
  return extrapolationConfig;
}
function internalInterpolate(x, narrowedInput, extrapolationConfig) {
  'worklet';

  var leftEdgeInput = narrowedInput.leftEdgeInput,
    rightEdgeInput = narrowedInput.rightEdgeInput,
    leftEdgeOutput = narrowedInput.leftEdgeOutput,
    rightEdgeOutput = narrowedInput.rightEdgeOutput;
  if (rightEdgeInput - leftEdgeInput === 0) {
    return leftEdgeOutput;
  }
  var progress = (x - leftEdgeInput) / (rightEdgeInput - leftEdgeInput);
  var val = leftEdgeOutput + progress * (rightEdgeOutput - leftEdgeOutput);
  var coef = rightEdgeOutput >= leftEdgeOutput ? 1 : -1;
  if (coef * val < coef * leftEdgeOutput) {
    return getVal(extrapolationConfig.extrapolateLeft, coef, val, leftEdgeOutput, rightEdgeOutput, x);
  } else if (coef * val > coef * rightEdgeOutput) {
    return getVal(extrapolationConfig.extrapolateRight, coef, val, leftEdgeOutput, rightEdgeOutput, x);
  }
  return val;
}
function interpolate(x, inputRange, outputRange, type) {
  'worklet';

  if (inputRange.length < 2 || outputRange.length < 2) {
    throw new Error('[Reanimated] Interpolation input and output ranges should contain at least two values.');
  }
  var extrapolationConfig = validateType(type);
  var length = inputRange.length;
  var narrowedInput = {
    leftEdgeInput: inputRange[0],
    rightEdgeInput: inputRange[1],
    leftEdgeOutput: outputRange[0],
    rightEdgeOutput: outputRange[1]
  };
  if (length > 2) {
    if (x > inputRange[length - 1]) {
      narrowedInput.leftEdgeInput = inputRange[length - 2];
      narrowedInput.rightEdgeInput = inputRange[length - 1];
      narrowedInput.leftEdgeOutput = outputRange[length - 2];
      narrowedInput.rightEdgeOutput = outputRange[length - 1];
    } else {
      for (var i = 1; i < length; ++i) {
        if (x <= inputRange[i]) {
          narrowedInput.leftEdgeInput = inputRange[i - 1];
          narrowedInput.rightEdgeInput = inputRange[i];
          narrowedInput.leftEdgeOutput = outputRange[i - 1];
          narrowedInput.rightEdgeOutput = outputRange[i];
          break;
        }
      }
    }
  }
  return internalInterpolate(x, narrowedInput, extrapolationConfig);
}
function clamp(value, min, max) {
  'worklet';

  return Math.min(Math.max(value, min), max);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkV4dHJhcG9sYXRpb24iLCJjbGFtcCIsImludGVycG9sYXRlIiwiZ2V0VmFsIiwidHlwZSIsImNvZWYiLCJ2YWwiLCJsZWZ0RWRnZU91dHB1dCIsInJpZ2h0RWRnZU91dHB1dCIsIngiLCJJREVOVElUWSIsIkNMQU1QIiwiRVhURU5EIiwiaXNFeHRyYXBvbGF0ZSIsInZhbGlkYXRlVHlwZSIsImV4dHJhcG9sYXRpb25Db25maWciLCJleHRyYXBvbGF0ZUxlZnQiLCJleHRyYXBvbGF0ZVJpZ2h0IiwiRXJyb3IiLCJhc3NpZ24iLCJpbnRlcm5hbEludGVycG9sYXRlIiwibmFycm93ZWRJbnB1dCIsImxlZnRFZGdlSW5wdXQiLCJyaWdodEVkZ2VJbnB1dCIsInByb2dyZXNzIiwiaW5wdXRSYW5nZSIsIm91dHB1dFJhbmdlIiwibGVuZ3RoIiwiaSIsIm1pbiIsIm1heCIsIk1hdGgiXSwic291cmNlcyI6WyJpbnRlcnBvbGF0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBFeHRyYXBvbGF0aW9uIHR5cGUuXG4gKlxuICogQHBhcmFtIElERU5USVRZIC0gUmV0dXJucyB0aGUgcHJvdmlkZWQgdmFsdWUgYXMgaXMuXG4gKiBAcGFyYW0gQ0xBTVAgLSBDbGFtcHMgdGhlIHZhbHVlIHRvIHRoZSBlZGdlIG9mIHRoZSBvdXRwdXQgcmFuZ2UuXG4gKiBAcGFyYW0gRVhURU5EIC0gUHJlZGljdHMgdGhlIHZhbHVlcyBiZXlvbmQgdGhlIG91dHB1dCByYW5nZS5cbiAqL1xuZXhwb3J0IGVudW0gRXh0cmFwb2xhdGlvbiB7XG4gIElERU5USVRZID0gJ2lkZW50aXR5JyxcbiAgQ0xBTVAgPSAnY2xhbXAnLFxuICBFWFRFTkQgPSAnZXh0ZW5kJyxcbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBwb3NzaWJsZSB2YWx1ZXMgZm9yIGV4dHJhcG9sYXRpb24gYXMgYSBzdHJpbmcuXG4gKi9cbnR5cGUgRXh0cmFwb2xhdGlvbkFzU3RyaW5nID0gJ2lkZW50aXR5JyB8ICdjbGFtcCcgfCAnZXh0ZW5kJztcblxuaW50ZXJmYWNlIEludGVycG9sYXRpb25OYXJyb3dlZElucHV0IHtcbiAgbGVmdEVkZ2VJbnB1dDogbnVtYmVyO1xuICByaWdodEVkZ2VJbnB1dDogbnVtYmVyO1xuICBsZWZ0RWRnZU91dHB1dDogbnVtYmVyO1xuICByaWdodEVkZ2VPdXRwdXQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBBbGxvd3MgdG8gc3BlY2lmeSBleHRyYXBvbGF0aW9uIGZvciBsZWZ0IGFuZCByaWdodCBlZGdlIG9mIHRoZSBpbnRlcnBvbGF0aW9uLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEV4dHJhcG9sYXRpb25Db25maWcge1xuICBleHRyYXBvbGF0ZUxlZnQ/OiBFeHRyYXBvbGF0aW9uIHwgc3RyaW5nO1xuICBleHRyYXBvbGF0ZVJpZ2h0PzogRXh0cmFwb2xhdGlvbiB8IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFJlcXVpcmVkRXh0cmFwb2xhdGlvbkNvbmZpZyB7XG4gIGV4dHJhcG9sYXRlTGVmdDogRXh0cmFwb2xhdGlvbjtcbiAgZXh0cmFwb2xhdGVSaWdodDogRXh0cmFwb2xhdGlvbjtcbn1cblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIGV4dHJhcG9sYXRpb24uXG4gKi9cbmV4cG9ydCB0eXBlIEV4dHJhcG9sYXRpb25UeXBlID1cbiAgfCBFeHRyYXBvbGF0aW9uQ29uZmlnXG4gIHwgRXh0cmFwb2xhdGlvblxuICB8IEV4dHJhcG9sYXRpb25Bc1N0cmluZ1xuICB8IHVuZGVmaW5lZDtcblxuZnVuY3Rpb24gZ2V0VmFsKFxuICB0eXBlOiBFeHRyYXBvbGF0aW9uLFxuICBjb2VmOiBudW1iZXIsXG4gIHZhbDogbnVtYmVyLFxuICBsZWZ0RWRnZU91dHB1dDogbnVtYmVyLFxuICByaWdodEVkZ2VPdXRwdXQ6IG51bWJlcixcbiAgeDogbnVtYmVyXG4pOiBudW1iZXIge1xuICAnd29ya2xldCc7XG5cbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBFeHRyYXBvbGF0aW9uLklERU5USVRZOlxuICAgICAgcmV0dXJuIHg7XG4gICAgY2FzZSBFeHRyYXBvbGF0aW9uLkNMQU1QOlxuICAgICAgaWYgKGNvZWYgKiB2YWwgPCBjb2VmICogbGVmdEVkZ2VPdXRwdXQpIHtcbiAgICAgICAgcmV0dXJuIGxlZnRFZGdlT3V0cHV0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJpZ2h0RWRnZU91dHB1dDtcbiAgICBjYXNlIEV4dHJhcG9sYXRpb24uRVhURU5EOlxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdmFsO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzRXh0cmFwb2xhdGUodmFsdWU6IHN0cmluZyk6IHZhbHVlIGlzIEV4dHJhcG9sYXRpb24ge1xuICAnd29ya2xldCc7XG5cbiAgcmV0dXJuIChcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWVudW0tY29tcGFyaXNvbiAqL1xuICAgIHZhbHVlID09PSBFeHRyYXBvbGF0aW9uLkVYVEVORCB8fFxuICAgIHZhbHVlID09PSBFeHRyYXBvbGF0aW9uLkNMQU1QIHx8XG4gICAgdmFsdWUgPT09IEV4dHJhcG9sYXRpb24uSURFTlRJVFlcbiAgICAvKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtZW51bS1jb21wYXJpc29uICovXG4gICk7XG59XG5cbi8vIHZhbGlkYXRlcyBleHRyYXBvbGF0aW9ucyB0eXBlXG4vLyBpZiB0eXBlIGlzIGNvcnJlY3QsIGNvbnZlcnRzIGl0IHRvIEV4dHJhcG9sYXRpb25Db25maWdcbmZ1bmN0aW9uIHZhbGlkYXRlVHlwZSh0eXBlOiBFeHRyYXBvbGF0aW9uVHlwZSk6IFJlcXVpcmVkRXh0cmFwb2xhdGlvbkNvbmZpZyB7XG4gICd3b3JrbGV0JztcbiAgLy8gaW5pdGlhbGl6ZSBleHRyYXBvbGF0aW9uQ29uZmlnIHdpdGggZGVmYXVsdCBleHRyYXBvbGF0aW9uXG4gIGNvbnN0IGV4dHJhcG9sYXRpb25Db25maWc6IFJlcXVpcmVkRXh0cmFwb2xhdGlvbkNvbmZpZyA9IHtcbiAgICBleHRyYXBvbGF0ZUxlZnQ6IEV4dHJhcG9sYXRpb24uRVhURU5ELFxuICAgIGV4dHJhcG9sYXRlUmlnaHQ6IEV4dHJhcG9sYXRpb24uRVhURU5ELFxuICB9O1xuXG4gIGlmICghdHlwZSkge1xuICAgIHJldHVybiBleHRyYXBvbGF0aW9uQ29uZmlnO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJykge1xuICAgIGlmICghaXNFeHRyYXBvbGF0ZSh0eXBlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgW1JlYW5pbWF0ZWRdIFVuc3VwcG9ydGVkIHZhbHVlIGZvciBcImludGVycG9sYXRlXCIgXFxuU3VwcG9ydGVkIHZhbHVlczogW1wiZXh0ZW5kXCIsIFwiY2xhbXBcIiwgXCJpZGVudGl0eVwiLCBFeHRyYXBvbGF0YXRpb24uQ0xBTVAsIEV4dHJhcG9sYXRhdGlvbi5FWFRFTkQsIEV4dHJhcG9sYXRhdGlvbi5JREVOVElUWV1cXG4gVmFsaWQgZXhhbXBsZTpcbiAgICAgICAgaW50ZXJwb2xhdGUodmFsdWUsIFtpbnB1dFJhbmdlXSwgW291dHB1dFJhbmdlXSwgXCJjbGFtcFwiKWBcbiAgICAgICk7XG4gICAgfVxuICAgIGV4dHJhcG9sYXRpb25Db25maWcuZXh0cmFwb2xhdGVMZWZ0ID0gdHlwZTtcbiAgICBleHRyYXBvbGF0aW9uQ29uZmlnLmV4dHJhcG9sYXRlUmlnaHQgPSB0eXBlO1xuICAgIHJldHVybiBleHRyYXBvbGF0aW9uQ29uZmlnO1xuICB9XG5cbiAgLy8gb3RoZXJ3aXNlIHR5cGUgaXMgZXh0cmFwb2xhdGlvbiBjb25maWcgb2JqZWN0XG4gIGlmIChcbiAgICAodHlwZS5leHRyYXBvbGF0ZUxlZnQgJiYgIWlzRXh0cmFwb2xhdGUodHlwZS5leHRyYXBvbGF0ZUxlZnQpKSB8fFxuICAgICh0eXBlLmV4dHJhcG9sYXRlUmlnaHQgJiYgIWlzRXh0cmFwb2xhdGUodHlwZS5leHRyYXBvbGF0ZVJpZ2h0KSlcbiAgKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFtSZWFuaW1hdGVkXSBVbnN1cHBvcnRlZCB2YWx1ZSBmb3IgXCJpbnRlcnBvbGF0ZVwiIFxcblN1cHBvcnRlZCB2YWx1ZXM6IFtcImV4dGVuZFwiLCBcImNsYW1wXCIsIFwiaWRlbnRpdHlcIiwgRXh0cmFwb2xhdGF0aW9uLkNMQU1QLCBFeHRyYXBvbGF0YXRpb24uRVhURU5ELCBFeHRyYXBvbGF0YXRpb24uSURFTlRJVFldXFxuIFZhbGlkIGV4YW1wbGU6XG4gICAgICBpbnRlcnBvbGF0ZSh2YWx1ZSwgW2lucHV0UmFuZ2VdLCBbb3V0cHV0UmFuZ2VdLCB7XG4gICAgICAgIGV4dHJhcG9sYXRlTGVmdDogRXh0cmFwb2xhdGlvbi5DTEFNUCxcbiAgICAgICAgZXh0cmFwb2xhdGVSaWdodDogRXh0cmFwb2xhdGlvbi5JREVOVElUWVxuICAgICAgfX0pYFxuICAgICk7XG4gIH1cblxuICBPYmplY3QuYXNzaWduKGV4dHJhcG9sYXRpb25Db25maWcsIHR5cGUpO1xuICByZXR1cm4gZXh0cmFwb2xhdGlvbkNvbmZpZztcbn1cblxuZnVuY3Rpb24gaW50ZXJuYWxJbnRlcnBvbGF0ZShcbiAgeDogbnVtYmVyLFxuICBuYXJyb3dlZElucHV0OiBJbnRlcnBvbGF0aW9uTmFycm93ZWRJbnB1dCxcbiAgZXh0cmFwb2xhdGlvbkNvbmZpZzogUmVxdWlyZWRFeHRyYXBvbGF0aW9uQ29uZmlnXG4pIHtcbiAgJ3dvcmtsZXQnO1xuICBjb25zdCB7IGxlZnRFZGdlSW5wdXQsIHJpZ2h0RWRnZUlucHV0LCBsZWZ0RWRnZU91dHB1dCwgcmlnaHRFZGdlT3V0cHV0IH0gPVxuICAgIG5hcnJvd2VkSW5wdXQ7XG4gIGlmIChyaWdodEVkZ2VJbnB1dCAtIGxlZnRFZGdlSW5wdXQgPT09IDApIHtcbiAgICByZXR1cm4gbGVmdEVkZ2VPdXRwdXQ7XG4gIH1cbiAgY29uc3QgcHJvZ3Jlc3MgPSAoeCAtIGxlZnRFZGdlSW5wdXQpIC8gKHJpZ2h0RWRnZUlucHV0IC0gbGVmdEVkZ2VJbnB1dCk7XG4gIGNvbnN0IHZhbCA9IGxlZnRFZGdlT3V0cHV0ICsgcHJvZ3Jlc3MgKiAocmlnaHRFZGdlT3V0cHV0IC0gbGVmdEVkZ2VPdXRwdXQpO1xuICBjb25zdCBjb2VmID0gcmlnaHRFZGdlT3V0cHV0ID49IGxlZnRFZGdlT3V0cHV0ID8gMSA6IC0xO1xuXG4gIGlmIChjb2VmICogdmFsIDwgY29lZiAqIGxlZnRFZGdlT3V0cHV0KSB7XG4gICAgcmV0dXJuIGdldFZhbChcbiAgICAgIGV4dHJhcG9sYXRpb25Db25maWcuZXh0cmFwb2xhdGVMZWZ0LFxuICAgICAgY29lZixcbiAgICAgIHZhbCxcbiAgICAgIGxlZnRFZGdlT3V0cHV0LFxuICAgICAgcmlnaHRFZGdlT3V0cHV0LFxuICAgICAgeFxuICAgICk7XG4gIH0gZWxzZSBpZiAoY29lZiAqIHZhbCA+IGNvZWYgKiByaWdodEVkZ2VPdXRwdXQpIHtcbiAgICByZXR1cm4gZ2V0VmFsKFxuICAgICAgZXh0cmFwb2xhdGlvbkNvbmZpZy5leHRyYXBvbGF0ZVJpZ2h0LFxuICAgICAgY29lZixcbiAgICAgIHZhbCxcbiAgICAgIGxlZnRFZGdlT3V0cHV0LFxuICAgICAgcmlnaHRFZGdlT3V0cHV0LFxuICAgICAgeFxuICAgICk7XG4gIH1cblxuICByZXR1cm4gdmFsO1xufVxuXG4vKipcbiAqIExldHMgeW91IG1hcCBhIHZhbHVlIGZyb20gb25lIHJhbmdlIHRvIGFub3RoZXIgdXNpbmcgbGluZWFyIGludGVycG9sYXRpb24uXG4gKlxuICogQHBhcmFtIHZhbHVlIC0gQSBudW1iZXIgZnJvbSB0aGUgYGlucHV0YCByYW5nZSB0aGF0IGlzIGdvaW5nIHRvIGJlIG1hcHBlZCB0byB0aGUgYG91dHB1dGAgcmFuZ2UuXG4gKiBAcGFyYW0gaW5wdXRSYW5nZSAtIEFuIGFycmF5IG9mIG51bWJlcnMgc3BlY2lmeWluZyB0aGUgaW5wdXQgcmFuZ2Ugb2YgdGhlIGludGVycG9sYXRpb24uXG4gKiBAcGFyYW0gb3V0cHV0UmFuZ2UgLSBBbiBhcnJheSBvZiBudW1iZXJzIHNwZWNpZnlpbmcgdGhlIG91dHB1dCByYW5nZSBvZiB0aGUgaW50ZXJwb2xhdGlvbi5cbiAqIEBwYXJhbSBleHRyYXBvbGF0ZSAtIGRldGVybWluZXMgd2hhdCBoYXBwZW5zIHdoZW4gdGhlIGB2YWx1ZWAgZ29lcyBiZXlvbmQgdGhlIGBpbnB1dGAgcmFuZ2UuIERlZmF1bHRzIHRvIGBFeHRyYXBvbGF0aW9uLkVYVEVORGAgLSB7QGxpbmsgRXh0cmFwb2xhdGlvblR5cGV9LlxuICogQHJldHVybnMgQSBtYXBwZWQgdmFsdWUgd2l0aGluIHRoZSBvdXRwdXQgcmFuZ2UuXG4gKiBAc2VlIGh0dHBzOi8vZG9jcy5zd21hbnNpb24uY29tL3JlYWN0LW5hdGl2ZS1yZWFuaW1hdGVkL2RvY3MvdXRpbGl0aWVzL2ludGVycG9sYXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnBvbGF0ZShcbiAgeDogbnVtYmVyLFxuICBpbnB1dFJhbmdlOiByZWFkb25seSBudW1iZXJbXSxcbiAgb3V0cHV0UmFuZ2U6IHJlYWRvbmx5IG51bWJlcltdLFxuICB0eXBlPzogRXh0cmFwb2xhdGlvblR5cGVcbik6IG51bWJlciB7XG4gICd3b3JrbGV0JztcbiAgaWYgKGlucHV0UmFuZ2UubGVuZ3RoIDwgMiB8fCBvdXRwdXRSYW5nZS5sZW5ndGggPCAyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ1tSZWFuaW1hdGVkXSBJbnRlcnBvbGF0aW9uIGlucHV0IGFuZCBvdXRwdXQgcmFuZ2VzIHNob3VsZCBjb250YWluIGF0IGxlYXN0IHR3byB2YWx1ZXMuJ1xuICAgICk7XG4gIH1cblxuICBjb25zdCBleHRyYXBvbGF0aW9uQ29uZmlnID0gdmFsaWRhdGVUeXBlKHR5cGUpO1xuICBjb25zdCBsZW5ndGggPSBpbnB1dFJhbmdlLmxlbmd0aDtcbiAgY29uc3QgbmFycm93ZWRJbnB1dDogSW50ZXJwb2xhdGlvbk5hcnJvd2VkSW5wdXQgPSB7XG4gICAgbGVmdEVkZ2VJbnB1dDogaW5wdXRSYW5nZVswXSxcbiAgICByaWdodEVkZ2VJbnB1dDogaW5wdXRSYW5nZVsxXSxcbiAgICBsZWZ0RWRnZU91dHB1dDogb3V0cHV0UmFuZ2VbMF0sXG4gICAgcmlnaHRFZGdlT3V0cHV0OiBvdXRwdXRSYW5nZVsxXSxcbiAgfTtcbiAgaWYgKGxlbmd0aCA+IDIpIHtcbiAgICBpZiAoeCA+IGlucHV0UmFuZ2VbbGVuZ3RoIC0gMV0pIHtcbiAgICAgIG5hcnJvd2VkSW5wdXQubGVmdEVkZ2VJbnB1dCA9IGlucHV0UmFuZ2VbbGVuZ3RoIC0gMl07XG4gICAgICBuYXJyb3dlZElucHV0LnJpZ2h0RWRnZUlucHV0ID0gaW5wdXRSYW5nZVtsZW5ndGggLSAxXTtcbiAgICAgIG5hcnJvd2VkSW5wdXQubGVmdEVkZ2VPdXRwdXQgPSBvdXRwdXRSYW5nZVtsZW5ndGggLSAyXTtcbiAgICAgIG5hcnJvd2VkSW5wdXQucmlnaHRFZGdlT3V0cHV0ID0gb3V0cHV0UmFuZ2VbbGVuZ3RoIC0gMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKHggPD0gaW5wdXRSYW5nZVtpXSkge1xuICAgICAgICAgIG5hcnJvd2VkSW5wdXQubGVmdEVkZ2VJbnB1dCA9IGlucHV0UmFuZ2VbaSAtIDFdO1xuICAgICAgICAgIG5hcnJvd2VkSW5wdXQucmlnaHRFZGdlSW5wdXQgPSBpbnB1dFJhbmdlW2ldO1xuICAgICAgICAgIG5hcnJvd2VkSW5wdXQubGVmdEVkZ2VPdXRwdXQgPSBvdXRwdXRSYW5nZVtpIC0gMV07XG4gICAgICAgICAgbmFycm93ZWRJbnB1dC5yaWdodEVkZ2VPdXRwdXQgPSBvdXRwdXRSYW5nZVtpXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpbnRlcm5hbEludGVycG9sYXRlKHgsIG5hcnJvd2VkSW5wdXQsIGV4dHJhcG9sYXRpb25Db25maWcpO1xufVxuXG4vKipcbiAqIExldHMgeW91IGxpbWl0IGEgdmFsdWUgd2l0aGluIGEgc3BlY2lmaWVkIHJhbmdlLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSAtIEEgbnVtYmVyIHRoYXQgd2lsbCBiZSByZXR1cm5lZCBhcyBsb25nIGFzIHRoZSBwcm92aWRlZCB2YWx1ZSBpcyBpbiByYW5nZSBiZXR3ZWVuIGBtaW5gIGFuZCBgbWF4YC5cbiAqIEBwYXJhbSBtaW4gLSBBIG51bWJlciB3aGljaCB3aWxsIGJlIHJldHVybmVkIHdoZW4gcHJvdmlkZWQgYHZhbHVlYCBpcyBsb3dlciB0aGFuIGBtaW5gLlxuICogQHBhcmFtIG1heCAtIEEgbnVtYmVyIHdoaWNoIHdpbGwgYmUgcmV0dXJuZWQgd2hlbiBwcm92aWRlZCBgdmFsdWVgIGlzIGhpZ2hlciB0aGFuIGBtYXhgLlxuICogQHJldHVybnMgQSBudW1iZXIgYmV0d2VlbiBtaW4gYW5kIG1heCBib3VuZHMuXG4gKiBAc2VlIGh0dHBzOi8vZG9jcy5zd21hbnNpb24uY29tL3JlYWN0LW5hdGl2ZS1yZWFuaW1hdGVkL2RvY3MvdXRpbGl0aWVzL2NsYW1wL1xuICovXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAodmFsdWU6IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKSB7XG4gICd3b3JrbGV0JztcbiAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHZhbHVlLCBtaW4pLCBtYXgpO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZO0FBQUNBLE1BQUEsQ0FBQUMsY0FBQSxDQUFBQyxPQUFBO0VBQUFDLEtBQUE7QUFBQTtBQUFBRCxPQUFBLENBQUFFLGFBQUE7QUFBQUYsT0FBQSxDQUFBRyxLQUFBLEdBQUFBLEtBQUE7QUFBQUgsT0FBQSxDQUFBSSxXQUFBLEdBQUFBLFdBQUE7QUFBQSxJQVNERixhQUFhLEdBQUFGLE9BQUEsQ0FB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