9d0385082dc8e07560af1ec3f3835f81
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.EntryExitTransition = void 0;
exports.combineTransition = combineTransition;
var _defineProperty3 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _animationBuilder = require("../animationBuilder");
var _animation = require("../../animation");
var _Fade = require("../defaultAnimations/Fade");
function _callSuper(t, o, e) { return o = (0, _getPrototypeOf2.default)(o), (0, _possibleConstructorReturn2.default)(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2.default)(t).constructor) : o.apply(t, e)); }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _defineProperty(obj, key, value) {
  key = _toPropertyKey(key);
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey(t) {
  var i = _toPrimitive(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive(t, r) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r || "default");
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r ? String : Number)(t);
}
var EntryExitTransition = exports.EntryExitTransition = function (_BaseAnimationBuilder) {
  function EntryExitTransition() {
    var _this;
    (0, _classCallCheck2.default)(this, EntryExitTransition);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _callSuper(this, EntryExitTransition, [].concat(args));
    _defineProperty(_this, "enteringV", _Fade.FadeIn);
    _defineProperty(_this, "exitingV", _Fade.FadeOut);
    _defineProperty(_this, "build", function () {
      var delayFunction = _this.getDelayFunction();
      var callback = _this.callbackV;
      var delay = _this.getDelay();
      var enteringAnimation = _this.enteringV.build();
      var exitingAnimation = _this.exitingV.build();
      var exitingDuration = _this.exitingV.getDuration();
      return function (values) {
        'worklet';

        var enteringValues = enteringAnimation(values);
        var exitingValues = exitingAnimation(values);
        var animations = {
          transform: []
        };
        for (var prop of Object.keys(exitingValues.animations)) {
          if (prop === 'transform') {
            if (!Array.isArray(exitingValues.animations.transform)) {
              continue;
            }
            exitingValues.animations.transform.forEach(function (value, index) {
              for (var transformProp of Object.keys(value)) {
                animations.transform.push((0, _defineProperty3.default)({}, transformProp, delayFunction(delay, (0, _animation.withSequence)(value[transformProp], (0, _animation.withTiming)(exitingValues.initialValues.transform ? exitingValues.initialValues.transform[index][transformProp] : 0, {
                  duration: 0
                })))));
              }
            });
          } else {
            var sequence = enteringValues.animations[prop] !== undefined ? [exitingValues.animations[prop], (0, _animation.withTiming)(enteringValues.initialValues[prop], {
              duration: 0
            }), enteringValues.animations[prop]] : [exitingValues.animations[prop], (0, _animation.withTiming)(Object.keys(values).includes(prop) ? values[prop] : exitingValues.initialValues[prop], {
              duration: 0
            })];
            animations[prop] = delayFunction(delay, _animation.withSequence.apply(void 0, sequence));
          }
        }
        for (var _prop of Object.keys(enteringValues.animations)) {
          if (_prop === 'transform') {
            if (!Array.isArray(enteringValues.animations.transform)) {
              continue;
            }
            enteringValues.animations.transform.forEach(function (value, index) {
              for (var transformProp of Object.keys(value)) {
                animations.transform.push((0, _defineProperty3.default)({}, transformProp, delayFunction(delay + exitingDuration, (0, _animation.withSequence)((0, _animation.withTiming)(enteringValues.initialValues.transform ? enteringValues.initialValues.transform[index][transformProp] : 0, {
                  duration: exitingDuration
                }), value[transformProp]))));
              }
            });
          } else if (animations[_prop] !== undefined) {
            continue;
          } else {
            animations[_prop] = delayFunction(delay, (0, _animation.withSequence)((0, _animation.withTiming)(enteringValues.initialValues[_prop], {
              duration: 0
            }), enteringValues.animations[_prop]));
          }
        }
        var mergedTransform = (Array.isArray(exitingValues.initialValues.transform) ? exitingValues.initialValues.transform : []).concat((Array.isArray(enteringValues.animations.transform) ? enteringValues.animations.transform : []).map(function (value) {
          var objectKeys = Object.keys(value);
          if ((objectKeys === null || objectKeys === void 0 ? void 0 : objectKeys.length) < 1) {
            console.error(`[Reanimated]: \${value} is not a valid Transform object`);
            return value;
          }
          var transformProp = objectKeys[0];
          var current = value[transformProp].current;
          if (typeof current === 'string') {
            if (current.includes('deg')) {
              return (0, _defineProperty3.default)({}, transformProp, '0deg');
            } else {
              return (0, _defineProperty3.default)({}, transformProp, '0');
            }
          } else if (transformProp.includes('translate')) {
            return (0, _defineProperty3.default)({}, transformProp, 0);
          } else {
            return (0, _defineProperty3.default)({}, transformProp, 1);
          }
        }));
        return {
          initialValues: Object.assign({}, exitingValues.initialValues, {
            originX: values.currentOriginX,
            originY: values.currentOriginY,
            width: values.currentWidth,
            height: values.currentHeight,
            transform: mergedTransform
          }),
          animations: Object.assign({
            originX: delayFunction(delay + exitingDuration, (0, _animation.withTiming)(values.targetOriginX, {
              duration: exitingDuration
            })),
            originY: delayFunction(delay + exitingDuration, (0, _animation.withTiming)(values.targetOriginY, {
              duration: exitingDuration
            })),
            width: delayFunction(delay + exitingDuration, (0, _animation.withTiming)(values.targetWidth, {
              duration: exitingDuration
            })),
            height: delayFunction(delay + exitingDuration, (0, _animation.withTiming)(values.targetHeight, {
              duration: exitingDuration
            }))
          }, animations),
          callback: callback
        };
      };
    });
    return _this;
  }
  (0, _inherits2.default)(EntryExitTransition, _BaseAnimationBuilder);
  return (0, _createClass2.default)(EntryExitTransition, [{
    key: "entering",
    value: function entering(animation) {
      this.enteringV = animation;
      return this;
    }
  }, {
    key: "exiting",
    value: function exiting(animation) {
      this.exitingV = animation;
      return this;
    }
  }], [{
    key: "createInstance",
    value: function createInstance() {
      return new EntryExitTransition();
    }
  }, {
    key: "entering",
    value: function entering(animation) {
      var instance = this.createInstance();
      return instance.entering(animation);
    }
  }, {
    key: "exiting",
    value: function exiting(animation) {
      var instance = this.createInstance();
      return instance.exiting(animation);
    }
  }]);
}(_animationBuilder.BaseAnimationBuilder);
_defineProperty(EntryExitTransition, "presetName", 'EntryExitTransition');
function combineTransition(exiting, entering) {
  return EntryExitTransition.entering(entering).exiting(exiting);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiRW50cnlFeGl0VHJhbnNpdGlvbiIsImNvbWJpbmVUcmFuc2l0aW9uIiwiX2RlZmluZVByb3BlcnR5MyIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY3JlYXRlQ2xhc3MyIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yIiwiX2dldFByb3RvdHlwZU9mMiIsIl9pbmhlcml0czIiLCJfYW5pbWF0aW9uQnVpbGRlciIsIl9hbmltYXRpb24iLCJfRmFkZSIsIl9jYWxsU3VwZXIiLCJ0IiwibyIsImUiLCJkZWZhdWx0IiwiX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsIlJlZmxlY3QiLCJjb25zdHJ1Y3QiLCJjb25zdHJ1Y3RvciIsImFwcGx5IiwiQm9vbGVhbiIsInByb3RvdHlwZSIsInZhbHVlT2YiLCJjYWxsIiwiX2RlZmluZVByb3BlcnR5Iiwib2JqIiwia2V5IiwiX3RvUHJvcGVydHlLZXkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJpIiwiX3RvUHJpbWl0aXZlIiwiciIsIlN5bWJvbCIsInRvUHJpbWl0aXZlIiwiVHlwZUVycm9yIiwiU3RyaW5nIiwiTnVtYmVyIiwiX0Jhc2VBbmltYXRpb25CdWlsZGVyIiwiX3RoaXMiLCJfbGVuIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiYXJncyIsIkFycmF5IiwiX2tleSIsImNvbmNhdCIsIkZhZGVJbiIsIkZhZGVPdXQiLCJkZWxheUZ1bmN0aW9uIiwiZ2V0RGVsYXlGdW5jdGlvbiIsImNhbGxiYWNrIiwiY2FsbGJhY2tWIiwiZGVsYXkiLCJnZXREZWxheSIsImVudGVyaW5nQW5pbWF0aW9uIiwiZW50ZXJpbmdWIiwiYnVpbGQiLCJleGl0aW5nQW5pbWF0aW9uIiwiZXhpdGluZ1YiLCJleGl0aW5nRHVyYXRpb24iLCJnZXREdXJhdGlvbiIsInZhbHVlcyIsImVudGVyaW5nVmFsdWVzIiwiZXhpdGluZ1ZhbHVlcyIsImFuaW1hdGlvbnMiLCJ0cmFuc2Zvcm0iLCJwcm9wIiwia2V5cyIsImlzQXJyYXkiLCJmb3JFYWNoIiwiaW5kZXgiLCJ0cmFuc2Zvcm1Qcm9wIiwicHVzaCIsIndpdGhTZXF1ZW5jZSIsIndpdGhUaW1pbmciLCJpbml0aWFsVmFsdWVzIiwiZHVyYXRpb24iLCJzZXF1ZW5jZSIsInVuZGVmaW5lZCIsImluY2x1ZGVzIiwibWVyZ2VkVHJhbnNmb3JtIiwibWFwIiwib2JqZWN0S2V5cyIsImNvbnNvbGUiLCJlcnJvciIsImN1cnJlbnQiLCJhc3NpZ24iLCJvcmlnaW5YIiwiY3VycmVudE9yaWdpblgiLCJvcmlnaW5ZIiwiY3VycmVudE9yaWdpblkiLCJ3aWR0aCIsImN1cnJlbnRXaWR0aCIsImhlaWdodCIsImN1cnJlbnRIZWlnaHQiLCJ0YXJnZXRPcmlnaW5YIiwidGFyZ2V0T3JpZ2luWSIsInRhcmdldFdpZHRoIiwidGFyZ2V0SGVpZ2h0IiwiZW50ZXJpbmciLCJhbmltYXRpb24iLCJleGl0aW5nIiwiY3JlYXRlSW5zdGFuY2UiLCJpbnN0YW5jZSIsIkJhc2VBbmltYXRpb25CdWlsZGVyIl0sInNvdXJjZXMiOlsiRW50cnlFeGl0VHJhbnNpdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5pbXBvcnQgdHlwZSB7XG4gIElMYXlvdXRBbmltYXRpb25CdWlsZGVyLFxuICBMYXlvdXRBbmltYXRpb25zVmFsdWVzLFxuICBMYXlvdXRBbmltYXRpb25GdW5jdGlvbixcbiAgU3R5bGVQcm9wc1dpdGhBcnJheVRyYW5zZm9ybSxcbn0gZnJvbSAnLi4vYW5pbWF0aW9uQnVpbGRlci9jb21tb25UeXBlcyc7XG5pbXBvcnQgeyBCYXNlQW5pbWF0aW9uQnVpbGRlciB9IGZyb20gJy4uL2FuaW1hdGlvbkJ1aWxkZXInO1xuaW1wb3J0IHsgd2l0aFNlcXVlbmNlLCB3aXRoVGltaW5nIH0gZnJvbSAnLi4vLi4vYW5pbWF0aW9uJztcbmltcG9ydCB7IEZhZGVJbiwgRmFkZU91dCB9IGZyb20gJy4uL2RlZmF1bHRBbmltYXRpb25zL0ZhZGUnO1xuaW1wb3J0IHR5cGUge1xuICBBbmltYXRhYmxlVmFsdWUsXG4gIEFuaW1hdGlvbk9iamVjdCxcbiAgVHJhbnNmb3JtQXJyYXlJdGVtLFxufSBmcm9tICcuLi8uLi9jb21tb25UeXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBFbnRyeUV4aXRUcmFuc2l0aW9uXG4gIGV4dGVuZHMgQmFzZUFuaW1hdGlvbkJ1aWxkZXJcbiAgaW1wbGVtZW50cyBJTGF5b3V0QW5pbWF0aW9uQnVpbGRlclxue1xuICBzdGF0aWMgcHJlc2V0TmFtZSA9ICdFbnRyeUV4aXRUcmFuc2l0aW9uJztcblxuICBlbnRlcmluZ1Y6IEJhc2VBbmltYXRpb25CdWlsZGVyIHwgdHlwZW9mIEJhc2VBbmltYXRpb25CdWlsZGVyID0gRmFkZUluO1xuXG4gIGV4aXRpbmdWOiBCYXNlQW5pbWF0aW9uQnVpbGRlciB8IHR5cGVvZiBCYXNlQW5pbWF0aW9uQnVpbGRlciA9IEZhZGVPdXQ7XG5cbiAgc3RhdGljIGNyZWF0ZUluc3RhbmNlPFQgZXh0ZW5kcyB0eXBlb2YgQmFzZUFuaW1hdGlvbkJ1aWxkZXI+KFxuICAgIHRoaXM6IFRcbiAgKTogSW5zdGFuY2VUeXBlPFQ+IHtcbiAgICByZXR1cm4gbmV3IEVudHJ5RXhpdFRyYW5zaXRpb24oKSBhcyBJbnN0YW5jZVR5cGU8VD47XG4gIH1cblxuICBzdGF0aWMgZW50ZXJpbmcoXG4gICAgYW5pbWF0aW9uOiBCYXNlQW5pbWF0aW9uQnVpbGRlciB8IHR5cGVvZiBCYXNlQW5pbWF0aW9uQnVpbGRlclxuICApOiBFbnRyeUV4aXRUcmFuc2l0aW9uIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuY3JlYXRlSW5zdGFuY2UoKTtcbiAgICByZXR1cm4gaW5zdGFuY2UuZW50ZXJpbmcoYW5pbWF0aW9uKTtcbiAgfVxuXG4gIGVudGVyaW5nKFxuICAgIGFuaW1hdGlvbjogQmFzZUFuaW1hdGlvbkJ1aWxkZXIgfCB0eXBlb2YgQmFzZUFuaW1hdGlvbkJ1aWxkZXJcbiAgKTogRW50cnlFeGl0VHJhbnNpdGlvbiB7XG4gICAgdGhpcy5lbnRlcmluZ1YgPSBhbmltYXRpb247XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBzdGF0aWMgZXhpdGluZyhcbiAgICBhbmltYXRpb246IEJhc2VBbmltYXRpb25CdWlsZGVyIHwgdHlwZW9mIEJhc2VBbmltYXRpb25CdWlsZGVyXG4gICk6IEVudHJ5RXhpdFRyYW5zaXRpb24ge1xuICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5jcmVhdGVJbnN0YW5jZSgpO1xuICAgIHJldHVybiBpbnN0YW5jZS5leGl0aW5nKGFuaW1hdGlvbik7XG4gIH1cblxuICBleGl0aW5nKFxuICAgIGFuaW1hdGlvbjogQmFzZUFuaW1hdGlvbkJ1aWxkZXIgfCB0eXBlb2YgQmFzZUFuaW1hdGlvbkJ1aWxkZXJcbiAgKTogRW50cnlFeGl0VHJhbnNpdGlvbiB7XG4gICAgdGhpcy5leGl0aW5nViA9IGFuaW1hdGlvbjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGJ1aWxkID0gKCk6IExheW91dEFuaW1hdGlvbkZ1bmN0aW9uID0+IHtcbiAgICBjb25zdCBkZWxheUZ1bmN0aW9uID0gdGhpcy5nZXREZWxheUZ1bmN0aW9uKCk7XG4gICAgY29uc3QgY2FsbGJhY2sgPSB0aGlzLmNhbGxiYWNrVjtcbiAgICBjb25zdCBkZWxheSA9IHRoaXMuZ2V0RGVsYXkoKTtcbiAgICAvLyBAdHMtaWdub3JlIENhbGxpbmcgYC5idWlsZCgpYCBib3RoIHN0YXRpYyBhbmQgaW5zdGFuY2UgbWV0aG9kcyB3b3JrcyBmaW5lIGhlcmUsIGJ1dCBgdGhpc2AgdHlwZXMgYXJlIGluY29tcGF0aWJsZS4gVGhleSBhcmUgbm90IHVzZWQgdGhvdWdoLCBzbyBpdCdzIGZpbmUuXG4gICAgY29uc3QgZW50ZXJpbmdBbmltYXRpb24gPSB0aGlzLmVudGVyaW5nVi5idWlsZCgpO1xuICAgIC8vIEB0cy1pZ25vcmUgQ2FsbGluZyBgLmJ1aWxkKClgIGJvdGggc3RhdGljIGFuZCBpbnN0YW5jZSBtZXRob2RzIHdvcmtzIGZpbmUgaGVyZSwgYnV0IGB0aGlzYCB0eXBlcyBhcmUgaW5jb21wYXRpYmxlLiBUaGV5IGFyZSBub3QgdXNlZCB0aG91Z2gsIHNvIGl0J3MgZmluZS5cbiAgICBjb25zdCBleGl0aW5nQW5pbWF0aW9uID0gdGhpcy5leGl0aW5nVi5idWlsZCgpO1xuICAgIGNvbnN0IGV4aXRpbmdEdXJhdGlvbiA9IHRoaXMuZXhpdGluZ1YuZ2V0RHVyYXRpb24oKTtcblxuICAgIHJldHVybiAodmFsdWVzKSA9PiB7XG4gICAgICAnd29ya2xldCc7XG4gICAgICBjb25zdCBlbnRlcmluZ1ZhbHVlcyA9IGVudGVyaW5nQW5pbWF0aW9uKHZhbHVlcyk7XG4gICAgICBjb25zdCBleGl0aW5nVmFsdWVzID0gZXhpdGluZ0FuaW1hdGlvbih2YWx1ZXMpO1xuICAgICAgY29uc3QgYW5pbWF0aW9uczogU3R5bGVQcm9wc1dpdGhBcnJheVRyYW5zZm9ybSA9IHtcbiAgICAgICAgdHJhbnNmb3JtOiBbXSxcbiAgICAgIH07XG5cbiAgICAgIGZvciAoY29uc3QgcHJvcCBvZiBPYmplY3Qua2V5cyhleGl0aW5nVmFsdWVzLmFuaW1hdGlvbnMpKSB7XG4gICAgICAgIGlmIChwcm9wID09PSAndHJhbnNmb3JtJykge1xuICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShleGl0aW5nVmFsdWVzLmFuaW1hdGlvbnMudHJhbnNmb3JtKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGV4aXRpbmdWYWx1ZXMuYW5pbWF0aW9ucy50cmFuc2Zvcm0uZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRyYW5zZm9ybVByb3Agb2YgT2JqZWN0LmtleXModmFsdWUpKSB7XG4gICAgICAgICAgICAgIGFuaW1hdGlvbnMudHJhbnNmb3JtIS5wdXNoKHtcbiAgICAgICAgICAgICAgICBbdHJhbnNmb3JtUHJvcF06IGRlbGF5RnVuY3Rpb24oXG4gICAgICAgICAgICAgICAgICBkZWxheSxcbiAgICAgICAgICAgICAgICAgIHdpdGhTZXF1ZW5jZShcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVbdHJhbnNmb3JtUHJvcCBhcyBrZXlvZiBUcmFuc2Zvcm1BcnJheUl0ZW1dLFxuICAgICAgICAgICAgICAgICAgICB3aXRoVGltaW5nKFxuICAgICAgICAgICAgICAgICAgICAgIGV4aXRpbmdWYWx1ZXMuaW5pdGlhbFZhbHVlcy50cmFuc2Zvcm1cbiAgICAgICAgICAgICAgICAgICAgICAgID8gLy8gVE9ETyBUWVBFU0NSSVBUXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgVGhpcyBsaW5lIG9mIGNvZGUgZmFpbHMgdHJhZ2ljYWxseVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbiBuZXdlciB2ZXJzaW9ucyBvZiBSZWFjdCBOYXRpdmUsIHdoZXJlIHRoZXkgaGF2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBuYXJyb3dlZCBkb3duIHRoZSB0eXBlIG9mIGB0cmFuc2Zvcm1gIGV2ZW4gZnVydGhlci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2luY2UgdGhpcyBwaWVjZSBvZiBjb2RlIGltcHJvcGVybHkgdHlwZWQgYW55d2F5XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChlLmcuIGl0IGFzc3VtZXMgdHlwZXMgZnJvbSBSTiBBbmltYXRlZCBoZXJlKSBJJ2QgcmF0aGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpeCBpdCBpbiB0aGUgZnV0dXJlIHdoZW4gdHlwZXMgZm9yIGFuaW1hdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXJlIHByb3Blcmx5IGRlZmluZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXRpbmdWYWx1ZXMuaW5pdGlhbFZhbHVlcy50cmFuc2Zvcm1baW5kZXhdW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVByb3BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAwLFxuICAgICAgICAgICAgICAgICAgICAgIHsgZHVyYXRpb246IDAgfVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgfSBhcyBUcmFuc2Zvcm1BcnJheUl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHNlcXVlbmNlID1cbiAgICAgICAgICAgIGVudGVyaW5nVmFsdWVzLmFuaW1hdGlvbnNbcHJvcF0gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICAgIGV4aXRpbmdWYWx1ZXMuYW5pbWF0aW9uc1twcm9wXSxcbiAgICAgICAgICAgICAgICAgIHdpdGhUaW1pbmcoZW50ZXJpbmdWYWx1ZXMuaW5pdGlhbFZhbHVlc1twcm9wXSwge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgZW50ZXJpbmdWYWx1ZXMuYW5pbWF0aW9uc1twcm9wXSxcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgIDogW1xuICAgICAgICAgICAgICAgICAgZXhpdGluZ1ZhbHVlcy5hbmltYXRpb25zW3Byb3BdLFxuICAgICAgICAgICAgICAgICAgd2l0aFRpbWluZyhcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXModmFsdWVzKS5pbmNsdWRlcyhwcm9wKVxuICAgICAgICAgICAgICAgICAgICAgID8gdmFsdWVzW3Byb3AgYXMga2V5b2YgTGF5b3V0QW5pbWF0aW9uc1ZhbHVlc11cbiAgICAgICAgICAgICAgICAgICAgICA6IGV4aXRpbmdWYWx1ZXMuaW5pdGlhbFZhbHVlc1twcm9wXSxcbiAgICAgICAgICAgICAgICAgICAgeyBkdXJhdGlvbjogMCB9XG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF07XG5cbiAgICAgICAgICBhbmltYXRpb25zW3Byb3BdID0gZGVsYXlGdW5jdGlvbihkZWxheSwgd2l0aFNlcXVlbmNlKC4uLnNlcXVlbmNlKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgcHJvcCBvZiBPYmplY3Qua2V5cyhlbnRlcmluZ1ZhbHVlcy5hbmltYXRpb25zKSkge1xuICAgICAgICBpZiAocHJvcCA9PT0gJ3RyYW5zZm9ybScpIHtcbiAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZW50ZXJpbmdWYWx1ZXMuYW5pbWF0aW9ucy50cmFuc2Zvcm0pKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZW50ZXJpbmdWYWx1ZXMuYW5pbWF0aW9ucy50cmFuc2Zvcm0uZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRyYW5zZm9ybVByb3Agb2YgT2JqZWN0LmtleXModmFsdWUpKSB7XG4gICAgICAgICAgICAgIGFuaW1hdGlvbnMudHJhbnNmb3JtIS5wdXNoKHtcbiAgICAgICAgICAgICAgICBbdHJhbnNmb3JtUHJvcF06IGRlbGF5RnVuY3Rpb24oXG4gICAgICAgICAgICAgICAgICBkZWxheSArIGV4aXRpbmdEdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgIHdpdGhTZXF1ZW5jZShcbiAgICAgICAgICAgICAgICAgICAgd2l0aFRpbWluZyhcbiAgICAgICAgICAgICAgICAgICAgICBlbnRlcmluZ1ZhbHVlcy5pbml0aWFsVmFsdWVzLnRyYW5zZm9ybVxuICAgICAgICAgICAgICAgICAgICAgICAgPyAoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudGVyaW5nVmFsdWVzLmluaXRpYWxWYWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmFuc2Zvcm0gYXMgVHJhbnNmb3JtQXJyYXlJdGVtW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVtpbmRleF1bXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtUHJvcCBhcyBrZXlvZiBUcmFuc2Zvcm1BcnJheUl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXSBhcyBBbmltYXRhYmxlVmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgeyBkdXJhdGlvbjogZXhpdGluZ0R1cmF0aW9uIH1cbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVbXG4gICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtUHJvcCBhcyBrZXlvZiBUcmFuc2Zvcm1BcnJheUl0ZW1cbiAgICAgICAgICAgICAgICAgICAgXSBhcyBBbmltYXRhYmxlVmFsdWVcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICB9IGFzIFRyYW5zZm9ybUFycmF5SXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoYW5pbWF0aW9uc1twcm9wXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgLy8gaXQgd2FzIGFscmVhZHkgYWRkZWQgaW4gdGhlIHByZXZpb3VzIGxvb3BcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhbmltYXRpb25zW3Byb3BdID0gZGVsYXlGdW5jdGlvbihcbiAgICAgICAgICAgIGRlbGF5LFxuICAgICAgICAgICAgd2l0aFNlcXVlbmNlKFxuICAgICAgICAgICAgICB3aXRoVGltaW5nKGVudGVyaW5nVmFsdWVzLmluaXRpYWxWYWx1ZXNbcHJvcF0sIHsgZHVyYXRpb246IDAgfSksXG4gICAgICAgICAgICAgIGVudGVyaW5nVmFsdWVzLmFuaW1hdGlvbnNbcHJvcF1cbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1lcmdlZFRyYW5zZm9ybSA9IChcbiAgICAgICAgQXJyYXkuaXNBcnJheShleGl0aW5nVmFsdWVzLmluaXRpYWxWYWx1ZXMudHJhbnNmb3JtKVxuICAgICAgICAgID8gZXhpdGluZ1ZhbHVlcy5pbml0aWFsVmFsdWVzLnRyYW5zZm9ybVxuICAgICAgICAgIDogW11cbiAgICAgICkuY29uY2F0KFxuICAgICAgICAoQXJyYXkuaXNBcnJheShlbnRlcmluZ1ZhbHVlcy5hbmltYXRpb25zLnRyYW5zZm9ybSlcbiAgICAgICAgICA/IGVudGVyaW5nVmFsdWVzLmFuaW1hdGlvbnMudHJhbnNmb3JtXG4gICAgICAgICAgOiBbXVxuICAgICAgICApLm1hcCgodmFsdWUpID0+IHtcbiAgICAgICAgICBjb25zdCBvYmplY3RLZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuICAgICAgICAgIGlmIChvYmplY3RLZXlzPy5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICBgW1JlYW5pbWF0ZWRdOiBcXCR7dmFsdWV9IGlzIG5vdCBhIHZhbGlkIFRyYW5zZm9ybSBvYmplY3RgXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybVByb3AgPSBvYmplY3RLZXlzWzBdO1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPVxuICAgICAgICAgICAgLy8gVE9ETyBUWVBFU0NSSVBUXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlIFJlYWQgc2ltaWxhciBjb21tZW50IGFib3ZlLlxuICAgICAgICAgICAgKHZhbHVlW3RyYW5zZm9ybVByb3BdIGFzIEFuaW1hdGlvbk9iamVjdCkuY3VycmVudDtcbiAgICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudC5pbmNsdWRlcygnZGVnJykpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBbdHJhbnNmb3JtUHJvcF06ICcwZGVnJyxcbiAgICAgICAgICAgICAgfSBhcyB1bmtub3duIGFzIFRyYW5zZm9ybUFycmF5SXRlbTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgW3RyYW5zZm9ybVByb3BdOiAnMCcsXG4gICAgICAgICAgICAgIH0gYXMgdW5rbm93biBhcyBUcmFuc2Zvcm1BcnJheUl0ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmICh0cmFuc2Zvcm1Qcm9wLmluY2x1ZGVzKCd0cmFuc2xhdGUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgW3RyYW5zZm9ybVByb3BdOiAwIH0gYXMgdW5rbm93biBhcyBUcmFuc2Zvcm1BcnJheUl0ZW07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IFt0cmFuc2Zvcm1Qcm9wXTogMSB9IGFzIHVua25vd24gYXMgVHJhbnNmb3JtQXJyYXlJdGVtO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluaXRpYWxWYWx1ZXM6IHtcbiAgICAgICAgICAuLi5leGl0aW5nVmFsdWVzLmluaXRpYWxWYWx1ZXMsXG4gICAgICAgICAgb3JpZ2luWDogdmFsdWVzLmN1cnJlbnRPcmlnaW5YLFxuICAgICAgICAgIG9yaWdpblk6IHZhbHVlcy5jdXJyZW50T3JpZ2luWSxcbiAgICAgICAgICB3aWR0aDogdmFsdWVzLmN1cnJlbnRXaWR0aCxcbiAgICAgICAgICBoZWlnaHQ6IHZhbHVlcy5jdXJyZW50SGVpZ2h0LFxuICAgICAgICAgIHRyYW5zZm9ybTogbWVyZ2VkVHJhbnNmb3JtLFxuICAgICAgICB9LFxuICAgICAgICBhbmltYXRpb25zOiB7XG4gICAgICAgICAgb3JpZ2luWDogZGVsYXlGdW5jdGlvbihcbiAgICAgICAgICAgIGRlbGF5ICsgZXhpdGluZ0R1cmF0aW9uLFxuICAgICAgICAgICAgd2l0aFRpbWluZyh2YWx1ZXMudGFyZ2V0T3JpZ2luWCwgeyBkdXJhdGlvbjogZXhpdGluZ0R1cmF0aW9uIH0pXG4gICAgICAgICAgKSxcbiAgICAgICAgICBvcmlnaW5ZOiBkZWxheUZ1bmN0aW9uKFxuICAgICAgICAgICAgZGVsYXkgKyBleGl0aW5nRHVyYXRpb24sXG4gICAgICAgICAgICB3aXRoVGltaW5nKHZhbHVlcy50YXJnZXRPcmlnaW5ZLCB7IGR1cmF0aW9uOiBleGl0aW5nRHVyYXRpb24gfSlcbiAgICAgICAgICApLFxuICAgICAgICAgIHdpZHRoOiBkZWxheUZ1bmN0aW9uKFxuICAgICAgICAgICAgZGVsYXkgKyBleGl0aW5nRHVyYXRpb24sXG4gICAgICAgICAgICB3aXRoVGltaW5nKHZhbHVlcy50YXJnZXRXaWR0aCwgeyBkdXJhdGlvbjogZXhpdGluZ0R1cmF0aW9uIH0pXG4gICAgICAgICAgKSxcbiAgICAgICAgICBoZWlnaHQ6IGRlbGF5RnVuY3Rpb24oXG4gICAgICAgICAgICBkZWxheSArIGV4aXRpbmdEdXJhdGlvbixcbiAgICAgICAgICAgIHdpdGhUaW1pbmcodmFsdWVzLnRhcmdldEhlaWdodCwgeyBkdXJhdGlvbjogZXhpdGluZ0R1cmF0aW9uIH0pXG4gICAgICAgICAgKSxcbiAgICAgICAgICAuLi5hbmltYXRpb25zLFxuICAgICAgICB9LFxuICAgICAgICBjYWxsYmFjayxcbiAgICAgIH07XG4gICAgfTtcbiAgfTtcbn1cblxuLyoqXG4gKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGBFbnRyeUV4aXRUcmFuc2l0aW9uLmVudGVyaW5nKGVudGVyaW5nKS5leGl0aW5nKGV4aXRpbmcpYCBpbnN0ZWFkLlxuICogQHNlZSBodHRwczovL2RvY3Muc3dtYW5zaW9uLmNvbS9yZWFjdC1uYXRpdmUtcmVhbmltYXRlZC9kb2NzL2xheW91dC1hbmltYXRpb25zL2xheW91dC10cmFuc2l0aW9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY29tYmluZVRyYW5zaXRpb24oXG4gIGV4aXRpbmc6IEJhc2VBbmltYXRpb25CdWlsZGVyIHwgdHlwZW9mIEJhc2VBbmltYXRpb25CdWlsZGVyLFxuICBlbnRlcmluZzogQmFzZUFuaW1hdGlvbkJ1aWxkZXIgfCB0eXBlb2YgQmFzZUFuaW1hdGlvbkJ1aWxkZXJcbik6IEVudHJ5RXhpdFRyYW5zaXRpb24ge1xuICByZXR1cm4gRW50cnlFeGl0VHJhbnNpdGlvbi5lbnRlcmluZyhlbnRlcmluZykuZXhpdGluZyhleGl0aW5nKTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFBQSxJQUFBQSxzQkFBQSxHQUFBQyxPQUFBO0FBQUFDLE1BQUEsQ0FBQUMsY0FBQSxDQUFBQyxPQUFBO0VBQUFDLEtBQUE7QUFBQTtBQUFBRCxPQUFBLENBQUFFLG1CQUFBO0FBQUFGLE9BQUEsQ0FBQUcsaUJBQUEsR0FBQUEsaUJBQUE7QUFBQSxJQUFBQyxnQkFBQSxHQUFBUixzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQVEsZ0JBQUEsR0FBQVQsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFTLGFBQUEsR0FBQVYsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFVLDJCQUFBLEdBQUFYLHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBVyxnQkFBQSxHQUFBWixzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQVksVUFBQSxHQUFBYixzQkFBQSxDQUFBQyxPQUFBO0FBT1osSUFBQWEsaUJBQUEsR0FBQWIsT0FBQTtBQUNBLElBQUFjLFVBQUEsR0FBQWQsT0FBQTtBQUNBLElBQUFlLEtBQUEsR0FBQWYsT0FBQTtBQUEyRCxTQUFB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