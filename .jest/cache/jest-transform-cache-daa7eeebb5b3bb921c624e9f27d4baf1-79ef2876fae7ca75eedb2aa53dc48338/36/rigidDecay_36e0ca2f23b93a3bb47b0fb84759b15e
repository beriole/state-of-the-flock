6d6c6db1f455f18a2547741a3ee95e25
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.rigidDecay = rigidDecay;
var _utils = require("./utils");
function rigidDecay(animation, now, config) {
  'worklet';

  var lastTimestamp = animation.lastTimestamp,
    startTimestamp = animation.startTimestamp,
    initialVelocity = animation.initialVelocity,
    current = animation.current,
    velocity = animation.velocity;
  var deltaTime = Math.min(now - lastTimestamp, 64);
  var v = velocity * Math.exp(-(1 - config.deceleration) * (now - startTimestamp) * _utils.SLOPE_FACTOR);
  animation.current = current + v * config.velocityFactor * deltaTime / 1000;
  animation.velocity = v;
  animation.lastTimestamp = now;
  if (config.clamp) {
    if (initialVelocity < 0 && animation.current <= config.clamp[0]) {
      animation.current = config.clamp[0];
      return true;
    } else if (initialVelocity > 0 && animation.current >= config.clamp[1]) {
      animation.current = config.clamp[1];
      return true;
    }
  }
  return Math.abs(v) < _utils.VELOCITY_EPS;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInJpZ2lkRGVjYXkiLCJfdXRpbHMiLCJyZXF1aXJlIiwiYW5pbWF0aW9uIiwibm93IiwiY29uZmlnIiwibGFzdFRpbWVzdGFtcCIsInN0YXJ0VGltZXN0YW1wIiwiaW5pdGlhbFZlbG9jaXR5IiwiY3VycmVudCIsInZlbG9jaXR5IiwiZGVsdGFUaW1lIiwiTWF0aCIsIm1pbiIsInYiLCJleHAiLCJkZWNlbGVyYXRpb24iLCJTTE9QRV9GQUNUT1IiLCJ2ZWxvY2l0eUZhY3RvciIsImNsYW1wIiwiYWJzIiwiVkVMT0NJVFlfRVBTIl0sInNvdXJjZXMiOlsicmlnaWREZWNheS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5pbXBvcnQgeyBTTE9QRV9GQUNUT1IsIFZFTE9DSVRZX0VQUyB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBEZWZhdWx0RGVjYXlDb25maWcsIElubmVyRGVjYXlBbmltYXRpb24gfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHJpZ2lkRGVjYXkoXG4gIGFuaW1hdGlvbjogSW5uZXJEZWNheUFuaW1hdGlvbixcbiAgbm93OiBudW1iZXIsXG4gIGNvbmZpZzogRGVmYXVsdERlY2F5Q29uZmlnXG4pOiBib29sZWFuIHtcbiAgJ3dvcmtsZXQnO1xuICBjb25zdCB7IGxhc3RUaW1lc3RhbXAsIHN0YXJ0VGltZXN0YW1wLCBpbml0aWFsVmVsb2NpdHksIGN1cnJlbnQsIHZlbG9jaXR5IH0gPVxuICAgIGFuaW1hdGlvbjtcblxuICBjb25zdCBkZWx0YVRpbWUgPSBNYXRoLm1pbihub3cgLSBsYXN0VGltZXN0YW1wLCA2NCk7XG4gIGNvbnN0IHYgPVxuICAgIHZlbG9jaXR5ICpcbiAgICBNYXRoLmV4cChcbiAgICAgIC0oMSAtIGNvbmZpZy5kZWNlbGVyYXRpb24pICogKG5vdyAtIHN0YXJ0VGltZXN0YW1wKSAqIFNMT1BFX0ZBQ1RPUlxuICAgICk7XG4gIGFuaW1hdGlvbi5jdXJyZW50ID0gY3VycmVudCArICh2ICogY29uZmlnLnZlbG9jaXR5RmFjdG9yICogZGVsdGFUaW1lKSAvIDEwMDA7XG4gIGFuaW1hdGlvbi52ZWxvY2l0eSA9IHY7XG4gIGFuaW1hdGlvbi5sYXN0VGltZXN0YW1wID0gbm93O1xuXG4gIGlmIChjb25maWcuY2xhbXApIHtcbiAgICBpZiAoaW5pdGlhbFZlbG9jaXR5IDwgMCAmJiBhbmltYXRpb24uY3VycmVudCA8PSBjb25maWcuY2xhbXBbMF0pIHtcbiAgICAgIGFuaW1hdGlvbi5jdXJyZW50ID0gY29uZmlnLmNsYW1wWzBdO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmIChpbml0aWFsVmVsb2NpdHkgPiAwICYmIGFuaW1hdGlvbi5jdXJyZW50ID49IGNvbmZpZy5jbGFtcFsxXSkge1xuICAgICAgYW5pbWF0aW9uLmN1cnJlbnQgPSBjb25maWcuY2xhbXBbMV07XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIE1hdGguYWJzKHYpIDwgVkVMT0NJVFlfRVBTO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUFBQSxNQUFBLENBQUFDLGNBQUEsQ0FBQUMsT0FBQTtFQUFBQyxLQUFBO0FBQUE7QUFBQUQsT0FBQSxDQUFBRSxVQUFBLEdBQUFBLFVBQUE7QUFDWixJQUFBQyxNQUFBLEdBQUFDLE9BQUE7QUFHTyxTQUFTRixVQUFVQSxDQUN4QkcsU0FBOEIsRUFDOUJDLEdBQVcsRUFDWEMsTUFBMEIsRUFDakI7RUFDVCxTQUFTOztFQUNULElBQVFDLGFBQWEsR0FDbkJILFNBQVMsQ0FESEcsYUFBYTtJQUFFQyxjQUFjLEdBQ25DSixTQUFTLENBRFlJLGNBQWM7SUFBRUMsZUFBZSxHQUNwREwsU0FBUyxDQUQ0QkssZUFBZTtJQUFFQyxPQUFPLEdBQzdETixTQUFTLENBRDZDTSxPQUFPO0lBQUVDLFFBQUEsR0FDL0RQLFNBQVMsQ0FEc0RPLFFBQUE7RUFHakUsSUFBTUMsU0FBUyxHQUFHQyxJQUFJLENBQUNDLEdBQUcsQ0FBQ1QsR0FBRyxHQUFHRSxhQUFhLEVBQUUsRUFBRSxDQUFDO0VBQ25ELElBQU1RLENBQUMsR0FDTEosUUFBUSxHQUNSRSxJQUFJLENBQUNHLEdBQUcsQ0FDTixFQUFFLENBQUMsR0FBR1YsTUFBTSxDQUFDVyxZQUFZLENBQUMsSUFBSVosR0FBRyxHQUFHRyxjQUFjLENBQUMsR0FBR1UsbUJBQ3hELENBQUM7RUFDSGQsU0FBUyxDQUFDTSxPQUFPLEdBQUdBLE9BQU8sR0FBSUssQ0FBQyxHQUFHVCxNQUFNLENBQUNhLGNBQWMsR0FBR1AsU0FBUyxHQUFJLElBQUk7RUFDNUVSLFNBQVMsQ0FBQ08sUUFBUSxHQUFHSSxDQUFDO0VBQ3RCWCxTQUFTLENBQUNHLGFBQWEsR0FBR0YsR0FBRztFQUU3QixJQUFJQyxNQUFNLENBQUNjLEtBQUssRUFBRTtJQUNoQixJQUFJWCxlQUFlLEdBQUcsQ0FBQyxJQUFJTCxTQUFTLENBQUNNLE9BQU8sSUFBSUosTUFBTSxDQUFDYyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUU7TUFDL0RoQixTQUFTLENBQUNNLE9BQU8sR0FBR0osTUFBTSxDQUFDYyxLQUFLLENBQUMsQ0FBQyxDQUFDO01BQ25DLE9BQU8sSUFBSTtJQUNiLENBQUMsTUFBTSxJQUFJWCxlQUFlLEdBQUcsQ0FBQyxJQUFJTCxTQUFTLENBQUNNLE9BQU8sSUFBSUosTUFBTSxDQUFDYyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUU7TUFDdEVoQixTQUFTLENBQUNNLE9BQU8sR0FBR0osTUFBTSxDQUFDYyxLQUFLLENBQUMsQ0FBQyxDQUFDO01BQ25DLE9BQU8sSUFBSTtJQUNiO0VBQ0Y7RUFDQSxPQUFPUCxJQUFJLENBQUNRLEdBQUcsQ0FBQ04sQ0FBQyxDQUFDLEdBQUdPLG1CQUFZO0FBQ25DIiwiaWdub3JlTGlzdCI6W119