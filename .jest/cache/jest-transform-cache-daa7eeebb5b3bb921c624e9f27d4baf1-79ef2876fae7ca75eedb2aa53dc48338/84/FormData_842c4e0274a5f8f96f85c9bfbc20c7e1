33b8faf9deb55df9d9d69696345de083
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var FormData = function () {
  function FormData() {
    (0, _classCallCheck2.default)(this, FormData);
    this._parts = [];
  }
  return (0, _createClass2.default)(FormData, [{
    key: "append",
    value: function append(key, value) {
      this._parts.push([key, value]);
    }
  }, {
    key: "getAll",
    value: function getAll(key) {
      return this._parts.filter(function (_ref) {
        var _ref2 = (0, _slicedToArray2.default)(_ref, 1),
          name = _ref2[0];
        return name === key;
      }).map(function (_ref3) {
        var _ref4 = (0, _slicedToArray2.default)(_ref3, 2),
          value = _ref4[1];
        return value;
      });
    }
  }, {
    key: "getParts",
    value: function getParts() {
      return this._parts.map(function (_ref5) {
        var _ref6 = (0, _slicedToArray2.default)(_ref5, 2),
          name = _ref6[0],
          value = _ref6[1];
        var contentDisposition = 'form-data; name="' + name + '"';
        var headers = {
          'content-disposition': contentDisposition
        };
        if (typeof value === 'object' && !Array.isArray(value) && value) {
          if (typeof value.name === 'string') {
            headers['content-disposition'] += `; filename="${value.name}"; filename*=utf-8''${encodeURI(value.name)}`;
          }
          if (typeof value.type === 'string') {
            headers['content-type'] = value.type;
          }
          return Object.assign({}, value, {
            headers: headers,
            fieldName: name
          });
        }
        return {
          string: String(value),
          headers: headers,
          fieldName: name
        };
      });
    }
  }]);
}();
module.exports = FormData;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9zbGljZWRUb0FycmF5MiIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY3JlYXRlQ2xhc3MyIiwiRm9ybURhdGEiLCJkZWZhdWx0IiwiX3BhcnRzIiwia2V5IiwidmFsdWUiLCJhcHBlbmQiLCJwdXNoIiwiZ2V0QWxsIiwiZmlsdGVyIiwiX3JlZiIsIl9yZWYyIiwibmFtZSIsIm1hcCIsIl9yZWYzIiwiX3JlZjQiLCJnZXRQYXJ0cyIsIl9yZWY1IiwiX3JlZjYiLCJjb250ZW50RGlzcG9zaXRpb24iLCJoZWFkZXJzIiwiQXJyYXkiLCJpc0FycmF5IiwiZW5jb2RlVVJJIiwidHlwZSIsIk9iamVjdCIsImFzc2lnbiIsImZpZWxkTmFtZSIsInN0cmluZyIsIlN0cmluZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJGb3JtRGF0YS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZvcm1hdFxuICogQGZsb3cgc3RyaWN0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG50eXBlIEZvcm1EYXRhVmFsdWUgPSBzdHJpbmcgfCB7bmFtZT86IHN0cmluZywgdHlwZT86IHN0cmluZywgdXJpOiBzdHJpbmd9O1xudHlwZSBGb3JtRGF0YU5hbWVWYWx1ZVBhaXIgPSBbc3RyaW5nLCBGb3JtRGF0YVZhbHVlXTtcblxudHlwZSBIZWFkZXJzID0ge1tuYW1lOiBzdHJpbmddOiBzdHJpbmcsIC4uLn07XG50eXBlIEZvcm1EYXRhUGFydCA9XG4gIHwge1xuICAgICAgc3RyaW5nOiBzdHJpbmcsXG4gICAgICBoZWFkZXJzOiBIZWFkZXJzLFxuICAgICAgLi4uXG4gICAgfVxuICB8IHtcbiAgICAgIHVyaTogc3RyaW5nLFxuICAgICAgaGVhZGVyczogSGVhZGVycyxcbiAgICAgIG5hbWU/OiBzdHJpbmcsXG4gICAgICB0eXBlPzogc3RyaW5nLFxuICAgICAgLi4uXG4gICAgfTtcblxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgWE1MSHR0cFJlcXVlc3QyIEZvcm1EYXRhIEFQSSwgYWxsb3dpbmcgbXVsdGlwYXJ0IFBPU1QgcmVxdWVzdHNcbiAqIHdpdGggbWl4ZWQgZGF0YSAoc3RyaW5nLCBuYXRpdmUgZmlsZXMpIHRvIGJlIHN1Ym1pdHRlZCB2aWEgWE1MSHR0cFJlcXVlc3QuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgIHZhciBwaG90byA9IHtcbiAqICAgICB1cmk6IHVyaUZyb21DYW1lcmFSb2xsLFxuICogICAgIHR5cGU6ICdpbWFnZS9qcGVnJyxcbiAqICAgICBuYW1lOiAncGhvdG8uanBnJyxcbiAqICAgfTtcbiAqXG4gKiAgIHZhciBib2R5ID0gbmV3IEZvcm1EYXRhKCk7XG4gKiAgIGJvZHkuYXBwZW5kKCdhdXRoVG9rZW4nLCAnc2VjcmV0Jyk7XG4gKiAgIGJvZHkuYXBwZW5kKCdwaG90bycsIHBob3RvKTtcbiAqICAgYm9keS5hcHBlbmQoJ3RpdGxlJywgJ0EgYmVhdXRpZnVsIHBob3RvIScpO1xuICpcbiAqICAgeGhyLm9wZW4oJ1BPU1QnLCBzZXJ2ZXJVUkwpO1xuICogICB4aHIuc2VuZChib2R5KTtcbiAqL1xuY2xhc3MgRm9ybURhdGEge1xuICBfcGFydHM6IEFycmF5PEZvcm1EYXRhTmFtZVZhbHVlUGFpcj47XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fcGFydHMgPSBbXTtcbiAgfVxuXG4gIGFwcGVuZChrZXk6IHN0cmluZywgdmFsdWU6IEZvcm1EYXRhVmFsdWUpIHtcbiAgICAvLyBUaGUgWE1MSHR0cFJlcXVlc3Qgc3BlYyBkb2Vzbid0IHNwZWNpZnkgaWYgZHVwbGljYXRlIGtleXMgYXJlIGFsbG93ZWQuXG4gICAgLy8gTUROIHNheXMgdGhhdCBhbnkgbmV3IHZhbHVlcyBzaG91bGQgYmUgYXBwZW5kZWQgdG8gZXhpc3RpbmcgdmFsdWVzLlxuICAgIC8vIEluIGFueSBjYXNlLCBtYWpvciBicm93c2VycyBhbGxvdyBkdXBsaWNhdGUga2V5cywgc28gdGhhdCdzIHdoYXQgd2UnbGwgZG9cbiAgICAvLyB0b28uIFRoZXknbGwgc2ltcGx5IGdldCBhcHBlbmRlZCBhcyBhZGRpdGlvbmFsIGZvcm0gZGF0YSBwYXJ0cyBpbiB0aGVcbiAgICAvLyByZXF1ZXN0IGJvZHksIGxlYXZpbmcgdGhlIHNlcnZlciB0byBkZWFsIHdpdGggdGhlbS5cbiAgICB0aGlzLl9wYXJ0cy5wdXNoKFtrZXksIHZhbHVlXSk7XG4gIH1cblxuICBnZXRBbGwoa2V5OiBzdHJpbmcpOiBBcnJheTxGb3JtRGF0YVZhbHVlPiB7XG4gICAgcmV0dXJuIHRoaXMuX3BhcnRzXG4gICAgICAuZmlsdGVyKChbbmFtZV0pID0+IG5hbWUgPT09IGtleSlcbiAgICAgIC5tYXAoKFssIHZhbHVlXSkgPT4gdmFsdWUpO1xuICB9XG5cbiAgZ2V0UGFydHMoKTogQXJyYXk8Rm9ybURhdGFQYXJ0PiB7XG4gICAgcmV0dXJuIHRoaXMuX3BhcnRzLm1hcCgoW25hbWUsIHZhbHVlXSkgPT4ge1xuICAgICAgY29uc3QgY29udGVudERpc3Bvc2l0aW9uID0gJ2Zvcm0tZGF0YTsgbmFtZT1cIicgKyBuYW1lICsgJ1wiJztcblxuICAgICAgY29uc3QgaGVhZGVyczogSGVhZGVycyA9IHsnY29udGVudC1kaXNwb3NpdGlvbic6IGNvbnRlbnREaXNwb3NpdGlvbn07XG5cbiAgICAgIC8vIFRoZSBib2R5IHBhcnQgaXMgYSBcImJsb2JcIiwgd2hpY2ggaW4gUmVhY3QgTmF0aXZlIGp1c3QgbWVhbnNcbiAgICAgIC8vIGFuIG9iamVjdCB3aXRoIGEgYHVyaWAgYXR0cmlidXRlLiBPcHRpb25hbGx5LCBpdCBjYW4gYWxzb1xuICAgICAgLy8gaGF2ZSBhIGBuYW1lYCBhbmQgYHR5cGVgIGF0dHJpYnV0ZSB0byBzcGVjaWZ5IGZpbGVuYW1lIGFuZFxuICAgICAgLy8gY29udGVudCB0eXBlIChjZi4gd2ViIEJsb2IgaW50ZXJmYWNlLilcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlLm5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaGVhZGVyc1snY29udGVudC1kaXNwb3NpdGlvbiddICs9IGA7IGZpbGVuYW1lPVwiJHtcbiAgICAgICAgICAgIHZhbHVlLm5hbWVcbiAgICAgICAgICB9XCI7IGZpbGVuYW1lKj11dGYtOCcnJHtlbmNvZGVVUkkodmFsdWUubmFtZSl9YDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlLnR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaGVhZGVyc1snY29udGVudC10eXBlJ10gPSB2YWx1ZS50eXBlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7Li4udmFsdWUsIGhlYWRlcnMsIGZpZWxkTmFtZTogbmFtZX07XG4gICAgICB9XG4gICAgICAvLyBDb252ZXJ0IG5vbi1vYmplY3QgdmFsdWVzIHRvIHN0cmluZ3MgYXMgcGVyIEZvcm1EYXRhLmFwcGVuZCgpIHNwZWNcbiAgICAgIHJldHVybiB7c3RyaW5nOiBTdHJpbmcodmFsdWUpLCBoZWFkZXJzLCBmaWVsZE5hbWU6IG5hbWV9O1xuICAgIH0pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRm9ybURhdGE7XG4iXSwibWFwcGluZ3MiOiJBQVVBLFlBQVk7O0FBQUMsSUFBQUEsc0JBQUEsR0FBQUMsT0FBQTtBQUFBLElBQUFDLGVBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFFLGdCQUFBLEdBQUFILHNCQUFBLENBQUFD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