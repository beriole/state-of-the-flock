ea552a291610d3d4fddf2cc2eab52184
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _PlatformChecker = require("../PlatformChecker");
var _commonTypes = require("../commonTypes");
var _mockedRequestAnimationFrame = require("../mockedRequestAnimationFrame");
var requestAnimationFrameImpl = (0, _PlatformChecker.isJest)() || !globalThis.requestAnimationFrame ? _mockedRequestAnimationFrame.mockedRequestAnimationFrame : globalThis.requestAnimationFrame;
var JSReanimated = exports.default = function () {
  function JSReanimated() {
    var _this = this;
    (0, _classCallCheck2.default)(this, JSReanimated);
    this.nextSensorId = 0;
    this.sensors = new Map();
    this.platform = undefined;
    this.getSensorCallback = function (sensor, sensorType, eventHandler) {
      switch (sensorType) {
        case _commonTypes.SensorType.ACCELEROMETER:
        case _commonTypes.SensorType.GRAVITY:
          return function () {
            var x = sensor.x,
              y = sensor.y,
              z = sensor.z;
            if (_this.platform === Platform.WEB_ANDROID) {
              var _ref = [-x, -y, -z];
              x = _ref[0];
              y = _ref[1];
              z = _ref[2];
            }
            eventHandler({
              x: x,
              y: y,
              z: z,
              interfaceOrientation: 0
            });
          };
        case _commonTypes.SensorType.GYROSCOPE:
        case _commonTypes.SensorType.MAGNETIC_FIELD:
          return function () {
            var x = sensor.x,
              y = sensor.y,
              z = sensor.z;
            eventHandler({
              x: x,
              y: y,
              z: z,
              interfaceOrientation: 0
            });
          };
        case _commonTypes.SensorType.ROTATION:
          return function () {
            var _sensor$quaternion = (0, _slicedToArray2.default)(sensor.quaternion, 4),
              qw = _sensor$quaternion[0],
              qx = _sensor$quaternion[1],
              qy = _sensor$quaternion[2],
              qz = _sensor$quaternion[3];
            if (_this.platform === Platform.WEB_ANDROID) {
              var _ref2 = [qz, -qy];
              qy = _ref2[0];
              qz = _ref2[1];
            }
            var yaw = -Math.atan2(2.0 * (qy * qz + qw * qx), qw * qw - qx * qx - qy * qy + qz * qz);
            var pitch = Math.sin(-2.0 * (qx * qz - qw * qy));
            var roll = -Math.atan2(2.0 * (qx * qy + qw * qz), qw * qw + qx * qx - qy * qy - qz * qz);
            eventHandler({
              qw: qw,
              qx: qx,
              qy: qy,
              qz: qz,
              yaw: yaw,
              pitch: pitch,
              roll: roll,
              interfaceOrientation: 0
            });
          };
      }
    };
  }
  return (0, _createClass2.default)(JSReanimated, [{
    key: "makeShareableClone",
    value: function makeShareableClone() {
      throw new Error('[Reanimated] makeShareableClone should never be called in JSReanimated.');
    }
  }, {
    key: "scheduleOnUI",
    value: function scheduleOnUI(worklet) {
      requestAnimationFrameImpl(worklet);
    }
  }, {
    key: "createWorkletRuntime",
    value: function createWorkletRuntime(_name, _initializer) {
      throw new Error('[Reanimated] createWorkletRuntime is not available in JSReanimated.');
    }
  }, {
    key: "scheduleOnRuntime",
    value: function scheduleOnRuntime() {
      throw new Error('[Reanimated] scheduleOnRuntime is not available in JSReanimated.');
    }
  }, {
    key: "registerEventHandler",
    value: function registerEventHandler(_eventHandler, _eventName, _emitterReactTag) {
      throw new Error('[Reanimated] registerEventHandler is not available in JSReanimated.');
    }
  }, {
    key: "unregisterEventHandler",
    value: function unregisterEventHandler(_) {
      throw new Error('[Reanimated] unregisterEventHandler is not available in JSReanimated.');
    }
  }, {
    key: "enableLayoutAnimations",
    value: function enableLayoutAnimations() {
      if ((0, _PlatformChecker.isWeb)()) {
        console.warn('[Reanimated] Layout Animations are not supported on web yet.');
      } else if ((0, _PlatformChecker.isJest)()) {
        console.warn('[Reanimated] Layout Animations are no-ops when using Jest.');
      } else if ((0, _PlatformChecker.isChromeDebugger)()) {
        console.warn('[Reanimated] Layout Animations are no-ops when using Chrome Debugger.');
      } else {
        console.warn('[Reanimated] Layout Animations are not supported on this configuration.');
      }
    }
  }, {
    key: "configureLayoutAnimationBatch",
    value: function configureLayoutAnimationBatch() {}
  }, {
    key: "setShouldAnimateExitingForTag",
    value: function setShouldAnimateExitingForTag() {}
  }, {
    key: "registerSensor",
    value: function registerSensor(sensorType, interval, _iosReferenceFrame, eventHandler) {
      if (!(0, _PlatformChecker.isWindowAvailable)()) {
        return -1;
      }
      if (this.platform === undefined) {
        this.detectPlatform();
      }
      if (!(this.getSensorName(sensorType) in window)) {
        console.warn('[Reanimated] Sensor is not available.' + ((0, _PlatformChecker.isWeb)() && location.protocol !== 'https:' ? ' Make sure you use secure origin with `npx expo start --web --https`.' : '') + (this.platform === Platform.WEB_IOS ? ' For iOS web, you will also have to also grant permission in the browser: https://dev.to/li/how-to-requestpermission-for-devicemotion-and-deviceorientation-events-in-ios-13-46g2.' : ''));
        return -1;
      }
      if (this.platform === undefined) {
        this.detectPlatform();
      }
      var sensor = this.initializeSensor(sensorType, interval);
      sensor.addEventListener('reading', this.getSensorCallback(sensor, sensorType, eventHandler));
      sensor.start();
      this.sensors.set(this.nextSensorId, sensor);
      return this.nextSensorId++;
    }
  }, {
    key: "unregisterSensor",
    value: function unregisterSensor(id) {
      var sensor = this.sensors.get(id);
      if (sensor !== undefined) {
        sensor.stop();
        this.sensors.delete(id);
      }
    }
  }, {
    key: "subscribeForKeyboardEvents",
    value: function subscribeForKeyboardEvents(_) {
      if ((0, _PlatformChecker.isWeb)()) {
        console.warn('[Reanimated] useAnimatedKeyboard is not available on web yet.');
      } else if ((0, _PlatformChecker.isJest)()) {
        console.warn('[Reanimated] useAnimatedKeyboard is not available when using Jest.');
      } else if ((0, _PlatformChecker.isChromeDebugger)()) {
        console.warn('[Reanimated] useAnimatedKeyboard is not available when using Chrome Debugger.');
      } else {
        console.warn('[Reanimated] useAnimatedKeyboard is not available on this configuration.');
      }
      return -1;
    }
  }, {
    key: "unsubscribeFromKeyboardEvents",
    value: function unsubscribeFromKeyboardEvents(_) {}
  }, {
    key: "initializeSensor",
    value: function initializeSensor(sensorType, interval) {
      var config = interval <= 0 ? {
        referenceFrame: 'device'
      } : {
        frequency: 1000 / interval
      };
      switch (sensorType) {
        case _commonTypes.SensorType.ACCELEROMETER:
          return new window.Accelerometer(config);
        case _commonTypes.SensorType.GYROSCOPE:
          return new window.Gyroscope(config);
        case _commonTypes.SensorType.GRAVITY:
          return new window.GravitySensor(config);
        case _commonTypes.SensorType.MAGNETIC_FIELD:
          return new window.Magnetometer(config);
        case _commonTypes.SensorType.ROTATION:
          return new window.AbsoluteOrientationSensor(config);
      }
    }
  }, {
    key: "getSensorName",
    value: function getSensorName(sensorType) {
      switch (sensorType) {
        case _commonTypes.SensorType.ACCELEROMETER:
          return 'Accelerometer';
        case _commonTypes.SensorType.GRAVITY:
          return 'GravitySensor';
        case _commonTypes.SensorType.GYROSCOPE:
          return 'Gyroscope';
        case _commonTypes.SensorType.MAGNETIC_FIELD:
          return 'Magnetometer';
        case _commonTypes.SensorType.ROTATION:
          return 'AbsoluteOrientationSensor';
      }
    }
  }, {
    key: "detectPlatform",
    value: function detectPlatform() {
      var userAgent = navigator.userAgent || navigator.vendor || window.opera;
      if (userAgent === undefined) {
        this.platform = Platform.UNKNOWN;
      } else if (/iPad|iPhone|iPod/.test(userAgent)) {
        this.platform = Platform.WEB_IOS;
      } else if (/android/i.test(userAgent)) {
        this.platform = Platform.WEB_ANDROID;
      } else {
        this.platform = Platform.WEB;
      }
    }
  }, {
    key: "getViewProp",
    value: function getViewProp(_viewTag, _propName, _component, _callback) {
      throw new Error('[Reanimated] getViewProp is not available in JSReanimated.');
    }
  }, {
    key: "configureProps",
    value: function configureProps() {
      throw new Error('[Reanimated] configureProps is not available in JSReanimated.');
    }
  }, {
    key: "executeOnUIRuntimeSync",
    value: function executeOnUIRuntimeSync(_shareable) {
      throw new Error('[Reanimated] `executeOnUIRuntimeSync` is not available in JSReanimated.');
    }
  }]);
}();
var Platform = function (Platform) {
  Platform["WEB_IOS"] = "web iOS";
  Platform["WEB_ANDROID"] = "web Android";
  Platform["WEB"] = "web";
  Platform["UNKNOWN"] = "unknown";
  return Platform;
}(Platform || {});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmYXVsdCIsIl9zbGljZWRUb0FycmF5MiIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY3JlYXRlQ2xhc3MyIiwiX1BsYXRmb3JtQ2hlY2tlciIsIl9jb21tb25UeXBlcyIsIl9tb2NrZWRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWVJbXBsIiwiaXNKZXN0IiwiZ2xvYmFsVGhpcyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1vY2tlZFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIkpTUmVhbmltYXRlZCIsIl90aGlzIiwibmV4dFNlbnNvcklkIiwic2Vuc29ycyIsIk1hcCIsInBsYXRmb3JtIiwidW5kZWZpbmVkIiwiZ2V0U2Vuc29yQ2FsbGJhY2siLCJzZW5zb3IiLCJzZW5zb3JUeXBlIiwiZXZlbnRIYW5kbGVyIiwiU2Vuc29yVHlwZSIsIkFDQ0VMRVJPTUVURVIiLCJHUkFWSVRZIiwieCIsInkiLCJ6IiwiUGxhdGZvcm0iLCJXRUJfQU5EUk9JRCIsIl9yZWYiLCJpbnRlcmZhY2VPcmllbnRhdGlvbiIsIkdZUk9TQ09QRSIsIk1BR05FVElDX0ZJRUxEIiwiUk9UQVRJT04iLCJfc2Vuc29yJHF1YXRlcm5pb24iLCJxdWF0ZXJuaW9uIiwicXciLCJxeCIsInF5IiwicXoiLCJfcmVmMiIsInlhdyIsIk1hdGgiLCJhdGFuMiIsInBpdGNoIiwic2luIiwicm9sbCIsImtleSIsIm1ha2VTaGFyZWFibGVDbG9uZSIsIkVycm9yIiwic2NoZWR1bGVPblVJIiwid29ya2xldCIsImNyZWF0ZVdvcmtsZXRSdW50aW1lIiwiX25hbWUiLCJfaW5pdGlhbGl6ZXIiLCJzY2hlZHVsZU9uUnVudGltZSIsInJlZ2lzdGVyRXZlbnRIYW5kbGVyIiwiX2V2ZW50SGFuZGxlciIsIl9ldmVudE5hbWUiLCJfZW1pdHRlclJlYWN0VGFnIiwidW5yZWdpc3RlckV2ZW50SGFuZGxlciIsIl8iLCJlbmFibGVMYXlvdXRBbmltYXRpb25zIiwiaXNXZWIiLCJjb25zb2xlIiwid2FybiIsImlzQ2hyb21lRGVidWdnZXIiLCJjb25maWd1cmVMYXlvdXRBbmltYXRpb25CYXRjaCIsInNldFNob3VsZEFuaW1hdGVFeGl0aW5nRm9yVGFnIiwicmVnaXN0ZXJTZW5zb3IiLCJpbnRlcnZhbCIsIl9pb3NSZWZlcmVuY2VGcmFtZSIsImlzV2luZG93QXZhaWxhYmxlIiwiZGV0ZWN0UGxhdGZvcm0iLCJnZXRTZW5zb3JOYW1lIiwid2luZG93IiwibG9jYXRpb24iLCJwcm90b2NvbCIsIldFQl9JT1MiLCJpbml0aWFsaXplU2Vuc29yIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0YXJ0Iiwic2V0IiwidW5yZWdpc3RlclNlbnNvciIsImlkIiwiZ2V0Iiwic3RvcCIsImRlbGV0ZSIsInN1YnNjcmliZUZvcktleWJvYXJkRXZlbnRzIiwidW5zdWJzY3JpYmVGcm9tS2V5Ym9hcmRFdmVudHMiLCJjb25maWciLCJyZWZlcmVuY2VGcmFtZSIsImZyZXF1ZW5jeSIsIkFjY2VsZXJvbWV0ZXIiLCJHeXJvc2NvcGUiLCJHcmF2aXR5U2Vuc29yIiwiTWFnbmV0b21ldGVyIiwiQWJzb2x1dGVPcmllbnRhdGlvblNlbnNvciIsInVzZXJBZ2VudCIsIm5hdmlnYXRvciIsInZlbmRvciIsIm9wZXJhIiwiVU5LTk9XTiIsInRlc3QiLCJXRUIiLCJnZXRWaWV3UHJvcCIsIl92aWV3VGFnIiwiX3Byb3BOYW1lIiwiX2NvbXBvbmVudCIsIl9jYWxsYmFjayIsImNvbmZpZ3VyZVByb3BzIiwiZXhlY3V0ZU9uVUlSdW50aW1lU3luYyIsIl9zaGFyZWFibGUiXSwic291cmNlcyI6WyJKU1JlYW5pbWF0ZWQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IHtcbiAgaXNDaHJvbWVEZWJ1Z2dlcixcbiAgaXNKZXN0LFxuICBpc1dlYixcbiAgaXNXaW5kb3dBdmFpbGFibGUsXG59IGZyb20gJy4uL1BsYXRmb3JtQ2hlY2tlcic7XG5pbXBvcnQgdHlwZSB7IFNoYXJlYWJsZVJlZiwgVmFsdWUzRCwgVmFsdWVSb3RhdGlvbiB9IGZyb20gJy4uL2NvbW1vblR5cGVzJztcbmltcG9ydCB7IFNlbnNvclR5cGUgfSBmcm9tICcuLi9jb21tb25UeXBlcyc7XG5pbXBvcnQgdHlwZSB7IFdlYlNlbnNvciB9IGZyb20gJy4vV2ViU2Vuc29yJztcbmltcG9ydCB7IG1vY2tlZFJlcXVlc3RBbmltYXRpb25GcmFtZSB9IGZyb20gJy4uL21vY2tlZFJlcXVlc3RBbmltYXRpb25GcmFtZSc7XG5pbXBvcnQgdHlwZSB7IFdvcmtsZXRSdW50aW1lIH0gZnJvbSAnLi4vcnVudGltZXMnO1xuXG4vLyBJbiBOb2RlLmpzIGVudmlyb25tZW50cyAobGlrZSB3aGVuIHN0YXRpYyByZW5kZXJpbmcgd2l0aCBFeHBvIFJvdXRlcilcbi8vIHJlcXVlc3RBbmltYXRpb25GcmFtZSBpcyB1bmF2YWlsYWJsZSwgc28gd2UgdXNlIG91ciBtb2NrLlxuLy8gSXQgYWxzbyBoYXMgdG8gYmUgbW9ja2VkIGZvciBKZXN0IHB1cnBvc2VzIChzZWUgYGluaXRpYWxpemVVSVJ1bnRpbWVgKS5cbmNvbnN0IHJlcXVlc3RBbmltYXRpb25GcmFtZUltcGwgPVxuICBpc0plc3QoKSB8fCAhZ2xvYmFsVGhpcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgICA/IG1vY2tlZFJlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgIDogZ2xvYmFsVGhpcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEpTUmVhbmltYXRlZCB7XG4gIG5leHRTZW5zb3JJZCA9IDA7XG4gIHNlbnNvcnMgPSBuZXcgTWFwPG51bWJlciwgV2ViU2Vuc29yPigpO1xuICBwbGF0Zm9ybT86IFBsYXRmb3JtID0gdW5kZWZpbmVkO1xuXG4gIG1ha2VTaGFyZWFibGVDbG9uZTxUPigpOiBTaGFyZWFibGVSZWY8VD4ge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdbUmVhbmltYXRlZF0gbWFrZVNoYXJlYWJsZUNsb25lIHNob3VsZCBuZXZlciBiZSBjYWxsZWQgaW4gSlNSZWFuaW1hdGVkLidcbiAgICApO1xuICB9XG5cbiAgc2NoZWR1bGVPblVJPFQ+KHdvcmtsZXQ6IFNoYXJlYWJsZVJlZjxUPikge1xuICAgIC8vIEB0cy1pZ25vcmUgd2ViIGltcGxlbWVudGF0aW9uIGhhcyBzdGlsbCBub3QgYmVlbiB1cGRhdGVkIGFmdGVyIHRoZSByZXdyaXRlLCB0aGlzIHdpbGwgYmUgYWRkcmVzc2VkIG9uY2UgdGhlIHdlYiBpbXBsZW1lbnRhdGlvbiB1cGRhdGVzIGFyZSByZWFkeVxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZUltcGwod29ya2xldCk7XG4gIH1cblxuICBjcmVhdGVXb3JrbGV0UnVudGltZShcbiAgICBfbmFtZTogc3RyaW5nLFxuICAgIF9pbml0aWFsaXplcjogU2hhcmVhYmxlUmVmPCgpID0+IHZvaWQ+XG4gICk6IFdvcmtsZXRSdW50aW1lIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnW1JlYW5pbWF0ZWRdIGNyZWF0ZVdvcmtsZXRSdW50aW1lIGlzIG5vdCBhdmFpbGFibGUgaW4gSlNSZWFuaW1hdGVkLidcbiAgICApO1xuICB9XG5cbiAgc2NoZWR1bGVPblJ1bnRpbWUoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ1tSZWFuaW1hdGVkXSBzY2hlZHVsZU9uUnVudGltZSBpcyBub3QgYXZhaWxhYmxlIGluIEpTUmVhbmltYXRlZC4nXG4gICAgKTtcbiAgfVxuXG4gIHJlZ2lzdGVyRXZlbnRIYW5kbGVyPFQ+KFxuICAgIF9ldmVudEhhbmRsZXI6IFNoYXJlYWJsZVJlZjxUPixcbiAgICBfZXZlbnROYW1lOiBzdHJpbmcsXG4gICAgX2VtaXR0ZXJSZWFjdFRhZzogbnVtYmVyXG4gICk6IG51bWJlciB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ1tSZWFuaW1hdGVkXSByZWdpc3RlckV2ZW50SGFuZGxlciBpcyBub3QgYXZhaWxhYmxlIGluIEpTUmVhbmltYXRlZC4nXG4gICAgKTtcbiAgfVxuXG4gIHVucmVnaXN0ZXJFdmVudEhhbmRsZXIoXzogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ1tSZWFuaW1hdGVkXSB1bnJlZ2lzdGVyRXZlbnRIYW5kbGVyIGlzIG5vdCBhdmFpbGFibGUgaW4gSlNSZWFuaW1hdGVkLidcbiAgICApO1xuICB9XG5cbiAgZW5hYmxlTGF5b3V0QW5pbWF0aW9ucygpIHtcbiAgICBpZiAoaXNXZWIoKSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnW1JlYW5pbWF0ZWRdIExheW91dCBBbmltYXRpb25zIGFyZSBub3Qgc3VwcG9ydGVkIG9uIHdlYiB5ZXQuJ1xuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGlzSmVzdCgpKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICdbUmVhbmltYXRlZF0gTGF5b3V0IEFuaW1hdGlvbnMgYXJlIG5vLW9wcyB3aGVuIHVzaW5nIEplc3QuJ1xuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGlzQ2hyb21lRGVidWdnZXIoKSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnW1JlYW5pbWF0ZWRdIExheW91dCBBbmltYXRpb25zIGFyZSBuby1vcHMgd2hlbiB1c2luZyBDaHJvbWUgRGVidWdnZXIuJ1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnW1JlYW5pbWF0ZWRdIExheW91dCBBbmltYXRpb25zIGFyZSBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgY29uZmlndXJhdGlvbi4nXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGNvbmZpZ3VyZUxheW91dEFuaW1hdGlvbkJhdGNoKCkge1xuICAgIC8vIG5vLW9wXG4gIH1cblxuICBzZXRTaG91bGRBbmltYXRlRXhpdGluZ0ZvclRhZygpIHtcbiAgICAvLyBuby1vcFxuICB9XG5cbiAgcmVnaXN0ZXJTZW5zb3IoXG4gICAgc2Vuc29yVHlwZTogU2Vuc29yVHlwZSxcbiAgICBpbnRlcnZhbDogbnVtYmVyLFxuICAgIF9pb3NSZWZlcmVuY2VGcmFtZTogbnVtYmVyLFxuICAgIGV2ZW50SGFuZGxlcjogU2hhcmVhYmxlUmVmPChkYXRhOiBWYWx1ZTNEIHwgVmFsdWVSb3RhdGlvbikgPT4gdm9pZD5cbiAgKTogbnVtYmVyIHtcbiAgICBpZiAoIWlzV2luZG93QXZhaWxhYmxlKCkpIHtcbiAgICAgIC8vIHRoZSB3aW5kb3cgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIHdoZW4gYnVpbGRpbmcgdGhlIHNlcnZlciBwb3J0aW9uIG9mIGEgc2l0ZSB0aGF0IHVzZXMgU1NHXG4gICAgICAvLyB0aGlzIGNoZWNrIGlzIGhlcmUgdG8gZW5zdXJlIHRoYXQgdGhlIHNlcnZlciBidWlsZCB3b24ndCBmYWlsXG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGxhdGZvcm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5kZXRlY3RQbGF0Zm9ybSgpO1xuICAgIH1cblxuICAgIGlmICghKHRoaXMuZ2V0U2Vuc29yTmFtZShzZW5zb3JUeXBlKSBpbiB3aW5kb3cpKSB7XG4gICAgICAvLyBodHRwczovL3czYy5naXRodWIuaW8vc2Vuc29ycy8jc2VjdXJlLWNvbnRleHRcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ1tSZWFuaW1hdGVkXSBTZW5zb3IgaXMgbm90IGF2YWlsYWJsZS4nICtcbiAgICAgICAgICAoaXNXZWIoKSAmJiBsb2NhdGlvbi5wcm90b2NvbCAhPT0gJ2h0dHBzOidcbiAgICAgICAgICAgID8gJyBNYWtlIHN1cmUgeW91IHVzZSBzZWN1cmUgb3JpZ2luIHdpdGggYG5weCBleHBvIHN0YXJ0IC0td2ViIC0taHR0cHNgLidcbiAgICAgICAgICAgIDogJycpICtcbiAgICAgICAgICAodGhpcy5wbGF0Zm9ybSA9PT0gUGxhdGZvcm0uV0VCX0lPU1xuICAgICAgICAgICAgPyAnIEZvciBpT1Mgd2ViLCB5b3Ugd2lsbCBhbHNvIGhhdmUgdG8gYWxzbyBncmFudCBwZXJtaXNzaW9uIGluIHRoZSBicm93c2VyOiBodHRwczovL2Rldi50by9saS9ob3ctdG8tcmVxdWVzdHBlcm1pc3Npb24tZm9yLWRldmljZW1vdGlvbi1hbmQtZGV2aWNlb3JpZW50YXRpb24tZXZlbnRzLWluLWlvcy0xMy00NmcyLidcbiAgICAgICAgICAgIDogJycpXG4gICAgICApO1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBsYXRmb3JtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuZGV0ZWN0UGxhdGZvcm0oKTtcbiAgICB9XG5cbiAgICBjb25zdCBzZW5zb3I6IFdlYlNlbnNvciA9IHRoaXMuaW5pdGlhbGl6ZVNlbnNvcihzZW5zb3JUeXBlLCBpbnRlcnZhbCk7XG4gICAgc2Vuc29yLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAncmVhZGluZycsXG4gICAgICB0aGlzLmdldFNlbnNvckNhbGxiYWNrKHNlbnNvciwgc2Vuc29yVHlwZSwgZXZlbnRIYW5kbGVyKVxuICAgICk7XG4gICAgc2Vuc29yLnN0YXJ0KCk7XG5cbiAgICB0aGlzLnNlbnNvcnMuc2V0KHRoaXMubmV4dFNlbnNvcklkLCBzZW5zb3IpO1xuICAgIHJldHVybiB0aGlzLm5leHRTZW5zb3JJZCsrO1xuICB9XG5cbiAgZ2V0U2Vuc29yQ2FsbGJhY2sgPSAoXG4gICAgc2Vuc29yOiBXZWJTZW5zb3IsXG4gICAgc2Vuc29yVHlwZTogU2Vuc29yVHlwZSxcbiAgICBldmVudEhhbmRsZXI6IFNoYXJlYWJsZVJlZjwoZGF0YTogVmFsdWUzRCB8IFZhbHVlUm90YXRpb24pID0+IHZvaWQ+XG4gICkgPT4ge1xuICAgIHN3aXRjaCAoc2Vuc29yVHlwZSkge1xuICAgICAgY2FzZSBTZW5zb3JUeXBlLkFDQ0VMRVJPTUVURVI6XG4gICAgICBjYXNlIFNlbnNvclR5cGUuR1JBVklUWTpcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICBsZXQgeyB4LCB5LCB6IH0gPSBzZW5zb3I7XG5cbiAgICAgICAgICAvLyBXZWIgQW5kcm9pZCBzZW5zb3JzIGhhdmUgYSBkaWZmZXJlbnQgY29vcmRpbmF0ZSBzeXN0ZW0gdGhhbiBpT1NcbiAgICAgICAgICBpZiAodGhpcy5wbGF0Zm9ybSA9PT0gUGxhdGZvcm0uV0VCX0FORFJPSUQpIHtcbiAgICAgICAgICAgIFt4LCB5LCB6XSA9IFsteCwgLXksIC16XTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gVE9ETyBUWVBFU0NSSVBUIG9uIHdlYiBTaGFyZWFibGVSZWYgaXMgdGhlIHZhbHVlIGl0c2VsZiBzbyB3ZSBjYWxsIGl0IGRpcmVjdGx5XG4gICAgICAgICAgKGV2ZW50SGFuZGxlciBhcyBhbnkpKHsgeCwgeSwgeiwgaW50ZXJmYWNlT3JpZW50YXRpb246IDAgfSk7XG4gICAgICAgIH07XG4gICAgICBjYXNlIFNlbnNvclR5cGUuR1lST1NDT1BFOlxuICAgICAgY2FzZSBTZW5zb3JUeXBlLk1BR05FVElDX0ZJRUxEOlxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgeCwgeSwgeiB9ID0gc2Vuc29yO1xuICAgICAgICAgIC8vIFRPRE8gVFlQRVNDUklQVCBvbiB3ZWIgU2hhcmVhYmxlUmVmIGlzIHRoZSB2YWx1ZSBpdHNlbGYgc28gd2UgY2FsbCBpdCBkaXJlY3RseVxuICAgICAgICAgIChldmVudEhhbmRsZXIgYXMgYW55KSh7IHgsIHksIHosIGludGVyZmFjZU9yaWVudGF0aW9uOiAwIH0pO1xuICAgICAgICB9O1xuICAgICAgY2FzZSBTZW5zb3JUeXBlLlJPVEFUSU9OOlxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgIGxldCBbcXcsIHF4LCBxeSwgcXpdID0gc2Vuc29yLnF1YXRlcm5pb247XG5cbiAgICAgICAgICAvLyBBbmRyb2lkIHNlbnNvcnMgaGF2ZSBhIGRpZmZlcmVudCBjb29yZGluYXRlIHN5c3RlbSB0aGFuIGlPU1xuICAgICAgICAgIGlmICh0aGlzLnBsYXRmb3JtID09PSBQbGF0Zm9ybS5XRUJfQU5EUk9JRCkge1xuICAgICAgICAgICAgW3F5LCBxel0gPSBbcXosIC1xeV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gcmVmZXJlbmNlOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81NzgyNjU4L2V4dHJhY3RpbmcteWF3LWZyb20tYS1xdWF0ZXJuaW9uXG4gICAgICAgICAgY29uc3QgeWF3ID0gLU1hdGguYXRhbjIoXG4gICAgICAgICAgICAyLjAgKiAocXkgKiBxeiArIHF3ICogcXgpLFxuICAgICAgICAgICAgcXcgKiBxdyAtIHF4ICogcXggLSBxeSAqIHF5ICsgcXogKiBxelxuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc3QgcGl0Y2ggPSBNYXRoLnNpbigtMi4wICogKHF4ICogcXogLSBxdyAqIHF5KSk7XG4gICAgICAgICAgY29uc3Qgcm9sbCA9IC1NYXRoLmF0YW4yKFxuICAgICAgICAgICAgMi4wICogKHF4ICogcXkgKyBxdyAqIHF6KSxcbiAgICAgICAgICAgIHF3ICogcXcgKyBxeCAqIHF4IC0gcXkgKiBxeSAtIHF6ICogcXpcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vIFRPRE8gVFlQRVNDUklQVCBvbiB3ZWIgU2hhcmVhYmxlUmVmIGlzIHRoZSB2YWx1ZSBpdHNlbGYgc28gd2UgY2FsbCBpdCBkaXJlY3RseVxuICAgICAgICAgIChldmVudEhhbmRsZXIgYXMgYW55KSh7XG4gICAgICAgICAgICBxdyxcbiAgICAgICAgICAgIHF4LFxuICAgICAgICAgICAgcXksXG4gICAgICAgICAgICBxeixcbiAgICAgICAgICAgIHlhdyxcbiAgICAgICAgICAgIHBpdGNoLFxuICAgICAgICAgICAgcm9sbCxcbiAgICAgICAgICAgIGludGVyZmFjZU9yaWVudGF0aW9uOiAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH1cbiAgfTtcblxuICB1bnJlZ2lzdGVyU2Vuc29yKGlkOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBzZW5zb3I6IFdlYlNlbnNvciB8IHVuZGVmaW5lZCA9IHRoaXMuc2Vuc29ycy5nZXQoaWQpO1xuICAgIGlmIChzZW5zb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgc2Vuc29yLnN0b3AoKTtcbiAgICAgIHRoaXMuc2Vuc29ycy5kZWxldGUoaWQpO1xuICAgIH1cbiAgfVxuXG4gIHN1YnNjcmliZUZvcktleWJvYXJkRXZlbnRzKF86IFNoYXJlYWJsZVJlZjxudW1iZXI+KTogbnVtYmVyIHtcbiAgICBpZiAoaXNXZWIoKSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnW1JlYW5pbWF0ZWRdIHVzZUFuaW1hdGVkS2V5Ym9hcmQgaXMgbm90IGF2YWlsYWJsZSBvbiB3ZWIgeWV0LidcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChpc0plc3QoKSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnW1JlYW5pbWF0ZWRdIHVzZUFuaW1hdGVkS2V5Ym9hcmQgaXMgbm90IGF2YWlsYWJsZSB3aGVuIHVzaW5nIEplc3QuJ1xuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGlzQ2hyb21lRGVidWdnZXIoKSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnW1JlYW5pbWF0ZWRdIHVzZUFuaW1hdGVkS2V5Ym9hcmQgaXMgbm90IGF2YWlsYWJsZSB3aGVuIHVzaW5nIENocm9tZSBEZWJ1Z2dlci4nXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICdbUmVhbmltYXRlZF0gdXNlQW5pbWF0ZWRLZXlib2FyZCBpcyBub3QgYXZhaWxhYmxlIG9uIHRoaXMgY29uZmlndXJhdGlvbi4nXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICB1bnN1YnNjcmliZUZyb21LZXlib2FyZEV2ZW50cyhfOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBub29wXG4gIH1cblxuICBpbml0aWFsaXplU2Vuc29yKHNlbnNvclR5cGU6IFNlbnNvclR5cGUsIGludGVydmFsOiBudW1iZXIpOiBXZWJTZW5zb3Ige1xuICAgIGNvbnN0IGNvbmZpZyA9XG4gICAgICBpbnRlcnZhbCA8PSAwXG4gICAgICAgID8geyByZWZlcmVuY2VGcmFtZTogJ2RldmljZScgfVxuICAgICAgICA6IHsgZnJlcXVlbmN5OiAxMDAwIC8gaW50ZXJ2YWwgfTtcbiAgICBzd2l0Y2ggKHNlbnNvclR5cGUpIHtcbiAgICAgIGNhc2UgU2Vuc29yVHlwZS5BQ0NFTEVST01FVEVSOlxuICAgICAgICByZXR1cm4gbmV3IHdpbmRvdy5BY2NlbGVyb21ldGVyKGNvbmZpZyk7XG4gICAgICBjYXNlIFNlbnNvclR5cGUuR1lST1NDT1BFOlxuICAgICAgICByZXR1cm4gbmV3IHdpbmRvdy5HeXJvc2NvcGUoY29uZmlnKTtcbiAgICAgIGNhc2UgU2Vuc29yVHlwZS5HUkFWSVRZOlxuICAgICAgICByZXR1cm4gbmV3IHdpbmRvdy5HcmF2aXR5U2Vuc29yKGNvbmZpZyk7XG4gICAgICBjYXNlIFNlbnNvclR5cGUuTUFHTkVUSUNfRklFTEQ6XG4gICAgICAgIHJldHVybiBuZXcgd2luZG93Lk1hZ25ldG9tZXRlcihjb25maWcpO1xuICAgICAgY2FzZSBTZW5zb3JUeXBlLlJPVEFUSU9OOlxuICAgICAgICByZXR1cm4gbmV3IHdpbmRvdy5BYnNvbHV0ZU9yaWVudGF0aW9uU2Vuc29yKGNvbmZpZyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0U2Vuc29yTmFtZShzZW5zb3JUeXBlOiBTZW5zb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHNlbnNvclR5cGUpIHtcbiAgICAgIGNhc2UgU2Vuc29yVHlwZS5BQ0NFTEVST01FVEVSOlxuICAgICAgICByZXR1cm4gJ0FjY2VsZXJvbWV0ZXInO1xuICAgICAgY2FzZSBTZW5zb3JUeXBlLkdSQVZJVFk6XG4gICAgICAgIHJldHVybiAnR3Jhdml0eVNlbnNvcic7XG4gICAgICBjYXNlIFNlbnNvclR5cGUuR1lST1NDT1BFOlxuICAgICAgICByZXR1cm4gJ0d5cm9zY29wZSc7XG4gICAgICBjYXNlIFNlbnNvclR5cGUuTUFHTkVUSUNfRklFTEQ6XG4gICAgICAgIHJldHVybiAnTWFnbmV0b21ldGVyJztcbiAgICAgIGNhc2UgU2Vuc29yVHlwZS5ST1RBVElPTjpcbiAgICAgICAgcmV0dXJuICdBYnNvbHV0ZU9yaWVudGF0aW9uU2Vuc29yJztcbiAgICB9XG4gIH1cblxuICBkZXRlY3RQbGF0Zm9ybSgpIHtcbiAgICBjb25zdCB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IgfHwgd2luZG93Lm9wZXJhO1xuICAgIGlmICh1c2VyQWdlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5wbGF0Zm9ybSA9IFBsYXRmb3JtLlVOS05PV047XG4gICAgfSBlbHNlIGlmICgvaVBhZHxpUGhvbmV8aVBvZC8udGVzdCh1c2VyQWdlbnQpKSB7XG4gICAgICB0aGlzLnBsYXRmb3JtID0gUGxhdGZvcm0uV0VCX0lPUztcbiAgICB9IGVsc2UgaWYgKC9hbmRyb2lkL2kudGVzdCh1c2VyQWdlbnQpKSB7XG4gICAgICB0aGlzLnBsYXRmb3JtID0gUGxhdGZvcm0uV0VCX0FORFJPSUQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGxhdGZvcm0gPSBQbGF0Zm9ybS5XRUI7XG4gICAgfVxuICB9XG5cbiAgZ2V0Vmlld1Byb3A8VD4oXG4gICAgX3ZpZXdUYWc6IG51bWJlcixcbiAgICBfcHJvcE5hbWU6IHN0cmluZyxcbiAgICBfY29tcG9uZW50PzogUmVhY3QuQ29tcG9uZW50LFxuICAgIF9jYWxsYmFjaz86IChyZXN1bHQ6IFQpID0+IHZvaWRcbiAgKTogUHJvbWlzZTxUPiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ1tSZWFuaW1hdGVkXSBnZXRWaWV3UHJvcCBpcyBub3QgYXZhaWxhYmxlIGluIEpTUmVhbmltYXRlZC4nXG4gICAgKTtcbiAgfVxuXG4gIGNvbmZpZ3VyZVByb3BzKCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdbUmVhbmltYXRlZF0gY29uZmlndXJlUHJvcHMgaXMgbm90IGF2YWlsYWJsZSBpbiBKU1JlYW5pbWF0ZWQuJ1xuICAgICk7XG4gIH1cblxuICBleGVjdXRlT25VSVJ1bnRpbWVTeW5jPFQsIFI+KF9zaGFyZWFibGU6IFNoYXJlYWJsZVJlZjxUPik6IFIge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdbUmVhbmltYXRlZF0gYGV4ZWN1dGVPblVJUnVudGltZVN5bmNgIGlzIG5vdCBhdmFpbGFibGUgaW4gSlNSZWFuaW1hdGVkLidcbiAgICApO1xuICB9XG59XG5cbmVudW0gUGxhdGZvcm0ge1xuICBXRUJfSU9TID0gJ3dlYiBpT1MnLFxuICBXRUJfQU5EUk9JRCA9ICd3ZWIgQW5kcm9pZCcsXG4gIFdFQiA9ICd3ZWInLFxuICBVTktOT1dOID0gJ3Vua25vd24nLFxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBOYXZpZ2F0b3Ige1xuICAgIHVzZXJBZ2VudDogc3RyaW5nO1xuICAgIHZlbmRvcjogc3RyaW5nO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQUMsSUFBQUEsc0JBQUEsR0FBQUMsT0FBQTtBQUFBQyxNQUFBLENBQUFDLGNBQUEsQ0FBQUMsT0FBQTtFQUFBQyxLQUFBO0FBQUE7QUFBQUQsT0FBQSxDQUFBRSxPQUFBO0FBQUEsSUFBQUMsZUFBQSxHQUFBUCxzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQU8sZ0JBQUEsR0FBQVIsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFRLGFBQUEsR0FBQVQsc0JBQUEsQ0FBQUMsT0FBQTtBQUNiLElBQUFTLGdCQUFBLEdBQUFULE9BQUE7QUFPQSxJQUFBVSxZQUFBLEdBQUFW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