a72c6c6ff99df04c8834c3768dcf026d
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useComposedEventHandler = useComposedEventHandler;
var _useEvent = require("./useEvent");
var _useHandler2 = require("./useHandler");
var _WorkletEventHandler = require("../WorkletEventHandler");
function useComposedEventHandler(handlers) {
  var workletsRecord = {};
  var composedEventNames = new Set();
  var workletsMap = {};
  handlers.filter(function (h) {
    return h !== null;
  }).forEach(function (handler) {
    var _ref = handler,
      workletEventHandler = _ref.workletEventHandler;
    if (workletEventHandler instanceof _WorkletEventHandler.WorkletEventHandler) {
      workletEventHandler.eventNames.forEach(function (eventName) {
        composedEventNames.add(eventName);
        if (workletsMap[eventName]) {
          workletsMap[eventName].push(workletEventHandler.worklet);
        } else {
          workletsMap[eventName] = [workletEventHandler.worklet];
        }
        var handlerName = eventName + `${workletsMap[eventName].length}`;
        workletsRecord[handlerName] = workletEventHandler.worklet;
      });
    }
  });
  var _useHandler = (0, _useHandler2.useHandler)(workletsRecord),
    doDependenciesDiffer = _useHandler.doDependenciesDiffer;
  return (0, _useEvent.useEvent)(function (event) {
    'worklet';

    if (workletsMap[event.eventName]) {
      workletsMap[event.eventName].forEach(function (worklet) {
        return worklet(event);
      });
    }
  }, Array.from(composedEventNames), doDependenciesDiffer);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInVzZUNvbXBvc2VkRXZlbnRIYW5kbGVyIiwiX3VzZUV2ZW50IiwicmVxdWlyZSIsIl91c2VIYW5kbGVyMiIsIl9Xb3JrbGV0RXZlbnRIYW5kbGVyIiwiaGFuZGxlcnMiLCJ3b3JrbGV0c1JlY29yZCIsImNvbXBvc2VkRXZlbnROYW1lcyIsIlNldCIsIndvcmtsZXRzTWFwIiwiZmlsdGVyIiwiaCIsImZvckVhY2giLCJoYW5kbGVyIiwiX3JlZiIsIndvcmtsZXRFdmVudEhhbmRsZXIiLCJXb3JrbGV0RXZlbnRIYW5kbGVyIiwiZXZlbnROYW1lcyIsImV2ZW50TmFtZSIsImFkZCIsInB1c2giLCJ3b3JrbGV0IiwiaGFuZGxlck5hbWUiLCJsZW5ndGgiLCJfdXNlSGFuZGxlciIsInVzZUhhbmRsZXIiLCJkb0RlcGVuZGVuY2llc0RpZmZlciIsInVzZUV2ZW50IiwiZXZlbnQiLCJBcnJheSIsImZyb20iXSwic291cmNlcyI6WyJ1c2VDb21wb3NlZEV2ZW50SGFuZGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5pbXBvcnQgeyB1c2VFdmVudCB9IGZyb20gJy4vdXNlRXZlbnQnO1xuaW1wb3J0IHsgdXNlSGFuZGxlciB9IGZyb20gJy4vdXNlSGFuZGxlcic7XG5pbXBvcnQgeyBXb3JrbGV0RXZlbnRIYW5kbGVyIH0gZnJvbSAnLi4vV29ya2xldEV2ZW50SGFuZGxlcic7XG5pbXBvcnQgdHlwZSB7IFJlYW5pbWF0ZWRFdmVudCB9IGZyb20gJy4vY29tbW9uVHlwZXMnO1xuaW1wb3J0IHR5cGUgeyBXb3JrbGV0RnVuY3Rpb24gfSBmcm9tICcuLi9jb21tb25UeXBlcyc7XG5pbXBvcnQgdHlwZSB7IEV2ZW50SGFuZGxlclByb2Nlc3NlZCwgRXZlbnRIYW5kbGVySW50ZXJuYWwgfSBmcm9tICcuL3VzZUV2ZW50JztcblxudHlwZSBDb21wb3NlZEhhbmRsZXJQcm9jZXNzZWQ8XG4gIEV2ZW50IGV4dGVuZHMgb2JqZWN0LFxuICBDb250ZXh0IGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuPiA9IEV2ZW50SGFuZGxlclByb2Nlc3NlZDxFdmVudCwgQ29udGV4dD47XG5cbnR5cGUgQ29tcG9zZWRIYW5kbGVySW50ZXJuYWw8RXZlbnQgZXh0ZW5kcyBvYmplY3Q+ID1cbiAgRXZlbnRIYW5kbGVySW50ZXJuYWw8RXZlbnQ+O1xuXG4vKipcbiAqIExldHMgeW91IGNvbXBvc2UgbXVsdGlwbGUgZXZlbnQgaGFuZGxlcnMgYmFzZWQgb24gW3VzZUV2ZW50XShodHRwczovL2RvY3Muc3dtYW5zaW9uLmNvbS9yZWFjdC1uYXRpdmUtcmVhbmltYXRlZC9kb2NzL2FkdmFuY2VkL3VzZUV2ZW50KSBob29rLlxuICpcbiAqIEBwYXJhbSBoYW5kbGVycyAtIEFuIGFycmF5IG9mIGV2ZW50IGhhbmRsZXJzIGNyZWF0ZWQgdXNpbmcgW3VzZUV2ZW50XShodHRwczovL2RvY3Muc3dtYW5zaW9uLmNvbS9yZWFjdC1uYXRpdmUtcmVhbmltYXRlZC9kb2NzL2FkdmFuY2VkL3VzZUV2ZW50KSBob29rLlxuICogQHJldHVybnMgQW4gb2JqZWN0IHlvdSBuZWVkIHRvIHBhc3MgdG8gYSBjb3Jlc3BvbmRpbmcgXCJvbkV2ZW50XCIgcHJvcCBvbiBhbiBgQW5pbWF0ZWRgIGNvbXBvbmVudCAoZm9yIGV4YW1wbGUgaGFuZGxlcnMgcmVzcG9uc2libGUgZm9yIGBvblNjcm9sbGAgZXZlbnQgZ28gdG8gYG9uU2Nyb2xsYCBwcm9wKS5cbiAqIEBzZWUgaHR0cHM6Ly9kb2NzLnN3bWFuc2lvbi5jb20vcmVhY3QtbmF0aXZlLXJlYW5pbWF0ZWQvZG9jcy9hZHZhbmNlZC91c2VDb21wb3NlZEV2ZW50SGFuZGxlclxuICovXG4vLyBAdHMtZXhwZWN0LWVycm9yIFRoaXMgb3ZlcmxvYWQgaXMgcmVxdWlyZWQgYnkgb3VyIEFQSS5cbmV4cG9ydCBmdW5jdGlvbiB1c2VDb21wb3NlZEV2ZW50SGFuZGxlcjxcbiAgRXZlbnQgZXh0ZW5kcyBvYmplY3QsXG4gIENvbnRleHQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuPihcbiAgaGFuZGxlcnM6IChFdmVudEhhbmRsZXJQcm9jZXNzZWQ8RXZlbnQsIENvbnRleHQ+IHwgbnVsbClbXVxuKTogQ29tcG9zZWRIYW5kbGVyUHJvY2Vzc2VkPEV2ZW50LCBDb250ZXh0PjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvbXBvc2VkRXZlbnRIYW5kbGVyPFxuICBFdmVudCBleHRlbmRzIG9iamVjdCxcbiAgQ29udGV4dCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4+KGhhbmRsZXJzOiAoRXZlbnRIYW5kbGVyUHJvY2Vzc2VkPEV2ZW50LCBDb250ZXh0PiB8IG51bGwpW10pIHtcbiAgLy8gUmVjb3JkIG9mIGhhbmRsZXJzJyB3b3JrbGV0cyB0byBjYWxjdWxhdGUgZGVwcyBkaWZmcy4gV2UgdXNlIHRoZSByZWNvcmQgdHlwZSB0byBtYXRjaCB0aGUgdXNlSGFuZGxlciBBUEkgcmVxdWlyZW1lbnRzXG4gIGNvbnN0IHdvcmtsZXRzUmVjb3JkOiBSZWNvcmQ8c3RyaW5nLCBXb3JrbGV0RnVuY3Rpb24+ID0ge307XG4gIC8vIFN1bW1lZCBldmVudCBuYW1lcyBmb3IgcmVnaXN0cmF0aW9uXG4gIGNvbnN0IGNvbXBvc2VkRXZlbnROYW1lcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAvLyBNYXAgdGhhdCBob2xkcyB3b3JrbGV0cyBmb3Igc3BlY2lmaWMgaGFuZGxlZCBldmVudHNcbiAgY29uc3Qgd29ya2xldHNNYXA6IHtcbiAgICBba2V5OiBzdHJpbmddOiAoKGV2ZW50OiBSZWFuaW1hdGVkRXZlbnQ8RXZlbnQ+KSA9PiB2b2lkKVtdO1xuICB9ID0ge307XG5cbiAgaGFuZGxlcnNcbiAgICAuZmlsdGVyKChoKSA9PiBoICE9PSBudWxsKVxuICAgIC5mb3JFYWNoKChoYW5kbGVyKSA9PiB7XG4gICAgICAvLyBFdmVudEhhbmRsZXJQcm9jZXNzZWQgaXMgdGhlIHJldHVybiB0eXBlIG9mIHVzZUV2ZW50IGFuZCBoYXMgdG8gYmUgZm9yY2UgY2FzdGVkIHRvIEV2ZW50SGFuZGxlckludGVybmFsLCBiZWNhdXNlIHdlIG5lZWQgV29ya2xldEV2ZW50SGFuZGxlciBvYmplY3RcbiAgICAgIGNvbnN0IHsgd29ya2xldEV2ZW50SGFuZGxlciB9ID1cbiAgICAgICAgaGFuZGxlciBhcyB1bmtub3duIGFzIEV2ZW50SGFuZGxlckludGVybmFsPENvbnRleHQ+O1xuICAgICAgaWYgKHdvcmtsZXRFdmVudEhhbmRsZXIgaW5zdGFuY2VvZiBXb3JrbGV0RXZlbnRIYW5kbGVyKSB7XG4gICAgICAgIHdvcmtsZXRFdmVudEhhbmRsZXIuZXZlbnROYW1lcy5mb3JFYWNoKChldmVudE5hbWUpID0+IHtcbiAgICAgICAgICBjb21wb3NlZEV2ZW50TmFtZXMuYWRkKGV2ZW50TmFtZSk7XG5cbiAgICAgICAgICBpZiAod29ya2xldHNNYXBbZXZlbnROYW1lXSkge1xuICAgICAgICAgICAgd29ya2xldHNNYXBbZXZlbnROYW1lXS5wdXNoKHdvcmtsZXRFdmVudEhhbmRsZXIud29ya2xldCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdvcmtsZXRzTWFwW2V2ZW50TmFtZV0gPSBbd29ya2xldEV2ZW50SGFuZGxlci53b3JrbGV0XTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBoYW5kbGVyTmFtZSA9IGV2ZW50TmFtZSArIGAke3dvcmtsZXRzTWFwW2V2ZW50TmFtZV0ubGVuZ3RofWA7XG4gICAgICAgICAgd29ya2xldHNSZWNvcmRbaGFuZGxlck5hbWVdID1cbiAgICAgICAgICAgIHdvcmtsZXRFdmVudEhhbmRsZXIud29ya2xldCBhcyBXb3JrbGV0RnVuY3Rpb247XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gIGNvbnN0IHsgZG9EZXBlbmRlbmNpZXNEaWZmZXIgfSA9IHVzZUhhbmRsZXIod29ya2xldHNSZWNvcmQpO1xuXG4gIHJldHVybiB1c2VFdmVudDxFdmVudCwgQ29udGV4dD4oXG4gICAgKGV2ZW50KSA9PiB7XG4gICAgICAnd29ya2xldCc7XG4gICAgICBpZiAod29ya2xldHNNYXBbZXZlbnQuZXZlbnROYW1lXSkge1xuICAgICAgICB3b3JrbGV0c01hcFtldmVudC5ldmVudE5hbWVdLmZvckVhY2goKHdvcmtsZXQpID0+IHdvcmtsZXQoZXZlbnQpKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIEFycmF5LmZyb20oY29tcG9zZWRFdmVudE5hbWVzKSxcbiAgICBkb0RlcGVuZGVuY2llc0RpZmZlclxuICApIGFzIHVua25vd24gYXMgQ29tcG9zZWRIYW5kbGVySW50ZXJuYWw8RXZlbnQ+O1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUFDQSxNQUFBLENBQUFDLGNBQUEsQ0FBQUMsT0FBQTtFQUFBQyxLQUFBO0FBQUE7QUFBQUQsT0FBQSxDQUFBRSx1QkFBQSxHQUFBQSx1QkFBQTtBQUNiLElBQUFDLFNBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLFlBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLG9CQUFBLEdBQUFGLE9BQUE7QUE0Qk8sU0FBU0YsdUJBQXVCQSxDQUdyQ0ssUUFBMEQsRUFBRTtFQUU1RCxJQUFNQyxjQUErQyxHQUFHLENBQUMsQ0FBQztFQUUxRCxJQUFNQyxrQkFBa0IsR0FBRyxJQUFJQyxHQUFHLENBQVMsQ0FBQztFQUU1QyxJQUFNQyxXQUVMLEdBQUcsQ0FBQyxDQUFDO0VBRU5KLFFBQVEsQ0FDTEssTUFBTSxDQUFDLFVBQUNDLENBQUM7SUFBQSxPQUFLQSxDQUFDLEtBQUssSUFBSTtFQUFBLEVBQUMsQ0FDekJDLE9BQU8sQ0FBQyxVQUFDQyxPQUFPLEVBQUs7SUFFcEIsSUFBQUMsSUFBQSxHQUNFRCxPQUFPO01BRERFLG1CQUFtQixHQUFBRCxJQUFBLENBQW5CQyxtQkFBbUI7SUFFM0IsSUFBSUEsbUJBQW1CLFlBQVlDLHdDQUFtQixFQUFFO01BQ3RERCxtQkFBbUIsQ0FBQ0UsVUFBVSxDQUFDTCxPQUFPLENBQUMsVUFBQ00sU0FBUyxFQUFLO1FBQ3BEWCxrQkFBa0IsQ0FBQ1ksR0FBRyxDQUFDRCxTQUFTLENBQUM7UUFFakMsSUFBSVQsV0FBVyxDQUFDUyxTQUFTLENBQUMsRUFBRTtVQUMxQlQsV0FBVyxDQUFDUyxTQUFTLENBQUMsQ0FBQ0UsSUFBSSxDQUFDTCxtQkFBbUIsQ0FBQ00sT0FBTyxDQUFDO1FBQzFELENBQUMsTUFBTTtVQUNMWixXQUFXLENBQUNTLFNBQVMsQ0FBQyxHQUFHLENBQUNILG1CQUFtQixDQUFDTSxPQUFPLENBQUM7UUFDeEQ7UUFFQSxJQUFNQyxXQUFXLEdBQUdKLFNBQVMsR0FBRyxHQUFHVCxXQUFXLENBQUNTLFNBQVMsQ0FBQyxDQUFDSyxNQUFNLEVBQUU7UUFDbEVqQixjQUFjLENBQUNnQixXQUFXLENBQUMsR0FDekJQLG1CQUFtQixDQUFDTSxPQUEwQjtNQUNsRCxDQUFDLENBQUM7SUFDSjtFQUNGLENBQUMsQ0FBQztFQUVKLElBQUFHLFdBQUEsR0FBaUMsSUFBQUMsdUJBQVUsRUFBQ25CLGNBQWMsQ0FBQztJQUFuRG9CLG9CQUFvQixHQUFBRixXQUFBLENBQXBCRSxvQkFBb0I7RUFFNUIsT0FBTyxJQUFBQyxrQkFBUSxFQUNiLFVBQUNDLEtBQUssRUFBSztJQUNULFNBQVM7O0lBQ1QsSUFBSW5CLFdBQVcsQ0FBQ21CLEtBQUssQ0FBQ1YsU0FBUyxDQUFDLEVBQUU7TUFDaENULFdBQVcsQ0FBQ21CLEtBQUssQ0FBQ1YsU0FBUyxDQUFDLENBQUNOLE9BQU8sQ0FBQyxVQUFDUyxPQUFPO1FBQUEsT0FBS0EsT0FBTyxDQUFDTyxLQUFLLENBQUM7TUFBQSxFQUFDO0lBQ25FO0VBQ0YsQ0FBQyxFQUNEQyxLQUFLLENBQUNDLElBQUksQ0FBQ3ZCLGtCQUFrQixDQUFDLEVBQzlCbUIsb0JBQ0YsQ0FBQztBQUNIIiwiaWdub3JlTGlzdCI6W119