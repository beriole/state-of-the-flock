{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_slicedToArray2","_classCallCheck2","_createClass2","_PlatformChecker","_commonTypes","_mockedRequestAnimationFrame","_defineProperty","obj","key","_toPropertyKey","enumerable","configurable","writable","t","i","_toPrimitive","r","e","Symbol","toPrimitive","call","TypeError","String","Number","requestAnimationFrameImpl","isJest","globalThis","requestAnimationFrame","mockedRequestAnimationFrame","JSReanimated","_this","Map","undefined","sensor","sensorType","eventHandler","SensorType","ACCELEROMETER","GRAVITY","x","y","z","platform","Platform","WEB_ANDROID","_ref","interfaceOrientation","GYROSCOPE","MAGNETIC_FIELD","ROTATION","_sensor$quaternion","quaternion","qw","qx","qy","qz","_ref2","yaw","Math","atan2","pitch","sin","roll","makeShareableClone","Error","scheduleOnUI","worklet","createWorkletRuntime","_name","_initializer","scheduleOnRuntime","registerEventHandler","_eventHandler","_eventName","_emitterReactTag","unregisterEventHandler","_","enableLayoutAnimations","isWeb","console","warn","isChromeDebugger","configureLayoutAnimationBatch","setShouldAnimateExitingForTag","registerSensor","interval","_iosReferenceFrame","isWindowAvailable","detectPlatform","getSensorName","window","location","protocol","WEB_IOS","initializeSensor","addEventListener","getSensorCallback","start","sensors","set","nextSensorId","unregisterSensor","id","get","stop","delete","subscribeForKeyboardEvents","unsubscribeFromKeyboardEvents","config","referenceFrame","frequency","Accelerometer","Gyroscope","GravitySensor","Magnetometer","AbsoluteOrientationSensor","userAgent","navigator","vendor","opera","UNKNOWN","test","WEB","getViewProp","_viewTag","_propName","_component","_callback","configureProps","executeOnUIRuntimeSync","_shareable"],"sources":["JSReanimated.ts"],"sourcesContent":["'use strict';\nimport {\n  isChromeDebugger,\n  isJest,\n  isWeb,\n  isWindowAvailable,\n} from '../PlatformChecker';\nimport type { ShareableRef, Value3D, ValueRotation } from '../commonTypes';\nimport { SensorType } from '../commonTypes';\nimport type { WebSensor } from './WebSensor';\nimport { mockedRequestAnimationFrame } from '../mockedRequestAnimationFrame';\nimport type { WorkletRuntime } from '../runtimes';\n\n// In Node.js environments (like when static rendering with Expo Router)\n// requestAnimationFrame is unavailable, so we use our mock.\n// It also has to be mocked for Jest purposes (see `initializeUIRuntime`).\nconst requestAnimationFrameImpl =\n  isJest() || !globalThis.requestAnimationFrame\n    ? mockedRequestAnimationFrame\n    : globalThis.requestAnimationFrame;\n\nexport default class JSReanimated {\n  nextSensorId = 0;\n  sensors = new Map<number, WebSensor>();\n  platform?: Platform = undefined;\n\n  makeShareableClone<T>(): ShareableRef<T> {\n    throw new Error(\n      '[Reanimated] makeShareableClone should never be called in JSReanimated.'\n    );\n  }\n\n  scheduleOnUI<T>(worklet: ShareableRef<T>) {\n    // @ts-ignore web implementation has still not been updated after the rewrite, this will be addressed once the web implementation updates are ready\n    requestAnimationFrameImpl(worklet);\n  }\n\n  createWorkletRuntime(\n    _name: string,\n    _initializer: ShareableRef<() => void>\n  ): WorkletRuntime {\n    throw new Error(\n      '[Reanimated] createWorkletRuntime is not available in JSReanimated.'\n    );\n  }\n\n  scheduleOnRuntime() {\n    throw new Error(\n      '[Reanimated] scheduleOnRuntime is not available in JSReanimated.'\n    );\n  }\n\n  registerEventHandler<T>(\n    _eventHandler: ShareableRef<T>,\n    _eventName: string,\n    _emitterReactTag: number\n  ): number {\n    throw new Error(\n      '[Reanimated] registerEventHandler is not available in JSReanimated.'\n    );\n  }\n\n  unregisterEventHandler(_: number): void {\n    throw new Error(\n      '[Reanimated] unregisterEventHandler is not available in JSReanimated.'\n    );\n  }\n\n  enableLayoutAnimations() {\n    if (isWeb()) {\n      console.warn(\n        '[Reanimated] Layout Animations are not supported on web yet.'\n      );\n    } else if (isJest()) {\n      console.warn(\n        '[Reanimated] Layout Animations are no-ops when using Jest.'\n      );\n    } else if (isChromeDebugger()) {\n      console.warn(\n        '[Reanimated] Layout Animations are no-ops when using Chrome Debugger.'\n      );\n    } else {\n      console.warn(\n        '[Reanimated] Layout Animations are not supported on this configuration.'\n      );\n    }\n  }\n\n  configureLayoutAnimationBatch() {\n    // no-op\n  }\n\n  setShouldAnimateExitingForTag() {\n    // no-op\n  }\n\n  registerSensor(\n    sensorType: SensorType,\n    interval: number,\n    _iosReferenceFrame: number,\n    eventHandler: ShareableRef<(data: Value3D | ValueRotation) => void>\n  ): number {\n    if (!isWindowAvailable()) {\n      // the window object is unavailable when building the server portion of a site that uses SSG\n      // this check is here to ensure that the server build won't fail\n      return -1;\n    }\n\n    if (this.platform === undefined) {\n      this.detectPlatform();\n    }\n\n    if (!(this.getSensorName(sensorType) in window)) {\n      // https://w3c.github.io/sensors/#secure-context\n      console.warn(\n        '[Reanimated] Sensor is not available.' +\n          (isWeb() && location.protocol !== 'https:'\n            ? ' Make sure you use secure origin with `npx expo start --web --https`.'\n            : '') +\n          (this.platform === Platform.WEB_IOS\n            ? ' For iOS web, you will also have to also grant permission in the browser: https://dev.to/li/how-to-requestpermission-for-devicemotion-and-deviceorientation-events-in-ios-13-46g2.'\n            : '')\n      );\n      return -1;\n    }\n\n    if (this.platform === undefined) {\n      this.detectPlatform();\n    }\n\n    const sensor: WebSensor = this.initializeSensor(sensorType, interval);\n    sensor.addEventListener(\n      'reading',\n      this.getSensorCallback(sensor, sensorType, eventHandler)\n    );\n    sensor.start();\n\n    this.sensors.set(this.nextSensorId, sensor);\n    return this.nextSensorId++;\n  }\n\n  getSensorCallback = (\n    sensor: WebSensor,\n    sensorType: SensorType,\n    eventHandler: ShareableRef<(data: Value3D | ValueRotation) => void>\n  ) => {\n    switch (sensorType) {\n      case SensorType.ACCELEROMETER:\n      case SensorType.GRAVITY:\n        return () => {\n          let { x, y, z } = sensor;\n\n          // Web Android sensors have a different coordinate system than iOS\n          if (this.platform === Platform.WEB_ANDROID) {\n            [x, y, z] = [-x, -y, -z];\n          }\n          // TODO TYPESCRIPT on web ShareableRef is the value itself so we call it directly\n          (eventHandler as any)({ x, y, z, interfaceOrientation: 0 });\n        };\n      case SensorType.GYROSCOPE:\n      case SensorType.MAGNETIC_FIELD:\n        return () => {\n          const { x, y, z } = sensor;\n          // TODO TYPESCRIPT on web ShareableRef is the value itself so we call it directly\n          (eventHandler as any)({ x, y, z, interfaceOrientation: 0 });\n        };\n      case SensorType.ROTATION:\n        return () => {\n          let [qw, qx, qy, qz] = sensor.quaternion;\n\n          // Android sensors have a different coordinate system than iOS\n          if (this.platform === Platform.WEB_ANDROID) {\n            [qy, qz] = [qz, -qy];\n          }\n\n          // reference: https://stackoverflow.com/questions/5782658/extracting-yaw-from-a-quaternion\n          const yaw = -Math.atan2(\n            2.0 * (qy * qz + qw * qx),\n            qw * qw - qx * qx - qy * qy + qz * qz\n          );\n          const pitch = Math.sin(-2.0 * (qx * qz - qw * qy));\n          const roll = -Math.atan2(\n            2.0 * (qx * qy + qw * qz),\n            qw * qw + qx * qx - qy * qy - qz * qz\n          );\n          // TODO TYPESCRIPT on web ShareableRef is the value itself so we call it directly\n          (eventHandler as any)({\n            qw,\n            qx,\n            qy,\n            qz,\n            yaw,\n            pitch,\n            roll,\n            interfaceOrientation: 0,\n          });\n        };\n    }\n  };\n\n  unregisterSensor(id: number): void {\n    const sensor: WebSensor | undefined = this.sensors.get(id);\n    if (sensor !== undefined) {\n      sensor.stop();\n      this.sensors.delete(id);\n    }\n  }\n\n  subscribeForKeyboardEvents(_: ShareableRef<number>): number {\n    if (isWeb()) {\n      console.warn(\n        '[Reanimated] useAnimatedKeyboard is not available on web yet.'\n      );\n    } else if (isJest()) {\n      console.warn(\n        '[Reanimated] useAnimatedKeyboard is not available when using Jest.'\n      );\n    } else if (isChromeDebugger()) {\n      console.warn(\n        '[Reanimated] useAnimatedKeyboard is not available when using Chrome Debugger.'\n      );\n    } else {\n      console.warn(\n        '[Reanimated] useAnimatedKeyboard is not available on this configuration.'\n      );\n    }\n    return -1;\n  }\n\n  unsubscribeFromKeyboardEvents(_: number): void {\n    // noop\n  }\n\n  initializeSensor(sensorType: SensorType, interval: number): WebSensor {\n    const config =\n      interval <= 0\n        ? { referenceFrame: 'device' }\n        : { frequency: 1000 / interval };\n    switch (sensorType) {\n      case SensorType.ACCELEROMETER:\n        return new window.Accelerometer(config);\n      case SensorType.GYROSCOPE:\n        return new window.Gyroscope(config);\n      case SensorType.GRAVITY:\n        return new window.GravitySensor(config);\n      case SensorType.MAGNETIC_FIELD:\n        return new window.Magnetometer(config);\n      case SensorType.ROTATION:\n        return new window.AbsoluteOrientationSensor(config);\n    }\n  }\n\n  getSensorName(sensorType: SensorType): string {\n    switch (sensorType) {\n      case SensorType.ACCELEROMETER:\n        return 'Accelerometer';\n      case SensorType.GRAVITY:\n        return 'GravitySensor';\n      case SensorType.GYROSCOPE:\n        return 'Gyroscope';\n      case SensorType.MAGNETIC_FIELD:\n        return 'Magnetometer';\n      case SensorType.ROTATION:\n        return 'AbsoluteOrientationSensor';\n    }\n  }\n\n  detectPlatform() {\n    const userAgent = navigator.userAgent || navigator.vendor || window.opera;\n    if (userAgent === undefined) {\n      this.platform = Platform.UNKNOWN;\n    } else if (/iPad|iPhone|iPod/.test(userAgent)) {\n      this.platform = Platform.WEB_IOS;\n    } else if (/android/i.test(userAgent)) {\n      this.platform = Platform.WEB_ANDROID;\n    } else {\n      this.platform = Platform.WEB;\n    }\n  }\n\n  getViewProp<T>(\n    _viewTag: number,\n    _propName: string,\n    _component?: React.Component,\n    _callback?: (result: T) => void\n  ): Promise<T> {\n    throw new Error(\n      '[Reanimated] getViewProp is not available in JSReanimated.'\n    );\n  }\n\n  configureProps() {\n    throw new Error(\n      '[Reanimated] configureProps is not available in JSReanimated.'\n    );\n  }\n\n  executeOnUIRuntimeSync<T, R>(_shareable: ShareableRef<T>): R {\n    throw new Error(\n      '[Reanimated] `executeOnUIRuntimeSync` is not available in JSReanimated.'\n    );\n  }\n}\n\nenum Platform {\n  WEB_IOS = 'web iOS',\n  WEB_ANDROID = 'web Android',\n  WEB = 'web',\n  UNKNOWN = 'unknown',\n}\n\ndeclare global {\n  interface Navigator {\n    userAgent: string;\n    vendor: string;\n  }\n}\n"],"mappings":"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","ignoreList":[]}