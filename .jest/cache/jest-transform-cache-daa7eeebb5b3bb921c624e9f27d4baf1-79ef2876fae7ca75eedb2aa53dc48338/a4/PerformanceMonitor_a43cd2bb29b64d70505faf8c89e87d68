ea0957979ad00be6713a75e21cb68119
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PerformanceMonitor = PerformanceMonitor;
var _react = _interopRequireWildcard(require("react"));
var _reactNative = require("react-native");
var _hook = require("../hook");
var _createAnimatedComponent = require("../createAnimatedComponent");
var _ConfigHelper = require("../ConfigHelper");
var _jsxRuntime = require("react/jsx-runtime");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
function createCircularDoublesBuffer(size) {
  'worklet';

  return {
    next: 0,
    buffer: new Float32Array(size),
    size: size,
    count: 0,
    push: function push(value) {
      var oldValue = this.buffer[this.next];
      var oldCount = this.count;
      this.buffer[this.next] = value;
      this.next = (this.next + 1) % this.size;
      this.count = Math.min(this.size, this.count + 1);
      return oldCount === this.size ? oldValue : null;
    },
    front: function front() {
      var notEmpty = this.count > 0;
      if (notEmpty) {
        var current = this.next - 1;
        var index = current < 0 ? this.size - 1 : current;
        return this.buffer[index];
      }
      return null;
    },
    back: function back() {
      var notEmpty = this.count > 0;
      return notEmpty ? this.buffer[this.next] : null;
    }
  };
}
var DEFAULT_BUFFER_SIZE = 20;
(0, _ConfigHelper.addWhitelistedNativeProps)({
  text: true
});
var AnimatedTextInput = (0, _createAnimatedComponent.createAnimatedComponent)(_reactNative.TextInput);
function loopAnimationFrame(fn) {
  var lastTime = 0;
  function loop() {
    requestAnimationFrame(function (time) {
      if (lastTime > 0) {
        fn(lastTime, time);
      }
      lastTime = time;
      requestAnimationFrame(loop);
    });
  }
  loop();
}
function getFps(renderTimeInMs) {
  'worklet';

  return 1000 / renderTimeInMs;
}
function completeBufferRoutine(buffer, timestamp) {
  'worklet';

  var _buffer$push;
  timestamp = Math.round(timestamp);
  var droppedTimestamp = (_buffer$push = buffer.push(timestamp)) != null ? _buffer$push : timestamp;
  var measuredRangeDuration = timestamp - droppedTimestamp;
  return getFps(measuredRangeDuration / buffer.count);
}
function JsPerformance(_ref) {
  var smoothingFrames = _ref.smoothingFrames;
  var jsFps = (0, _hook.useSharedValue)(null);
  var totalRenderTime = (0, _hook.useSharedValue)(0);
  var circularBuffer = (0, _react.useRef)(createCircularDoublesBuffer(smoothingFrames));
  (0, _react.useEffect)(function () {
    loopAnimationFrame(function (_, timestamp) {
      timestamp = Math.round(timestamp);
      var currentFps = completeBufferRoutine(circularBuffer.current, timestamp);
      jsFps.value = (currentFps * 2).toFixed(0);
    });
  }, [jsFps, totalRenderTime]);
  var animatedProps = (0, _hook.useAnimatedProps)(function () {
    var _jsFps$value;
    var text = 'JS: ' + ((_jsFps$value = jsFps.value) != null ? _jsFps$value : 'N/A') + ' ';
    return {
      text: text,
      defaultValue: text
    };
  });
  return (0, _jsxRuntime.jsx)(_reactNative.View, {
    style: styles.container,
    children: (0, _jsxRuntime.jsx)(AnimatedTextInput, {
      style: styles.text,
      animatedProps: animatedProps,
      editable: false
    })
  });
}
function UiPerformance(_ref2) {
  var smoothingFrames = _ref2.smoothingFrames;
  var uiFps = (0, _hook.useSharedValue)(null);
  var circularBuffer = (0, _hook.useSharedValue)(null);
  (0, _hook.useFrameCallback)(function (_ref3) {
    var timestamp = _ref3.timestamp;
    if (circularBuffer.value === null) {
      circularBuffer.value = createCircularDoublesBuffer(smoothingFrames);
    }
    timestamp = Math.round(timestamp);
    var currentFps = completeBufferRoutine(circularBuffer.value, timestamp);
    uiFps.value = currentFps.toFixed(0);
  });
  var animatedProps = (0, _hook.useAnimatedProps)(function () {
    var _uiFps$value;
    var text = 'UI: ' + ((_uiFps$value = uiFps.value) != null ? _uiFps$value : 'N/A') + ' ';
    return {
      text: text,
      defaultValue: text
    };
  });
  return (0, _jsxRuntime.jsx)(_reactNative.View, {
    style: styles.container,
    children: (0, _jsxRuntime.jsx)(AnimatedTextInput, {
      style: styles.text,
      animatedProps: animatedProps,
      editable: false
    })
  });
}
function PerformanceMonitor(_ref4) {
  var _ref4$smoothingFrames = _ref4.smoothingFrames,
    smoothingFrames = _ref4$smoothingFrames === void 0 ? DEFAULT_BUFFER_SIZE : _ref4$smoothingFrames;
  return (0, _jsxRuntime.jsxs)(_reactNative.View, {
    style: styles.monitor,
    children: [(0, _jsxRuntime.jsx)(JsPerformance, {
      smoothingFrames: smoothingFrames
    }), (0, _jsxRuntime.jsx)(UiPerformance, {
      smoothingFrames: smoothingFrames
    })]
  });
}
var styles = _reactNative.StyleSheet.create({
  monitor: {
    flexDirection: 'row',
    position: 'absolute',
    backgroundColor: '#0006',
    zIndex: 1000
  },
  header: {
    fontSize: 14,
    color: '#ffff',
    paddingHorizontal: 5
  },
  text: {
    fontSize: 13,
    color: '#ffff',
    fontFamily: 'monospace',
    paddingHorizontal: 3
  },
  container: {
    alignItems: 'center',
    justifyContent: 'center',
    flexDirection: 'row',
    flexWrap: 'wrap'
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlBlcmZvcm1hbmNlTW9uaXRvciIsIl9yZWFjdCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9yZWFjdE5hdGl2ZSIsIl9ob29rIiwiX2NyZWF0ZUFuaW1hdGVkQ29tcG9uZW50IiwiX0NvbmZpZ0hlbHBlciIsIl9qc3hSdW50aW1lIiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsIl90IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiY3JlYXRlQ2lyY3VsYXJEb3VibGVzQnVmZmVyIiwic2l6ZSIsIm5leHQiLCJidWZmZXIiLCJGbG9hdDMyQXJyYXkiLCJjb3VudCIsInB1c2giLCJvbGRWYWx1ZSIsIm9sZENvdW50IiwiTWF0aCIsIm1pbiIsImZyb250Iiwibm90RW1wdHkiLCJjdXJyZW50IiwiaW5kZXgiLCJiYWNrIiwiREVGQVVMVF9CVUZGRVJfU0laRSIsImFkZFdoaXRlbGlzdGVkTmF0aXZlUHJvcHMiLCJ0ZXh0IiwiQW5pbWF0ZWRUZXh0SW5wdXQiLCJjcmVhdGVBbmltYXRlZENvbXBvbmVudCIsIlRleHRJbnB1dCIsImxvb3BBbmltYXRpb25GcmFtZSIsImZuIiwibGFzdFRpbWUiLCJsb29wIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwidGltZSIsImdldEZwcyIsInJlbmRlclRpbWVJbk1zIiwiY29tcGxldGVCdWZmZXJSb3V0aW5lIiwidGltZXN0YW1wIiwiX2J1ZmZlciRwdXNoIiwicm91bmQiLCJkcm9wcGVkVGltZXN0YW1wIiwibWVhc3VyZWRSYW5nZUR1cmF0aW9uIiwiSnNQZXJmb3JtYW5jZSIsIl9yZWYiLCJzbW9vdGhpbmdGcmFtZXMiLCJqc0ZwcyIsInVzZVNoYXJlZFZhbHVlIiwidG90YWxSZW5kZXJUaW1lIiwiY2lyY3VsYXJCdWZmZXIiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJfIiwiY3VycmVudEZwcyIsInRvRml4ZWQiLCJhbmltYXRlZFByb3BzIiwidXNlQW5pbWF0ZWRQcm9wcyIsIl9qc0ZwcyR2YWx1ZSIsImRlZmF1bHRWYWx1ZSIsImpzeCIsIlZpZXciLCJzdHlsZSIsInN0eWxlcyIsImNvbnRhaW5lciIsImNoaWxkcmVuIiwiZWRpdGFibGUiLCJVaVBlcmZvcm1hbmNlIiwiX3JlZjIiLCJ1aUZwcyIsInVzZUZyYW1lQ2FsbGJhY2siLCJfcmVmMyIsIl91aUZwcyR2YWx1ZSIsIl9yZWY0IiwiX3JlZjQkc21vb3RoaW5nRnJhbWVzIiwianN4cyIsIm1vbml0b3IiLCJTdHlsZVNoZWV0IiwiY3JlYXRlIiwiZmxleERpcmVjdGlvbiIsInBvc2l0aW9uIiwiYmFja2dyb3VuZENvbG9yIiwiekluZGV4IiwiaGVhZGVyIiwiZm9udFNpemUiLCJjb2xvciIsInBhZGRpbmdIb3Jpem9udGFsIiwiZm9udEZhbWlseSIsImFsaWduSXRlbXMiLCJqdXN0aWZ5Q29udGVudCIsImZsZXhXcmFwIl0sInNvdXJjZXMiOlsiUGVyZm9ybWFuY2VNb25pdG9yLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFRleHRJbnB1dCwgU3R5bGVTaGVldCwgVmlldyB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5cbmltcG9ydCB0eXBlIHsgRnJhbWVJbmZvIH0gZnJvbSAnLi4vZnJhbWVDYWxsYmFjayc7XG5pbXBvcnQgeyB1c2VTaGFyZWRWYWx1ZSwgdXNlQW5pbWF0ZWRQcm9wcywgdXNlRnJhbWVDYWxsYmFjayB9IGZyb20gJy4uL2hvb2snO1xuaW1wb3J0IHsgY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQgfSBmcm9tICcuLi9jcmVhdGVBbmltYXRlZENvbXBvbmVudCc7XG5pbXBvcnQgeyBhZGRXaGl0ZWxpc3RlZE5hdGl2ZVByb3BzIH0gZnJvbSAnLi4vQ29uZmlnSGVscGVyJztcblxudHlwZSBDaXJjdWxhckJ1ZmZlciA9IFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZUNpcmN1bGFyRG91Ymxlc0J1ZmZlcj47XG5mdW5jdGlvbiBjcmVhdGVDaXJjdWxhckRvdWJsZXNCdWZmZXIoc2l6ZTogbnVtYmVyKSB7XG4gICd3b3JrbGV0JztcblxuICByZXR1cm4ge1xuICAgIG5leHQ6IDAgYXMgbnVtYmVyLFxuICAgIGJ1ZmZlcjogbmV3IEZsb2F0MzJBcnJheShzaXplKSxcbiAgICBzaXplLFxuICAgIGNvdW50OiAwIGFzIG51bWJlcixcblxuICAgIHB1c2godmFsdWU6IG51bWJlcik6IG51bWJlciB8IG51bGwge1xuICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLmJ1ZmZlclt0aGlzLm5leHRdO1xuICAgICAgY29uc3Qgb2xkQ291bnQgPSB0aGlzLmNvdW50O1xuICAgICAgdGhpcy5idWZmZXJbdGhpcy5uZXh0XSA9IHZhbHVlO1xuXG4gICAgICB0aGlzLm5leHQgPSAodGhpcy5uZXh0ICsgMSkgJSB0aGlzLnNpemU7XG4gICAgICB0aGlzLmNvdW50ID0gTWF0aC5taW4odGhpcy5zaXplLCB0aGlzLmNvdW50ICsgMSk7XG4gICAgICByZXR1cm4gb2xkQ291bnQgPT09IHRoaXMuc2l6ZSA/IG9sZFZhbHVlIDogbnVsbDtcbiAgICB9LFxuXG4gICAgZnJvbnQoKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgICBjb25zdCBub3RFbXB0eSA9IHRoaXMuY291bnQgPiAwO1xuICAgICAgaWYgKG5vdEVtcHR5KSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLm5leHQgLSAxO1xuICAgICAgICBjb25zdCBpbmRleCA9IGN1cnJlbnQgPCAwID8gdGhpcy5zaXplIC0gMSA6IGN1cnJlbnQ7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlcltpbmRleF07XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgYmFjaygpOiBudW1iZXIgfCBudWxsIHtcbiAgICAgIGNvbnN0IG5vdEVtcHR5ID0gdGhpcy5jb3VudCA+IDA7XG4gICAgICByZXR1cm4gbm90RW1wdHkgPyB0aGlzLmJ1ZmZlclt0aGlzLm5leHRdIDogbnVsbDtcbiAgICB9LFxuICB9O1xufVxuXG5jb25zdCBERUZBVUxUX0JVRkZFUl9TSVpFID0gMjA7XG5hZGRXaGl0ZWxpc3RlZE5hdGl2ZVByb3BzKHsgdGV4dDogdHJ1ZSB9KTtcbmNvbnN0IEFuaW1hdGVkVGV4dElucHV0ID0gY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQoVGV4dElucHV0KTtcblxuZnVuY3Rpb24gbG9vcEFuaW1hdGlvbkZyYW1lKGZuOiAobGFzdFRpbWU6IG51bWJlciwgdGltZTogbnVtYmVyKSA9PiB2b2lkKSB7XG4gIGxldCBsYXN0VGltZSA9IDA7XG5cbiAgZnVuY3Rpb24gbG9vcCgpIHtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKHRpbWUpID0+IHtcbiAgICAgIGlmIChsYXN0VGltZSA+IDApIHtcbiAgICAgICAgZm4obGFzdFRpbWUsIHRpbWUpO1xuICAgICAgfVxuICAgICAgbGFzdFRpbWUgPSB0aW1lO1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xuICAgIH0pO1xuICB9XG5cbiAgbG9vcCgpO1xufVxuXG5mdW5jdGlvbiBnZXRGcHMocmVuZGVyVGltZUluTXM6IG51bWJlcik6IG51bWJlciB7XG4gICd3b3JrbGV0JztcbiAgcmV0dXJuIDEwMDAgLyByZW5kZXJUaW1lSW5Ncztcbn1cblxuZnVuY3Rpb24gY29tcGxldGVCdWZmZXJSb3V0aW5lKFxuICBidWZmZXI6IENpcmN1bGFyQnVmZmVyLFxuICB0aW1lc3RhbXA6IG51bWJlclxuKTogbnVtYmVyIHtcbiAgJ3dvcmtsZXQnO1xuICB0aW1lc3RhbXAgPSBNYXRoLnJvdW5kKHRpbWVzdGFtcCk7XG5cbiAgY29uc3QgZHJvcHBlZFRpbWVzdGFtcCA9IGJ1ZmZlci5wdXNoKHRpbWVzdGFtcCkgPz8gdGltZXN0YW1wO1xuXG4gIGNvbnN0IG1lYXN1cmVkUmFuZ2VEdXJhdGlvbiA9IHRpbWVzdGFtcCAtIGRyb3BwZWRUaW1lc3RhbXA7XG5cbiAgcmV0dXJuIGdldEZwcyhtZWFzdXJlZFJhbmdlRHVyYXRpb24gLyBidWZmZXIuY291bnQpO1xufVxuXG5mdW5jdGlvbiBKc1BlcmZvcm1hbmNlKHsgc21vb3RoaW5nRnJhbWVzIH06IHsgc21vb3RoaW5nRnJhbWVzOiBudW1iZXIgfSkge1xuICBjb25zdCBqc0ZwcyA9IHVzZVNoYXJlZFZhbHVlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCB0b3RhbFJlbmRlclRpbWUgPSB1c2VTaGFyZWRWYWx1ZSgwKTtcbiAgY29uc3QgY2lyY3VsYXJCdWZmZXIgPSB1c2VSZWY8Q2lyY3VsYXJCdWZmZXI+KFxuICAgIGNyZWF0ZUNpcmN1bGFyRG91Ymxlc0J1ZmZlcihzbW9vdGhpbmdGcmFtZXMpXG4gICk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsb29wQW5pbWF0aW9uRnJhbWUoKF8sIHRpbWVzdGFtcCkgPT4ge1xuICAgICAgdGltZXN0YW1wID0gTWF0aC5yb3VuZCh0aW1lc3RhbXApO1xuXG4gICAgICBjb25zdCBjdXJyZW50RnBzID0gY29tcGxldGVCdWZmZXJSb3V0aW5lKFxuICAgICAgICBjaXJjdWxhckJ1ZmZlci5jdXJyZW50LFxuICAgICAgICB0aW1lc3RhbXBcbiAgICAgICk7XG5cbiAgICAgIC8vIEpTIGZwcyBoYXZlIHRvIGJlIG1lYXN1cmVkIGV2ZXJ5IDJuZCBmcmFtZSxcbiAgICAgIC8vIHRodXMgMnggbXVsdGlwbGljYXRpb24gaGFzIHRvIG9jY3VyIGhlcmVcbiAgICAgIGpzRnBzLnZhbHVlID0gKGN1cnJlbnRGcHMgKiAyKS50b0ZpeGVkKDApO1xuICAgIH0pO1xuICB9LCBbanNGcHMsIHRvdGFsUmVuZGVyVGltZV0pO1xuXG4gIGNvbnN0IGFuaW1hdGVkUHJvcHMgPSB1c2VBbmltYXRlZFByb3BzKCgpID0+IHtcbiAgICBjb25zdCB0ZXh0ID0gJ0pTOiAnICsgKGpzRnBzLnZhbHVlID8/ICdOL0EnKSArICcgJztcbiAgICByZXR1cm4geyB0ZXh0LCBkZWZhdWx0VmFsdWU6IHRleHQgfTtcbiAgfSk7XG5cbiAgcmV0dXJuIChcbiAgICA8VmlldyBzdHlsZT17c3R5bGVzLmNvbnRhaW5lcn0+XG4gICAgICA8QW5pbWF0ZWRUZXh0SW5wdXRcbiAgICAgICAgc3R5bGU9e3N0eWxlcy50ZXh0fVxuICAgICAgICBhbmltYXRlZFByb3BzPXthbmltYXRlZFByb3BzfVxuICAgICAgICBlZGl0YWJsZT17ZmFsc2V9XG4gICAgICAvPlxuICAgIDwvVmlldz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gVWlQZXJmb3JtYW5jZSh7IHNtb290aGluZ0ZyYW1lcyB9OiB7IHNtb290aGluZ0ZyYW1lczogbnVtYmVyIH0pIHtcbiAgY29uc3QgdWlGcHMgPSB1c2VTaGFyZWRWYWx1ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgY2lyY3VsYXJCdWZmZXIgPSB1c2VTaGFyZWRWYWx1ZTxDaXJjdWxhckJ1ZmZlciB8IG51bGw+KG51bGwpO1xuXG4gIHVzZUZyYW1lQ2FsbGJhY2soKHsgdGltZXN0YW1wIH06IEZyYW1lSW5mbykgPT4ge1xuICAgIGlmIChjaXJjdWxhckJ1ZmZlci52YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgY2lyY3VsYXJCdWZmZXIudmFsdWUgPSBjcmVhdGVDaXJjdWxhckRvdWJsZXNCdWZmZXIoc21vb3RoaW5nRnJhbWVzKTtcbiAgICB9XG5cbiAgICB0aW1lc3RhbXAgPSBNYXRoLnJvdW5kKHRpbWVzdGFtcCk7XG5cbiAgICBjb25zdCBjdXJyZW50RnBzID0gY29tcGxldGVCdWZmZXJSb3V0aW5lKGNpcmN1bGFyQnVmZmVyLnZhbHVlLCB0aW1lc3RhbXApO1xuXG4gICAgdWlGcHMudmFsdWUgPSBjdXJyZW50RnBzLnRvRml4ZWQoMCk7XG4gIH0pO1xuXG4gIGNvbnN0IGFuaW1hdGVkUHJvcHMgPSB1c2VBbmltYXRlZFByb3BzKCgpID0+IHtcbiAgICBjb25zdCB0ZXh0ID0gJ1VJOiAnICsgKHVpRnBzLnZhbHVlID8/ICdOL0EnKSArICcgJztcbiAgICByZXR1cm4geyB0ZXh0LCBkZWZhdWx0VmFsdWU6IHRleHQgfTtcbiAgfSk7XG5cbiAgcmV0dXJuIChcbiAgICA8VmlldyBzdHlsZT17c3R5bGVzLmNvbnRhaW5lcn0+XG4gICAgICA8QW5pbWF0ZWRUZXh0SW5wdXRcbiAgICAgICAgc3R5bGU9e3N0eWxlcy50ZXh0fVxuICAgICAgICBhbmltYXRlZFByb3BzPXthbmltYXRlZFByb3BzfVxuICAgICAgICBlZGl0YWJsZT17ZmFsc2V9XG4gICAgICAvPlxuICAgIDwvVmlldz5cbiAgKTtcbn1cblxuZXhwb3J0IHR5cGUgUGVyZm9ybWFuY2VNb25pdG9yUHJvcHMgPSB7XG4gIC8qKlxuICAgKiBTZXRzIGFtb3VudCBvZiBwcmV2aW91cyBmcmFtZXMgdXNlZCBmb3Igc21vb3RoaW5nIGF0IGhpZ2hlc3QgZXhwZWN0ZWRGcHMuXG4gICAqXG4gICAqIEF1dG9tYXRpY2FsbHkgc2NhbGVzIGRvd24gYXQgbG93ZXIgZnJhbWUgcmF0ZXMuXG4gICAqXG4gICAqIEFmZmVjdHMganVtcGluZXNzIG9mIHRoZSBGUFMgbWVhc3VyZW1lbnRzIHZhbHVlLlxuICAgKi9cbiAgc21vb3RoaW5nRnJhbWVzPzogbnVtYmVyO1xufTtcblxuLyoqXG4gKiBBIGNvbXBvbmVudCB0aGF0IGxldHMgeW91IG1lYXN1cmUgZnBzIHZhbHVlcyBvbiBKUyBhbmQgVUkgdGhyZWFkcyBvbiBib3RoIHRoZSBQYXBlciBhbmQgRmFicmljIGFyY2hpdGVjdHVyZXMuXG4gKlxuICogQHBhcmFtIHNtb290aGluZ0ZyYW1lcyAtIERldGVybWluZXMgYW1vdW50IG9mIHNhdmVkIGZyYW1lcyB3aGljaCB3aWxsIGJlIHVzZWQgZm9yIGZwcyB2YWx1ZSBzbW9vdGhpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBQZXJmb3JtYW5jZU1vbml0b3Ioe1xuICBzbW9vdGhpbmdGcmFtZXMgPSBERUZBVUxUX0JVRkZFUl9TSVpFLFxufTogUGVyZm9ybWFuY2VNb25pdG9yUHJvcHMpIHtcbiAgcmV0dXJuIChcbiAgICA8VmlldyBzdHlsZT17c3R5bGVzLm1vbml0b3J9PlxuICAgICAgPEpzUGVyZm9ybWFuY2Ugc21vb3RoaW5nRnJhbWVzPXtzbW9vdGhpbmdGcmFtZXN9IC8+XG4gICAgICA8VWlQZXJmb3JtYW5jZSBzbW9vdGhpbmdGcmFtZXM9e3Ntb290aGluZ0ZyYW1lc30gLz5cbiAgICA8L1ZpZXc+XG4gICk7XG59XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgbW9uaXRvcjoge1xuICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIGJhY2tncm91bmRDb2xvcjogJyMwMDA2JyxcbiAgICB6SW5kZXg6IDEwMDAsXG4gIH0sXG4gIGhlYWRlcjoge1xuICAgIGZvbnRTaXplOiAxNCxcbiAgICBjb2xvcjogJyNmZmZmJyxcbiAgICBwYWRkaW5nSG9yaXpvbnRhbDogNSxcbiAgfSxcbiAgdGV4dDoge1xuICAgIGZvbnRTaXplOiAxMyxcbiAgICBjb2xvcjogJyNmZmZmJyxcbiAgICBmb250RmFtaWx5OiAnbW9ub3NwYWNlJyxcbiAgICBwYWRkaW5nSG9yaXpvbnRhbDogMyxcbiAgfSxcbiAgY29udGFpbmVyOiB7XG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICAgIGZsZXhXcmFwOiAnd3JhcCcsXG4gIH0sXG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFBQ0EsTUFBQSxDQUFBQyxjQUFBLENBQUFDLE9BQUE7RUFBQUMsS0FBQTtBQUFBO0FBQUFELE9BQUEsQ0FBQUUsa0JBQUEsR0FBQUEsa0JBQUE7QUFFYixJ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