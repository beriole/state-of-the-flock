b0131243125ad3922f49fb819ca01ee1
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.updateLayoutAnimations = void 0;
var _PlatformChecker = require("./PlatformChecker");
var _core = require("./core");
function createUpdateManager() {
  var animations = [];
  var deferredAnimations = [];
  return {
    update: function update(batchItem, isUnmounting) {
      if (isUnmounting) {
        deferredAnimations.push(batchItem);
      } else {
        animations.push(batchItem);
      }
      if (animations.length + deferredAnimations.length === 1) {
        (0, _PlatformChecker.isFabric)() ? this.flush() : setImmediate(this.flush);
      }
    },
    flush: function flush() {
      (0, _core.configureLayoutAnimationBatch)(animations.concat(deferredAnimations));
      animations.length = 0;
      deferredAnimations.length = 0;
    }
  };
}
var updateLayoutAnimations;
if ((0, _PlatformChecker.shouldBeUseWeb)()) {
  exports.updateLayoutAnimations = updateLayoutAnimations = function updateLayoutAnimations() {};
} else {
  var updateLayoutAnimationsManager = createUpdateManager();
  exports.updateLayoutAnimations = updateLayoutAnimations = function updateLayoutAnimations(viewTag, type, config, sharedTransitionTag, isUnmounting) {
    return updateLayoutAnimationsManager.update({
      viewTag: viewTag,
      type: type,
      config: config ? (0, _core.makeShareableCloneRecursive)(config) : undefined,
      sharedTransitionTag: sharedTransitionTag
    }, isUnmounting);
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInVwZGF0ZUxheW91dEFuaW1hdGlvbnMiLCJfUGxhdGZvcm1DaGVja2VyIiwicmVxdWlyZSIsIl9jb3JlIiwiY3JlYXRlVXBkYXRlTWFuYWdlciIsImFuaW1hdGlvbnMiLCJkZWZlcnJlZEFuaW1hdGlvbnMiLCJ1cGRhdGUiLCJiYXRjaEl0ZW0iLCJpc1VubW91bnRpbmciLCJwdXNoIiwibGVuZ3RoIiwiaXNGYWJyaWMiLCJmbHVzaCIsInNldEltbWVkaWF0ZSIsImNvbmZpZ3VyZUxheW91dEFuaW1hdGlvbkJhdGNoIiwiY29uY2F0Iiwic2hvdWxkQmVVc2VXZWIiLCJ1cGRhdGVMYXlvdXRBbmltYXRpb25zTWFuYWdlciIsInZpZXdUYWciLCJ0eXBlIiwiY29uZmlnIiwic2hhcmVkVHJhbnNpdGlvblRhZyIsIm1ha2VTaGFyZWFibGVDbG9uZVJlY3Vyc2l2ZSIsInVuZGVmaW5lZCJdLCJzb3VyY2VzIjpbIlVwZGF0ZUxheW91dEFuaW1hdGlvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IHsgaXNGYWJyaWMsIHNob3VsZEJlVXNlV2ViIH0gZnJvbSAnLi9QbGF0Zm9ybUNoZWNrZXInO1xuaW1wb3J0IHtcbiAgY29uZmlndXJlTGF5b3V0QW5pbWF0aW9uQmF0Y2gsXG4gIG1ha2VTaGFyZWFibGVDbG9uZVJlY3Vyc2l2ZSxcbn0gZnJvbSAnLi9jb3JlJztcbmltcG9ydCB0eXBlIHtcbiAgTGF5b3V0QW5pbWF0aW9uRnVuY3Rpb24sXG4gIExheW91dEFuaW1hdGlvblR5cGUsXG59IGZyb20gJy4vbGF5b3V0UmVhbmltYXRpb24nO1xuaW1wb3J0IHR5cGUge1xuICBMYXlvdXRBbmltYXRpb25CYXRjaEl0ZW0sXG4gIFByb2dyZXNzQW5pbWF0aW9uQ2FsbGJhY2ssXG4gIFNoYXJlZFRyYW5zaXRpb25BbmltYXRpb25zRnVuY3Rpb24sXG59IGZyb20gJy4vbGF5b3V0UmVhbmltYXRpb24vYW5pbWF0aW9uQnVpbGRlci9jb21tb25UeXBlcyc7XG5cbmZ1bmN0aW9uIGNyZWF0ZVVwZGF0ZU1hbmFnZXIoKSB7XG4gIGNvbnN0IGFuaW1hdGlvbnM6IExheW91dEFuaW1hdGlvbkJhdGNoSXRlbVtdID0gW107XG4gIC8vIFdoZW4gYSBzdGFjayBpcyByZXJlbmRlcmVkIHdlIHJlY29uZmlndXJlIGFsbCB0aGUgc2hhcmVkIGVsZW1lbnRzLlxuICAvLyBUbyBkbyB0aGF0IHdlIHdhbnQgdGhlbSB0byBhcHBlYXIgaW4gb3VyIGJhdGNoIGluIHRoZSBjb3JyZWN0IG9yZGVyLFxuICAvLyBzbyB3ZSBkZWZlciBzb21lIG9mIHRoZSB1cGRhdGVzIHRvIGFwcGVhciBhdCB0aGUgZW5kIG9mIHRoZSBiYXRjaC5cbiAgY29uc3QgZGVmZXJyZWRBbmltYXRpb25zOiBMYXlvdXRBbmltYXRpb25CYXRjaEl0ZW1bXSA9IFtdO1xuXG4gIHJldHVybiB7XG4gICAgdXBkYXRlKGJhdGNoSXRlbTogTGF5b3V0QW5pbWF0aW9uQmF0Y2hJdGVtLCBpc1VubW91bnRpbmc/OiBib29sZWFuKSB7XG4gICAgICBpZiAoaXNVbm1vdW50aW5nKSB7XG4gICAgICAgIGRlZmVycmVkQW5pbWF0aW9ucy5wdXNoKGJhdGNoSXRlbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbmltYXRpb25zLnB1c2goYmF0Y2hJdGVtKTtcbiAgICAgIH1cbiAgICAgIGlmIChhbmltYXRpb25zLmxlbmd0aCArIGRlZmVycmVkQW5pbWF0aW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaXNGYWJyaWMoKSA/IHRoaXMuZmx1c2goKSA6IHNldEltbWVkaWF0ZSh0aGlzLmZsdXNoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGZsdXNoKHRoaXM6IHZvaWQpIHtcbiAgICAgIGNvbmZpZ3VyZUxheW91dEFuaW1hdGlvbkJhdGNoKGFuaW1hdGlvbnMuY29uY2F0KGRlZmVycmVkQW5pbWF0aW9ucykpO1xuICAgICAgYW5pbWF0aW9ucy5sZW5ndGggPSAwO1xuICAgICAgZGVmZXJyZWRBbmltYXRpb25zLmxlbmd0aCA9IDA7XG4gICAgfSxcbiAgfTtcbn1cblxuLyoqXG4gKiBMZXRzIHlvdSB1cGRhdGUgdGhlIGN1cnJlbnQgY29uZmlndXJhdGlvbiBvZiB0aGUgbGF5b3V0IGFuaW1hdGlvbiBvciBzaGFyZWQgZWxlbWVudCB0cmFuc2l0aW9uIGZvciBhIGdpdmVuIGNvbXBvbmVudC5cbiAqIENvbmZpZ3VyYXRpb25zIGFyZSBiYXRjaGVkIGFuZCBhcHBsaWVkIGF0IHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgZXhlY3V0aW9uIGJsb2NrLCByaWdodCBiZWZvcmUgc2VuZGluZyB0aGUgcmVzcG9uc2UgYmFjayB0byBuYXRpdmUuXG4gKlxuICogQHBhcmFtIHZpZXdUYWcgLSBUaGUgdGFnIG9mIHRoZSBjb21wb25lbnQgeW91J2QgbGlrZSB0byBjb25maWd1cmUuXG4gKiBAcGFyYW0gdHlwZSAtIFRoZSB0eXBlIG9mIHRoZSBhbmltYXRpb24geW91J2QgbGlrZSB0byBjb25maWd1cmUgLSB7QGxpbmsgTGF5b3V0QW5pbWF0aW9uVHlwZX0uXG4gKiBAcGFyYW0gY29uZmlnIC0gVGhlIGFuaW1hdGlvbiBjb25maWd1cmF0aW9uIC0ge0BsaW5rIExheW91dEFuaW1hdGlvbkZ1bmN0aW9ufSwge0BsaW5rIFNoYXJlZFRyYW5zaXRpb25BbmltYXRpb25zRnVuY3Rpb259LCB7QGxpbmsgUHJvZ3Jlc3NBbmltYXRpb25DYWxsYmFja30gb3Ige0BsaW5rIEtleWZyYW1lfS4gUGFzc2luZyBgdW5kZWZpbmVkYCB3aWxsIHJlbW92ZSB0aGUgYW5pbWF0aW9uLlxuICogQHBhcmFtIHNoYXJlZFRyYW5zaXRpb25UYWcgLSBUaGUgdGFnIG9mIHRoZSBzaGFyZWQgZWxlbWVudCB0cmFuc2l0aW9uIHlvdSdkIGxpa2UgdG8gY29uZmlndXJlLiBQYXNzaW5nIGB1bmRlZmluZWRgIHdpbGwgcmVtb3ZlIHRoZSB0cmFuc2l0aW9uLlxuICogQHBhcmFtIGlzVW5tb3VudGluZyAtIERldGVybWluZXMgd2hldGhlciB0aGUgY29uZmlndXJhdGlvbiBzaG91bGQgYmUgaW5jbHVkZWQgYXQgdGhlIGVuZCBvZiB0aGUgYmF0Y2gsIGFmdGVyIGFsbCB0aGUgbm9uLWRlZmVycmVkIGNvbmZpZ3VyYXRpb25zIChldmVuIHRob3NlIHRoYXQgd2VyZSB1cGRhdGVkIGxhdGVyKS4gVGhpcyBpcyB1c2VkIHRvIHJldGFpbiB0aGUgY29ycmVjdCBvcmRlcmluZyBvZiBzaGFyZWQgZWxlbWVudHMuIERlZmF1bHRzIHRvIGBmYWxzZWAuXG4gKi9cbmV4cG9ydCBsZXQgdXBkYXRlTGF5b3V0QW5pbWF0aW9uczogKFxuICB2aWV3VGFnOiBudW1iZXIsXG4gIHR5cGU6IExheW91dEFuaW1hdGlvblR5cGUsXG4gIGNvbmZpZz86XG4gICAgfCBLZXlmcmFtZVxuICAgIHwgTGF5b3V0QW5pbWF0aW9uRnVuY3Rpb25cbiAgICB8IFNoYXJlZFRyYW5zaXRpb25BbmltYXRpb25zRnVuY3Rpb25cbiAgICB8IFByb2dyZXNzQW5pbWF0aW9uQ2FsbGJhY2ssXG4gIHNoYXJlZFRyYW5zaXRpb25UYWc/OiBzdHJpbmcsXG4gIGlzVW5tb3VudGluZz86IGJvb2xlYW5cbikgPT4gdm9pZDtcblxuaWYgKHNob3VsZEJlVXNlV2ViKCkpIHtcbiAgdXBkYXRlTGF5b3V0QW5pbWF0aW9ucyA9ICgpID0+IHtcbiAgICAvLyBuby1vcFxuICB9O1xufSBlbHNlIHtcbiAgY29uc3QgdXBkYXRlTGF5b3V0QW5pbWF0aW9uc01hbmFnZXIgPSBjcmVhdGVVcGRhdGVNYW5hZ2VyKCk7XG4gIHVwZGF0ZUxheW91dEFuaW1hdGlvbnMgPSAoXG4gICAgdmlld1RhZyxcbiAgICB0eXBlLFxuICAgIGNvbmZpZyxcbiAgICBzaGFyZWRUcmFuc2l0aW9uVGFnLFxuICAgIGlzVW5tb3VudGluZ1xuICApID0+XG4gICAgdXBkYXRlTGF5b3V0QW5pbWF0aW9uc01hbmFnZXIudXBkYXRlKFxuICAgICAge1xuICAgICAgICB2aWV3VGFnLFxuICAgICAgICB0eXBlLFxuICAgICAgICBjb25maWc6IGNvbmZpZyA/IG1ha2VTaGFyZWFibGVDbG9uZVJlY3Vyc2l2ZShjb25maWcpIDogdW5kZWZpbmVkLFxuICAgICAgICBzaGFyZWRUcmFuc2l0aW9uVGFnLFxuICAgICAgfSxcbiAgICAgIGlzVW5tb3VudGluZ1xuICAgICk7XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQUNBLE1BQUEsQ0FBQUMsY0FBQSxDQUFBQyxPQUFBO0VBQUFDLEtBQUE7QUFBQTtBQUFBRCxPQUFBLENBQUFFLHNCQUFBO0FBQ2IsSUFBQUMsZ0JBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLEtBQUEsR0FBQUQsT0FBQTtBQWNBLFNBQVNFLG1CQUFtQkEsQ0FBQSxFQUFHO0VBQzdCLElBQU1DLFVBQXNDLEdBQUcsRUFBRTtFQUlqRCxJQUFNQyxrQkFBOEMsR0FBRyxFQUFFO0VBRXpELE9BQU87SUFDTEMsTUFBTSxXQUFOQSxNQUFNQSxDQUFDQyxTQUFtQyxFQUFFQyxZQUFzQixFQUFFO01BQ2xFLElBQUlBLFlBQVksRUFBRTtRQUNoQkgsa0JBQWtCLENBQUNJLElBQUksQ0FBQ0YsU0FBUyxDQUFDO01BQ3BDLENBQUMsTUFBTTtRQUNMSCxVQUFVLENBQUNLLElBQUksQ0FBQ0YsU0FBUyxDQUFDO01BQzVCO01BQ0EsSUFBSUgsVUFBVSxDQUFDTSxNQUFNLEdBQUdMLGtCQUFrQixDQUFDSyxNQUFNLEtBQUssQ0FBQyxFQUFFO1FBQ3ZELElBQUFDLHlCQUFRLEVBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQ0MsS0FBSyxDQUFDLENBQUMsR0FBR0MsWUFBWSxDQUFDLElBQUksQ0FBQ0QsS0FBSyxDQUFDO01BQ3REO0lBQ0YsQ0FBQztJQUNEQSxLQUFLLFdBQUxBLEtBQUtBLENBQUEsRUFBYTtNQUNoQixJQUFBRSxtQ0FBNkIsRUFBQ1YsVUFBVSxDQUFDVyxNQUFNLENBQUNWLGtCQUFrQixDQUFDLENBQUM7TUFDcEVELFVBQVUsQ0FBQ00sTUFBTSxHQUFHLENBQUM7TUFDckJMLGtCQUFrQixDQUFDSyxNQUFNLEdBQUcsQ0FBQztJQUMvQjtFQUNGLENBQUM7QUFDSDtBQVlPLElBQUlYLHNCQVVGO0FBRVQsSUFBSSxJQUFBaUIsK0JBQWMsRUFBQyxDQUFDLEVBQUU7RUFDcEJuQixPQUFBLENBQUFFLHNCQUFBLEdBQUFBLHNCQUFzQixHQUFHLFNBQXpCQSxzQkFBc0JBLENBQUEsRUFBUyxDQUUvQixDQUFDO0FBQ0gsQ0FBQyxNQUFNO0VBQ0wsSUFBTWtCLDZCQUE2QixHQUFHZCxtQkFBbUIsQ0FBQyxDQUFDO0VBQzNETixPQUFBLENBQUFFLHNCQUFBLEdBQUFBLHNCQUFzQixHQUFHLFNBQXpCQSxzQkFBc0JBLENBQ3BCbUIsT0FBTyxFQUNQQyxJQUFJLEVBQ0pDLE1BQU0sRUFDTkMsbUJBQW1CLEVBQ25CYixZQUFZO0lBQUEsT0FFWlMsNkJBQTZCLENBQUNYLE1BQU0sQ0FDbEM7TUFDRVksT0FBTyxFQUFQQSxPQUFPO01BQ1BDLElBQUksRUFBSkEsSUFBSTtNQUNKQyxNQUFNLEVBQUVBLE1BQU0sR0FBRyxJQUFBRSxpQ0FBMkIsRUFBQ0YsTUFBTSxDQUFDLEdBQUdHLFNBQVM7TUFDaEVGLG1CQUFtQixFQUFuQkE7SUFDRixDQUFDLEVBQ0RiLFlBQ0YsQ0FBQztFQUFBO0FBQ0wiLCJpZ25vcmVMaXN0IjpbXX0=